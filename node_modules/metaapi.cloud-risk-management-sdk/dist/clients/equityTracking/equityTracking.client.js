'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _drawdownListenerManager = require('./drawdownListenerManager');

var _drawdownListenerManager2 = _interopRequireDefault(_drawdownListenerManager);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/**
 * metaapi.cloud RiskManagement equity tracking API client (see https://metaapi.cloud/docs/riskManagement/)
 */
class EquityTrackingClient {

  /**
   * Constructs RiskManagement equity tracking API client instance
   * @param {DomainClient} domainClient domain client
   */
  constructor(domainClient) {
    this._domainClient = domainClient;
    this._drawdownListenerManager = new _drawdownListenerManager2.default(domainClient);
  }

  /**
   * Drawdown tracker configuration update
   * @typedef {Object} DrawdownTrackerUpdate
   * @property {String} name drawdown tracker name
   */

  /**
   * Period length to track drawdown for
   * @typedef {'day' | 'date' | 'week' | 'week-to-date' | 'month' | 'month-to-date' | 'quarter' | 'quarter-to-date' |
   * 'year' | 'year-to-date' | 'lifetime'} Period
   */

  /**
   * New drawdown tracker configuration
   * @typedef {DrawdownTrackerUpdate} NewDrawdownTracker
   * @property {String} [startBrokerTime] time to start tracking from in broker timezone, YYYY-MM-DD HH:mm:ss.SSS format
   * @property {String} [endBrokerTime] time to end tracking at in broker timezone, YYYY-MM-DD HH:mm:ss.SSS format
   * @property {Period} period period length to track drawdown for
   * @property {Number} [relativeDrawdownThreshold] relative drawdown threshold after which drawdown event is generated,
   * a fraction of 1
   * @property {Number} [absoluteDrawdownThreshold] absolute drawdown threshold after which drawdown event is generated,
   * should be greater than 0
   */

  /**
   * Drawdown tracker id
   * @typedef {Object} DrawdownTrackerId
   * @property {String} id drawdown tracker id
   */

  /**
   * Creates drawdown tracker. See
   * https://metaapi.cloud/docs/riskManagement/restApi/api/equityTracking/createDrawdownTracker/
   * @param {String} accountId id of the MetaApi account
   * @param {NewDrawdownTracker} tracker drawdown tracker
   * @return {Promise<DrawdownTrackerId>} promise resolving with drawdown tracker id
   */
  createDrawdownTracker(accountId, tracker) {
    return this._domainClient.requestApi({
      url: `/users/current/accounts/${accountId}/drawdown-trackers`,
      method: 'POST',
      body: tracker
    });
  }

  /**
   * Drawdown tracker configuration
   * @typedef {NewDrawdownTracker} DrawdownTracker
   * @property {String} _id unique drawdown tracker id
   */

  /**
   * Returns drawdown trackers defined for an account
   * @param {String} accountId id of the MetaApi account
   * @return {Promise<DrawdownTracker[]>} promise resolving with drawdown trackers
   */
  getDrawdownTrackers(accountId) {
    return this._domainClient.requestApi({
      url: `/users/current/accounts/${accountId}/drawdown-trackers`,
      method: 'GET'
    });
  }

  /**
   * Returns drawdown tracker by account and name
   * @param {string} accountId id of the MetaApi account
   * @param {string} name tracker name
   * @return {Promise<DrawdownTracker>} promise resolving with drawdown tracker found
   */
  getDrawdownTrackerByName(accountId, name) {
    return this._domainClient.requestApi({
      url: `/users/current/accounts/${accountId}/drawdown-trackers/name/${encodeURIComponent(name)}`,
      method: 'GET'
    });
  }

  /**
   * Updates drawdown tracker
   * @param {String} accountId id of the MetaApi account
   * @param {String} id id of the drawdown tracker
   * @param {DrawdownTrackerUpdate} update drawdown tracker update
   * @return {Promise} promise resolving when drawdown tracker updated
   */
  updateDrawdownTracker(accountId, id, update) {
    return this._domainClient.requestApi({
      url: `/users/current/accounts/${accountId}/drawdown-trackers/${id}`,
      method: 'PUT',
      body: update
    });
  }

  /**
   * Removes drawdown tracker
   * @param {String} accountId id of the MetaApi account
   * @param {String} id id of the drawdown tracker
   * @return {Promise} promise resolving when drawdown tracker removed
   */
  deleteDrawdownTracker(accountId, id) {
    return this._domainClient.requestApi({
      url: `/users/current/accounts/${accountId}/drawdown-trackers/${id}`,
      method: 'DELETE'
    });
  }

  /**
   * Drawdown threshold exceeded event model
   * @typedef {Object} DrawdownEvent
   * @property {Number} sequenceNumber event unique sequence number
   * @property {String} accountId MetaApi account id
   * @property {String} trackerId drawdown tracker id
   * @property {String} startBrokerTime drawdown tracking period start time in broker timezone,
   * in YYYY-MM-DD HH:mm:ss.SSS format
   * @property {String} [endBrokerTime] drawdown tracking period end time in broker timezone,
   * in YYYY-MM-DD HH:mm:ss.SSS format
   * @property {Period} period drawdown tracking period
   * @property {String} brokerTime drawdown threshold exceeded event time in broker timezone,
   * in YYY-MM-DD HH:mm:ss.SSS format
   * @property {Number} absoluteDrawdown absolute drawdown value which was observed when the drawdown threshold was
   * exceeded
   * @property {Number} relativeDrawdown relative drawdown value which was observed when the drawdown threshold was
   * exceeded
   */

  /**
   * Returns drawdown events by broker time range
   * @param {String} [startBrokerTime] value of the event time in broker timezone to start loading data from, inclusive,
   * in 'YYYY-MM-DD HH:mm:ss.SSS format
   * @param {String} [endBrokerTime] value of the event time in broker timezone to end loading data at, inclusive,
   * in 'YYYY-MM-DD HH:mm:ss.SSS format
   * @param {String} [accountId] id of the MetaApi account
   * @param {String} [trackerId] id of the drawdown tracker
   * @param {Number} [limit] pagination limit, default is 1000
   * @return {Promise<DrawdownEvent[]>} promise resolving with drawdown events
   */
  getDrawdownEvents(startBrokerTime, endBrokerTime, accountId, trackerId, limit) {
    return this._domainClient.requestApi({
      url: '/users/current/drawdown-events/by-broker-time',
      qs: { startBrokerTime, endBrokerTime, accountId, trackerId, limit },
      method: 'GET'
    });
  }

  /**
   * Adds a drawdown listener and creates a job to make requests
   * @param {DrawdownListener} listener drawdown listener
   * @param {String} [accountId] account id
   * @param {String} [trackerId] tracker id
   * @param {Number} [sequenceNumber] sequence number
   * @return {String} listener id
   */
  addDrawdownListener(listener, accountId, trackerId, sequenceNumber) {
    return this._drawdownListenerManager.addDrawdownListener(listener, accountId, trackerId, sequenceNumber);
  }

  /**
   * Removes drawdown listener and cancels the event stream
   * @param {String} listenerId drawdown listener id
   */
  removeDrawdownListener(listenerId) {
    this._drawdownListenerManager.removeDrawdownListener(listenerId);
  }

  /**
   * Drawdown period statistics
   * @typedef {Object} DrawdownPeriodStatistics
   * @property {String} startBrokerTime period start time in broker timezone, in YYYY-MM-DD HH:mm:ss format
   * @property {String} [endBrokerTime] period end time in broker timezone, in YYYY-MM-DD HH:mm:ss format
   * @property {Period} period period length
   * @property {Number} initialBalance balance at period start time
   * @property {String} [maxDrawdownTime] time max drawdown was observed at in broker timezone,
   * in YYYY-MM-DD HH:mm:ss format
   * @property {Number} [maxAbsoluteDrawdown] the value of maximum absolute drawdown observed
   * @property {Number} [maxRelativeDrawdown] the value of maximum relative drawdown observed
   * @property {Boolean} thresholdExceeded the flag indicating that max allowed total drawdown was exceeded
   */

  /**
   * Returns account drawdown tracking stats by drawdown tracker id
   * @param {String} accountId id of MetaAPI account
   * @param {String} trackerId id of drawdown tracker
   * @param {String} [startTime] time to start loading stats from, default is current time. Note that stats is loaded in
   * backwards direction
   * @param {Number} [limit] number of records to load, default is 1
   * @return {Promise<DrawdownPeriodStatistics[]>} promise resolving with drawdown statistics
   */
  getDrawdownStatistics(accountId, trackerId, startTime, limit) {
    return this._domainClient.requestApi({
      url: `/users/current/accounts/${accountId}/drawdown-trackers/${trackerId}/statistics`,
      qs: { startTime, limit },
      method: 'GET'
    });
  }

  /**
   * Equity chart item
   * @typedef {Object} EquityChartItem
   * @property {String} startBrokerTime start time of a chart item as per broker timezone, in YYYY-MM-DD HH:mm:ss format
   * @property {String} endBrokerTime end time of a chart item as per broker timezone, in YYYY-MM-DD HH:mm:ss format
   * @property {Number} averageBalance average balance value during the period
   * @property {Number} minBalance minimum balance value during the period
   * @property {Number} maxBalance maximum balance value during the period
   * @property {Number} averageEquity average equity value during the period
   * @property {Number} minEquity minimum equity value during the period
   * @property {Number} maxEquity maximum equity value during the period
   */

  /**
   * Returns equity chart by account id
   * @param {String} accountId metaApi account id
   * @param {String} [startTime] starting broker time in YYYY-MM-DD HH:mm:ss format
   * @param {String} [endTime] ending broker time in YYYY-MM-DD HH:mm:ss format
   * @return {Promise<EquityChartItem[]>} promise resolving with equity chart
   */
  getEquityChart(accountId, startTime, endTime) {
    return this._domainClient.requestApi({
      url: `/users/current/accounts/${accountId}/equity-chart`,
      qs: { startTime, endTime },
      method: 'GET'
    });
  }
}
exports.default = EquityTrackingClient;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL2xpYi9jbGllbnRzL2VxdWl0eVRyYWNraW5nL2VxdWl0eVRyYWNraW5nLmNsaWVudC5lczYiXSwibmFtZXMiOlsiRXF1aXR5VHJhY2tpbmdDbGllbnQiLCJjb25zdHJ1Y3RvciIsImRvbWFpbkNsaWVudCIsIl9kb21haW5DbGllbnQiLCJfZHJhd2Rvd25MaXN0ZW5lck1hbmFnZXIiLCJEcmF3ZG93bkxpc3RlbmVyTWFuYWdlciIsImNyZWF0ZURyYXdkb3duVHJhY2tlciIsImFjY291bnRJZCIsInRyYWNrZXIiLCJyZXF1ZXN0QXBpIiwidXJsIiwibWV0aG9kIiwiYm9keSIsImdldERyYXdkb3duVHJhY2tlcnMiLCJnZXREcmF3ZG93blRyYWNrZXJCeU5hbWUiLCJuYW1lIiwiZW5jb2RlVVJJQ29tcG9uZW50IiwidXBkYXRlRHJhd2Rvd25UcmFja2VyIiwiaWQiLCJ1cGRhdGUiLCJkZWxldGVEcmF3ZG93blRyYWNrZXIiLCJnZXREcmF3ZG93bkV2ZW50cyIsInN0YXJ0QnJva2VyVGltZSIsImVuZEJyb2tlclRpbWUiLCJ0cmFja2VySWQiLCJsaW1pdCIsInFzIiwiYWRkRHJhd2Rvd25MaXN0ZW5lciIsImxpc3RlbmVyIiwic2VxdWVuY2VOdW1iZXIiLCJyZW1vdmVEcmF3ZG93bkxpc3RlbmVyIiwibGlzdGVuZXJJZCIsImdldERyYXdkb3duU3RhdGlzdGljcyIsInN0YXJ0VGltZSIsImdldEVxdWl0eUNoYXJ0IiwiZW5kVGltZSJdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7OztBQUVBOzs7Ozs7QUFFQTs7O0FBR2UsTUFBTUEsb0JBQU4sQ0FBMkI7O0FBRXhDOzs7O0FBSUFDLGNBQVlDLFlBQVosRUFBMEI7QUFDeEIsU0FBS0MsYUFBTCxHQUFxQkQsWUFBckI7QUFDQSxTQUFLRSx3QkFBTCxHQUFnQyxJQUFJQyxpQ0FBSixDQUE0QkgsWUFBNUIsQ0FBaEM7QUFDRDs7QUFFRDs7Ozs7O0FBTUE7Ozs7OztBQU1BOzs7Ozs7Ozs7Ozs7QUFZQTs7Ozs7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QyxXQUFPLEtBQUtoQyxhQUFMLENBQW1CTSxVQUFuQixDQUE4QjtBQUNuQ0MsV0FBTSwyQkFBMEJILFNBQVUsZUFEUDtBQUVuQ21CLFVBQUksRUFBQ08sU0FBRCxFQUFZRSxPQUFaLEVBRitCO0FBR25DeEIsY0FBUTtBQUgyQixLQUE5QixDQUFQO0FBS0Q7QUF0T3VDO2tCQUFyQlgsb0IiLCJmaWxlIjoiZXF1aXR5VHJhY2tpbmcuY2xpZW50LmpzIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgRHJhd2Rvd25MaXN0ZW5lck1hbmFnZXIgZnJvbSAnLi9kcmF3ZG93bkxpc3RlbmVyTWFuYWdlcic7XG5cbi8qKlxuICogbWV0YWFwaS5jbG91ZCBSaXNrTWFuYWdlbWVudCBlcXVpdHkgdHJhY2tpbmcgQVBJIGNsaWVudCAoc2VlIGh0dHBzOi8vbWV0YWFwaS5jbG91ZC9kb2NzL3Jpc2tNYW5hZ2VtZW50LylcbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRXF1aXR5VHJhY2tpbmdDbGllbnQge1xuXG4gIC8qKlxuICAgKiBDb25zdHJ1Y3RzIFJpc2tNYW5hZ2VtZW50IGVxdWl0eSB0cmFja2luZyBBUEkgY2xpZW50IGluc3RhbmNlXG4gICAqIEBwYXJhbSB7RG9tYWluQ2xpZW50fSBkb21haW5DbGllbnQgZG9tYWluIGNsaWVudFxuICAgKi9cbiAgY29uc3RydWN0b3IoZG9tYWluQ2xpZW50KSB7XG4gICAgdGhpcy5fZG9tYWluQ2xpZW50ID0gZG9tYWluQ2xpZW50O1xuICAgIHRoaXMuX2RyYXdkb3duTGlzdGVuZXJNYW5hZ2VyID0gbmV3IERyYXdkb3duTGlzdGVuZXJNYW5hZ2VyKGRvbWFpbkNsaWVudCk7XG4gIH1cblxuICAvKipcbiAgICogRHJhd2Rvd24gdHJhY2tlciBjb25maWd1cmF0aW9uIHVwZGF0ZVxuICAgKiBAdHlwZWRlZiB7T2JqZWN0fSBEcmF3ZG93blRyYWNrZXJVcGRhdGVcbiAgICogQHByb3BlcnR5IHtTdHJpbmd9IG5hbWUgZHJhd2Rvd24gdHJhY2tlciBuYW1lXG4gICAqL1xuXG4gIC8qKlxuICAgKiBQZXJpb2QgbGVuZ3RoIHRvIHRyYWNrIGRyYXdkb3duIGZvclxuICAgKiBAdHlwZWRlZiB7J2RheScgfCAnZGF0ZScgfCAnd2VlaycgfCAnd2Vlay10by1kYXRlJyB8ICdtb250aCcgfCAnbW9udGgtdG8tZGF0ZScgfCAncXVhcnRlcicgfCAncXVhcnRlci10by1kYXRlJyB8XG4gICAqICd5ZWFyJyB8ICd5ZWFyLXRvLWRhdGUnIHwgJ2xpZmV0aW1lJ30gUGVyaW9kXG4gICAqL1xuXG4gIC8qKlxuICAgKiBOZXcgZHJhd2Rvd24gdHJhY2tlciBjb25maWd1cmF0aW9uXG4gICAqIEB0eXBlZGVmIHtEcmF3ZG93blRyYWNrZXJVcGRhdGV9IE5ld0RyYXdkb3duVHJhY2tlclxuICAgKiBAcHJvcGVydHkge1N0cmluZ30gW3N0YXJ0QnJva2VyVGltZV0gdGltZSB0byBzdGFydCB0cmFja2luZyBmcm9tIGluIGJyb2tlciB0aW1lem9uZSwgWVlZWS1NTS1ERCBISDptbTpzcy5TU1MgZm9ybWF0XG4gICAqIEBwcm9wZXJ0eSB7U3RyaW5nfSBbZW5kQnJva2VyVGltZV0gdGltZSB0byBlbmQgdHJhY2tpbmcgYXQgaW4gYnJva2VyIHRpbWV6b25lLCBZWVlZLU1NLUREIEhIOm1tOnNzLlNTUyBmb3JtYXRcbiAgICogQHByb3BlcnR5IHtQZXJpb2R9IHBlcmlvZCBwZXJpb2QgbGVuZ3RoIHRvIHRyYWNrIGRyYXdkb3duIGZvclxuICAgKiBAcHJvcGVydHkge051bWJlcn0gW3JlbGF0aXZlRHJhd2Rvd25UaHJlc2hvbGRdIHJlbGF0aXZlIGRyYXdkb3duIHRocmVzaG9sZCBhZnRlciB3aGljaCBkcmF3ZG93biBldmVudCBpcyBnZW5lcmF0ZWQsXG4gICAqIGEgZnJhY3Rpb24gb2YgMVxuICAgKiBAcHJvcGVydHkge051bWJlcn0gW2Fic29sdXRlRHJhd2Rvd25UaHJlc2hvbGRdIGFic29sdXRlIGRyYXdkb3duIHRocmVzaG9sZCBhZnRlciB3aGljaCBkcmF3ZG93biBldmVudCBpcyBnZW5lcmF0ZWQsXG4gICAqIHNob3VsZCBiZSBncmVhdGVyIHRoYW4gMFxuICAgKi9cblxuICAvKipcbiAgICogRHJhd2Rvd24gdHJhY2tlciBpZFxuICAgKiBAdHlwZWRlZiB7T2JqZWN0fSBEcmF3ZG93blRyYWNrZXJJZFxuICAgKiBAcHJvcGVydHkge1N0cmluZ30gaWQgZHJhd2Rvd24gdHJhY2tlciBpZFxuICAgKi9cblxuICAvKipcbiAgICogQ3JlYXRlcyBkcmF3ZG93biB0cmFja2VyLiBTZWVcbiAgICogaHR0cHM6Ly9tZXRhYXBpLmNsb3VkL2RvY3Mvcmlza01hbmFnZW1lbnQvcmVzdEFwaS9hcGkvZXF1aXR5VHJhY2tpbmcvY3JlYXRlRHJhd2Rvd25UcmFja2VyL1xuICAgKiBAcGFyYW0ge1N0cmluZ30gYWNjb3VudElkIGlkIG9mIHRoZSBNZXRhQXBpIGFjY291bnRcbiAgICogQHBhcmFtIHtOZXdEcmF3ZG93blRyYWNrZXJ9IHRyYWNrZXIgZHJhd2Rvd24gdHJhY2tlclxuICAgKiBAcmV0dXJuIHtQcm9taXNlPERyYXdkb3duVHJhY2tlcklkPn0gcHJvbWlzZSByZXNvbHZpbmcgd2l0aCBkcmF3ZG93biB0cmFja2VyIGlkXG4gICAqL1xuICBjcmVhdGVEcmF3ZG93blRyYWNrZXIoYWNjb3VudElkLCB0cmFja2VyKSB7XG4gICAgcmV0dXJuIHRoaXMuX2RvbWFpbkNsaWVudC5yZXF1ZXN0QXBpKHtcbiAgICAgIHVybDogYC91c2Vycy9jdXJyZW50L2FjY291bnRzLyR7YWNjb3VudElkfS9kcmF3ZG93bi10cmFja2Vyc2AsXG4gICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgIGJvZHk6IHRyYWNrZXJcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEcmF3ZG93biB0cmFja2VyIGNvbmZpZ3VyYXRpb25cbiAgICogQHR5cGVkZWYge05ld0RyYXdkb3duVHJhY2tlcn0gRHJhd2Rvd25UcmFja2VyXG4gICAqIEBwcm9wZXJ0eSB7U3RyaW5nfSBfaWQgdW5pcXVlIGRyYXdkb3duIHRyYWNrZXIgaWRcbiAgICovXG5cbiAgLyoqXG4gICAqIFJldHVybnMgZHJhd2Rvd24gdHJhY2tlcnMgZGVmaW5lZCBmb3IgYW4gYWNjb3VudFxuICAgKiBAcGFyYW0ge1N0cmluZ30gYWNjb3VudElkIGlkIG9mIHRoZSBNZXRhQXBpIGFjY291bnRcbiAgICogQHJldHVybiB7UHJvbWlzZTxEcmF3ZG93blRyYWNrZXJbXT59IHByb21pc2UgcmVzb2x2aW5nIHdpdGggZHJhd2Rvd24gdHJhY2tlcnNcbiAgICovXG4gIGdldERyYXdkb3duVHJhY2tlcnMoYWNjb3VudElkKSB7XG4gICAgcmV0dXJuIHRoaXMuX2RvbWFpbkNsaWVudC5yZXF1ZXN0QXBpKHtcbiAgICAgIHVybDogYC91c2Vycy9jdXJyZW50L2FjY291bnRzLyR7YWNjb3VudElkfS9kcmF3ZG93bi10cmFja2Vyc2AsXG4gICAgICBtZXRob2Q6ICdHRVQnXG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBkcmF3ZG93biB0cmFja2VyIGJ5IGFjY291bnQgYW5kIG5hbWVcbiAgICogQHBhcmFtIHtzdHJpbmd9IGFjY291bnRJZCBpZCBvZiB0aGUgTWV0YUFwaSBhY2NvdW50XG4gICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIHRyYWNrZXIgbmFtZVxuICAgKiBAcmV0dXJuIHtQcm9taXNlPERyYXdkb3duVHJhY2tlcj59IHByb21pc2UgcmVzb2x2aW5nIHdpdGggZHJhd2Rvd24gdHJhY2tlciBmb3VuZFxuICAgKi9cbiAgZ2V0RHJhd2Rvd25UcmFja2VyQnlOYW1lKGFjY291bnRJZCwgbmFtZSkge1xuICAgIHJldHVybiB0aGlzLl9kb21haW5DbGllbnQucmVxdWVzdEFwaSh7XG4gICAgICB1cmw6IGAvdXNlcnMvY3VycmVudC9hY2NvdW50cy8ke2FjY291bnRJZH0vZHJhd2Rvd24tdHJhY2tlcnMvbmFtZS8ke2VuY29kZVVSSUNvbXBvbmVudChuYW1lKX1gLFxuICAgICAgbWV0aG9kOiAnR0VUJ1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFVwZGF0ZXMgZHJhd2Rvd24gdHJhY2tlclxuICAgKiBAcGFyYW0ge1N0cmluZ30gYWNjb3VudElkIGlkIG9mIHRoZSBNZXRhQXBpIGFjY291bnRcbiAgICogQHBhcmFtIHtTdHJpbmd9IGlkIGlkIG9mIHRoZSBkcmF3ZG93biB0cmFja2VyXG4gICAqIEBwYXJhbSB7RHJhd2Rvd25UcmFja2VyVXBkYXRlfSB1cGRhdGUgZHJhd2Rvd24gdHJhY2tlciB1cGRhdGVcbiAgICogQHJldHVybiB7UHJvbWlzZX0gcHJvbWlzZSByZXNvbHZpbmcgd2hlbiBkcmF3ZG93biB0cmFja2VyIHVwZGF0ZWRcbiAgICovXG4gIHVwZGF0ZURyYXdkb3duVHJhY2tlcihhY2NvdW50SWQsIGlkLCB1cGRhdGUpIHtcbiAgICByZXR1cm4gdGhpcy5fZG9tYWluQ2xpZW50LnJlcXVlc3RBcGkoe1xuICAgICAgdXJsOiBgL3VzZXJzL2N1cnJlbnQvYWNjb3VudHMvJHthY2NvdW50SWR9L2RyYXdkb3duLXRyYWNrZXJzLyR7aWR9YCxcbiAgICAgIG1ldGhvZDogJ1BVVCcsXG4gICAgICBib2R5OiB1cGRhdGVcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmVzIGRyYXdkb3duIHRyYWNrZXJcbiAgICogQHBhcmFtIHtTdHJpbmd9IGFjY291bnRJZCBpZCBvZiB0aGUgTWV0YUFwaSBhY2NvdW50XG4gICAqIEBwYXJhbSB7U3RyaW5nfSBpZCBpZCBvZiB0aGUgZHJhd2Rvd24gdHJhY2tlclxuICAgKiBAcmV0dXJuIHtQcm9taXNlfSBwcm9taXNlIHJlc29sdmluZyB3aGVuIGRyYXdkb3duIHRyYWNrZXIgcmVtb3ZlZFxuICAgKi9cbiAgZGVsZXRlRHJhd2Rvd25UcmFja2VyKGFjY291bnRJZCwgaWQpIHtcbiAgICByZXR1cm4gdGhpcy5fZG9tYWluQ2xpZW50LnJlcXVlc3RBcGkoe1xuICAgICAgdXJsOiBgL3VzZXJzL2N1cnJlbnQvYWNjb3VudHMvJHthY2NvdW50SWR9L2RyYXdkb3duLXRyYWNrZXJzLyR7aWR9YCxcbiAgICAgIG1ldGhvZDogJ0RFTEVURSdcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEcmF3ZG93biB0aHJlc2hvbGQgZXhjZWVkZWQgZXZlbnQgbW9kZWxcbiAgICogQHR5cGVkZWYge09iamVjdH0gRHJhd2Rvd25FdmVudFxuICAgKiBAcHJvcGVydHkge051bWJlcn0gc2VxdWVuY2VOdW1iZXIgZXZlbnQgdW5pcXVlIHNlcXVlbmNlIG51bWJlclxuICAgKiBAcHJvcGVydHkge1N0cmluZ30gYWNjb3VudElkIE1ldGFBcGkgYWNjb3VudCBpZFxuICAgKiBAcHJvcGVydHkge1N0cmluZ30gdHJhY2tlcklkIGRyYXdkb3duIHRyYWNrZXIgaWRcbiAgICogQHByb3BlcnR5IHtTdHJpbmd9IHN0YXJ0QnJva2VyVGltZSBkcmF3ZG93biB0cmFja2luZyBwZXJpb2Qgc3RhcnQgdGltZSBpbiBicm9rZXIgdGltZXpvbmUsXG4gICAqIGluIFlZWVktTU0tREQgSEg6bW06c3MuU1NTIGZvcm1hdFxuICAgKiBAcHJvcGVydHkge1N0cmluZ30gW2VuZEJyb2tlclRpbWVdIGRyYXdkb3duIHRyYWNraW5nIHBlcmlvZCBlbmQgdGltZSBpbiBicm9rZXIgdGltZXpvbmUsXG4gICAqIGluIFlZWVktTU0tREQgSEg6bW06c3MuU1NTIGZvcm1hdFxuICAgKiBAcHJvcGVydHkge1BlcmlvZH0gcGVyaW9kIGRyYXdkb3duIHRyYWNraW5nIHBlcmlvZFxuICAgKiBAcHJvcGVydHkge1N0cmluZ30gYnJva2VyVGltZSBkcmF3ZG93biB0aHJlc2hvbGQgZXhjZWVkZWQgZXZlbnQgdGltZSBpbiBicm9rZXIgdGltZXpvbmUsXG4gICAqIGluIFlZWS1NTS1ERCBISDptbTpzcy5TU1MgZm9ybWF0XG4gICAqIEBwcm9wZXJ0eSB7TnVtYmVyfSBhYnNvbHV0ZURyYXdkb3duIGFic29sdXRlIGRyYXdkb3duIHZhbHVlIHdoaWNoIHdhcyBvYnNlcnZlZCB3aGVuIHRoZSBkcmF3ZG93biB0aHJlc2hvbGQgd2FzXG4gICAqIGV4Y2VlZGVkXG4gICAqIEBwcm9wZXJ0eSB7TnVtYmVyfSByZWxhdGl2ZURyYXdkb3duIHJlbGF0aXZlIGRyYXdkb3duIHZhbHVlIHdoaWNoIHdhcyBvYnNlcnZlZCB3aGVuIHRoZSBkcmF3ZG93biB0aHJlc2hvbGQgd2FzXG4gICAqIGV4Y2VlZGVkXG4gICAqL1xuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGRyYXdkb3duIGV2ZW50cyBieSBicm9rZXIgdGltZSByYW5nZVxuICAgKiBAcGFyYW0ge1N0cmluZ30gW3N0YXJ0QnJva2VyVGltZV0gdmFsdWUgb2YgdGhlIGV2ZW50IHRpbWUgaW4gYnJva2VyIHRpbWV6b25lIHRvIHN0YXJ0IGxvYWRpbmcgZGF0YSBmcm9tLCBpbmNsdXNpdmUsXG4gICAqIGluICdZWVlZLU1NLUREIEhIOm1tOnNzLlNTUyBmb3JtYXRcbiAgICogQHBhcmFtIHtTdHJpbmd9IFtlbmRCcm9rZXJUaW1lXSB2YWx1ZSBvZiB0aGUgZXZlbnQgdGltZSBpbiBicm9rZXIgdGltZXpvbmUgdG8gZW5kIGxvYWRpbmcgZGF0YSBhdCwgaW5jbHVzaXZlLFxuICAgKiBpbiAnWVlZWS1NTS1ERCBISDptbTpzcy5TU1MgZm9ybWF0XG4gICAqIEBwYXJhbSB7U3RyaW5nfSBbYWNjb3VudElkXSBpZCBvZiB0aGUgTWV0YUFwaSBhY2NvdW50XG4gICAqIEBwYXJhbSB7U3RyaW5nfSBbdHJhY2tlcklkXSBpZCBvZiB0aGUgZHJhd2Rvd24gdHJhY2tlclxuICAgKiBAcGFyYW0ge051bWJlcn0gW2xpbWl0XSBwYWdpbmF0aW9uIGxpbWl0LCBkZWZhdWx0IGlzIDEwMDBcbiAgICogQHJldHVybiB7UHJvbWlzZTxEcmF3ZG93bkV2ZW50W10+fSBwcm9taXNlIHJlc29sdmluZyB3aXRoIGRyYXdkb3duIGV2ZW50c1xuICAgKi9cbiAgZ2V0RHJhd2Rvd25FdmVudHMoc3RhcnRCcm9rZXJUaW1lLCBlbmRCcm9rZXJUaW1lLCBhY2NvdW50SWQsIHRyYWNrZXJJZCwgbGltaXQpIHtcbiAgICByZXR1cm4gdGhpcy5fZG9tYWluQ2xpZW50LnJlcXVlc3RBcGkoe1xuICAgICAgdXJsOiAnL3VzZXJzL2N1cnJlbnQvZHJhd2Rvd24tZXZlbnRzL2J5LWJyb2tlci10aW1lJyxcbiAgICAgIHFzOiB7c3RhcnRCcm9rZXJUaW1lLCBlbmRCcm9rZXJUaW1lLCBhY2NvdW50SWQsIHRyYWNrZXJJZCwgbGltaXR9LFxuICAgICAgbWV0aG9kOiAnR0VUJ1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZHMgYSBkcmF3ZG93biBsaXN0ZW5lciBhbmQgY3JlYXRlcyBhIGpvYiB0byBtYWtlIHJlcXVlc3RzXG4gICAqIEBwYXJhbSB7RHJhd2Rvd25MaXN0ZW5lcn0gbGlzdGVuZXIgZHJhd2Rvd24gbGlzdGVuZXJcbiAgICogQHBhcmFtIHtTdHJpbmd9IFthY2NvdW50SWRdIGFjY291bnQgaWRcbiAgICogQHBhcmFtIHtTdHJpbmd9IFt0cmFja2VySWRdIHRyYWNrZXIgaWRcbiAgICogQHBhcmFtIHtOdW1iZXJ9IFtzZXF1ZW5jZU51bWJlcl0gc2VxdWVuY2UgbnVtYmVyXG4gICAqIEByZXR1cm4ge1N0cmluZ30gbGlzdGVuZXIgaWRcbiAgICovXG4gIGFkZERyYXdkb3duTGlzdGVuZXIobGlzdGVuZXIsIGFjY291bnRJZCwgdHJhY2tlcklkLCBzZXF1ZW5jZU51bWJlcikge1xuICAgIHJldHVybiB0aGlzLl9kcmF3ZG93bkxpc3RlbmVyTWFuYWdlci5hZGREcmF3ZG93bkxpc3RlbmVyKGxpc3RlbmVyLCBhY2NvdW50SWQsIHRyYWNrZXJJZCwgc2VxdWVuY2VOdW1iZXIpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbW92ZXMgZHJhd2Rvd24gbGlzdGVuZXIgYW5kIGNhbmNlbHMgdGhlIGV2ZW50IHN0cmVhbVxuICAgKiBAcGFyYW0ge1N0cmluZ30gbGlzdGVuZXJJZCBkcmF3ZG93biBsaXN0ZW5lciBpZFxuICAgKi9cbiAgcmVtb3ZlRHJhd2Rvd25MaXN0ZW5lcihsaXN0ZW5lcklkKSB7XG4gICAgdGhpcy5fZHJhd2Rvd25MaXN0ZW5lck1hbmFnZXIucmVtb3ZlRHJhd2Rvd25MaXN0ZW5lcihsaXN0ZW5lcklkKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEcmF3ZG93biBwZXJpb2Qgc3RhdGlzdGljc1xuICAgKiBAdHlwZWRlZiB7T2JqZWN0fSBEcmF3ZG93blBlcmlvZFN0YXRpc3RpY3NcbiAgICogQHByb3BlcnR5IHtTdHJpbmd9IHN0YXJ0QnJva2VyVGltZSBwZXJpb2Qgc3RhcnQgdGltZSBpbiBicm9rZXIgdGltZXpvbmUsIGluIFlZWVktTU0tREQgSEg6bW06c3MgZm9ybWF0XG4gICAqIEBwcm9wZXJ0eSB7U3RyaW5nfSBbZW5kQnJva2VyVGltZV0gcGVyaW9kIGVuZCB0aW1lIGluIGJyb2tlciB0aW1lem9uZSwgaW4gWVlZWS1NTS1ERCBISDptbTpzcyBmb3JtYXRcbiAgICogQHByb3BlcnR5IHtQZXJpb2R9IHBlcmlvZCBwZXJpb2QgbGVuZ3RoXG4gICAqIEBwcm9wZXJ0eSB7TnVtYmVyfSBpbml0aWFsQmFsYW5jZSBiYWxhbmNlIGF0IHBlcmlvZCBzdGFydCB0aW1lXG4gICAqIEBwcm9wZXJ0eSB7U3RyaW5nfSBbbWF4RHJhd2Rvd25UaW1lXSB0aW1lIG1heCBkcmF3ZG93biB3YXMgb2JzZXJ2ZWQgYXQgaW4gYnJva2VyIHRpbWV6b25lLFxuICAgKiBpbiBZWVlZLU1NLUREIEhIOm1tOnNzIGZvcm1hdFxuICAgKiBAcHJvcGVydHkge051bWJlcn0gW21heEFic29sdXRlRHJhd2Rvd25dIHRoZSB2YWx1ZSBvZiBtYXhpbXVtIGFic29sdXRlIGRyYXdkb3duIG9ic2VydmVkXG4gICAqIEBwcm9wZXJ0eSB7TnVtYmVyfSBbbWF4UmVsYXRpdmVEcmF3ZG93bl0gdGhlIHZhbHVlIG9mIG1heGltdW0gcmVsYXRpdmUgZHJhd2Rvd24gb2JzZXJ2ZWRcbiAgICogQHByb3BlcnR5IHtCb29sZWFufSB0aHJlc2hvbGRFeGNlZWRlZCB0aGUgZmxhZyBpbmRpY2F0aW5nIHRoYXQgbWF4IGFsbG93ZWQgdG90YWwgZHJhd2Rvd24gd2FzIGV4Y2VlZGVkXG4gICAqL1xuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGFjY291bnQgZHJhd2Rvd24gdHJhY2tpbmcgc3RhdHMgYnkgZHJhd2Rvd24gdHJhY2tlciBpZFxuICAgKiBAcGFyYW0ge1N0cmluZ30gYWNjb3VudElkIGlkIG9mIE1ldGFBUEkgYWNjb3VudFxuICAgKiBAcGFyYW0ge1N0cmluZ30gdHJhY2tlcklkIGlkIG9mIGRyYXdkb3duIHRyYWNrZXJcbiAgICogQHBhcmFtIHtTdHJpbmd9IFtzdGFydFRpbWVdIHRpbWUgdG8gc3RhcnQgbG9hZGluZyBzdGF0cyBmcm9tLCBkZWZhdWx0IGlzIGN1cnJlbnQgdGltZS4gTm90ZSB0aGF0IHN0YXRzIGlzIGxvYWRlZCBpblxuICAgKiBiYWNrd2FyZHMgZGlyZWN0aW9uXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBbbGltaXRdIG51bWJlciBvZiByZWNvcmRzIHRvIGxvYWQsIGRlZmF1bHQgaXMgMVxuICAgKiBAcmV0dXJuIHtQcm9taXNlPERyYXdkb3duUGVyaW9kU3RhdGlzdGljc1tdPn0gcHJvbWlzZSByZXNvbHZpbmcgd2l0aCBkcmF3ZG93biBzdGF0aXN0aWNzXG4gICAqL1xuICBnZXREcmF3ZG93blN0YXRpc3RpY3MoYWNjb3VudElkLCB0cmFja2VySWQsIHN0YXJ0VGltZSwgbGltaXQpIHtcbiAgICByZXR1cm4gdGhpcy5fZG9tYWluQ2xpZW50LnJlcXVlc3RBcGkoe1xuICAgICAgdXJsOiBgL3VzZXJzL2N1cnJlbnQvYWNjb3VudHMvJHthY2NvdW50SWR9L2RyYXdkb3duLXRyYWNrZXJzLyR7dHJhY2tlcklkfS9zdGF0aXN0aWNzYCxcbiAgICAgIHFzOiB7c3RhcnRUaW1lLCBsaW1pdH0sXG4gICAgICBtZXRob2Q6ICdHRVQnXG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogRXF1aXR5IGNoYXJ0IGl0ZW1cbiAgICogQHR5cGVkZWYge09iamVjdH0gRXF1aXR5Q2hhcnRJdGVtXG4gICAqIEBwcm9wZXJ0eSB7U3RyaW5nfSBzdGFydEJyb2tlclRpbWUgc3RhcnQgdGltZSBvZiBhIGNoYXJ0IGl0ZW0gYXMgcGVyIGJyb2tlciB0aW1lem9uZSwgaW4gWVlZWS1NTS1ERCBISDptbTpzcyBmb3JtYXRcbiAgICogQHByb3BlcnR5IHtTdHJpbmd9IGVuZEJyb2tlclRpbWUgZW5kIHRpbWUgb2YgYSBjaGFydCBpdGVtIGFzIHBlciBicm9rZXIgdGltZXpvbmUsIGluIFlZWVktTU0tREQgSEg6bW06c3MgZm9ybWF0XG4gICAqIEBwcm9wZXJ0eSB7TnVtYmVyfSBhdmVyYWdlQmFsYW5jZSBhdmVyYWdlIGJhbGFuY2UgdmFsdWUgZHVyaW5nIHRoZSBwZXJpb2RcbiAgICogQHByb3BlcnR5IHtOdW1iZXJ9IG1pbkJhbGFuY2UgbWluaW11bSBiYWxhbmNlIHZhbHVlIGR1cmluZyB0aGUgcGVyaW9kXG4gICAqIEBwcm9wZXJ0eSB7TnVtYmVyfSBtYXhCYWxhbmNlIG1heGltdW0gYmFsYW5jZSB2YWx1ZSBkdXJpbmcgdGhlIHBlcmlvZFxuICAgKiBAcHJvcGVydHkge051bWJlcn0gYXZlcmFnZUVxdWl0eSBhdmVyYWdlIGVxdWl0eSB2YWx1ZSBkdXJpbmcgdGhlIHBlcmlvZFxuICAgKiBAcHJvcGVydHkge051bWJlcn0gbWluRXF1aXR5IG1pbmltdW0gZXF1aXR5IHZhbHVlIGR1cmluZyB0aGUgcGVyaW9kXG4gICAqIEBwcm9wZXJ0eSB7TnVtYmVyfSBtYXhFcXVpdHkgbWF4aW11bSBlcXVpdHkgdmFsdWUgZHVyaW5nIHRoZSBwZXJpb2RcbiAgICovXG5cbiAgLyoqXG4gICAqIFJldHVybnMgZXF1aXR5IGNoYXJ0IGJ5IGFjY291bnQgaWRcbiAgICogQHBhcmFtIHtTdHJpbmd9IGFjY291bnRJZCBtZXRhQXBpIGFjY291bnQgaWRcbiAgICogQHBhcmFtIHtTdHJpbmd9IFtzdGFydFRpbWVdIHN0YXJ0aW5nIGJyb2tlciB0aW1lIGluIFlZWVktTU0tREQgSEg6bW06c3MgZm9ybWF0XG4gICAqIEBwYXJhbSB7U3RyaW5nfSBbZW5kVGltZV0gZW5kaW5nIGJyb2tlciB0aW1lIGluIFlZWVktTU0tREQgSEg6bW06c3MgZm9ybWF0XG4gICAqIEByZXR1cm4ge1Byb21pc2U8RXF1aXR5Q2hhcnRJdGVtW10+fSBwcm9taXNlIHJlc29sdmluZyB3aXRoIGVxdWl0eSBjaGFydFxuICAgKi9cbiAgZ2V0RXF1aXR5Q2hhcnQoYWNjb3VudElkLCBzdGFydFRpbWUsIGVuZFRpbWUpIHtcbiAgICByZXR1cm4gdGhpcy5fZG9tYWluQ2xpZW50LnJlcXVlc3RBcGkoe1xuICAgICAgdXJsOiBgL3VzZXJzL2N1cnJlbnQvYWNjb3VudHMvJHthY2NvdW50SWR9L2VxdWl0eS1jaGFydGAsXG4gICAgICBxczoge3N0YXJ0VGltZSwgZW5kVGltZX0sXG4gICAgICBtZXRob2Q6ICdHRVQnXG4gICAgfSk7XG4gIH1cbn1cbiJdfQ==