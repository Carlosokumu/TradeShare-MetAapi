'use strict';

var _should = require('should');

var _should2 = _interopRequireDefault(_should);

var _sinon = require('sinon');

var _sinon2 = _interopRequireDefault(_sinon);

var _domain = require('../domain.client');

var _domain2 = _interopRequireDefault(_domain);

var _httpClient = require('../httpClient');

var _httpClient2 = _interopRequireDefault(_httpClient);

var _configuration = require('./configuration.client');

var _configuration2 = _interopRequireDefault(_configuration);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/**
 * @test {ConfigurationClient}
 */
describe('ConfigurationClient', () => {

  let sandbox;
  let copyFactoryClient;
  const token = 'header.payload.sign';
  let httpClient = new _httpClient2.default();
  let domainClient;
  let requestStub;

  before(() => {
    sandbox = _sinon2.default.createSandbox();
  });

  beforeEach(() => {
    domainClient = new _domain2.default(httpClient, token);
    copyFactoryClient = new _configuration2.default(domainClient);
    requestStub = sandbox.stub(domainClient, 'requestCopyFactory');
  });

  afterEach(() => {
    sandbox.restore();
  });

  /**
   * @test {ConfigurationClient#generateAccountId}
   */
  it('should generate account id', async () => {
    copyFactoryClient.generateAccountId().length.should.equal(64);
  });

  /**
   * @test {ConfigurationClient#generateStrategyId}
   */
  it('should generate strategy id', async () => {
    let expected = {
      id: 'ABCD'
    };
    requestStub.resolves(expected);
    let id = await copyFactoryClient.generateStrategyId();
    id.should.equal(expected);
    _sinon2.default.assert.calledOnceWithExactly(domainClient.requestCopyFactory, {
      url: '/users/current/configuration/unused-strategy-id',
      method: 'GET',
      headers: {
        'auth-token': token
      },
      json: true
    });
  });

  /**
   * @test {ConfigurationClient#generateStrategyId}
   */
  it('should not generate strategy id with account token', async () => {
    domainClient = new _domain2.default(httpClient, 'token');
    copyFactoryClient = new _configuration2.default(domainClient);
    try {
      await copyFactoryClient.generateStrategyId();
      throw new Error('MethodAccessError expected');
    } catch (error) {
      error.name.should.equal('MethodAccessError');
      error.message.should.equal('You can not invoke generateStrategyId method, because you have connected with account access token. ' + 'Please use API access token from https://app.metaapi.cloud/token page to invoke this method.');
    }
  });

  /**
   * @test {ConfigurationClient#getStrategies}
   */
  it('should retrieve strategies from API', async () => {
    let expected = [{
      _id: 'ABCD',
      platformCommissionRate: 0.01,
      name: 'Test strategy',
      accountId: 'e8867baa-5ec2-45ae-9930-4d5cea18d0d6',
      maxTradeRisk: 0.1,
      riskLimits: [{
        type: 'monthly',
        applyTo: 'balance',
        maxRelativeRisk: 0.5,
        closePositions: false,
        startTime: '2020-08-24T00:00:01.000Z'
      }],
      timeSettings: {
        lifetimeInHours: 192,
        openingIntervalInMinutes: 5
      }
    }];
    requestStub.resolves(expected);
    let strategies = await copyFactoryClient.getStrategies(true, 100, 200);
    strategies.should.equal(expected);
    _sinon2.default.assert.calledOnceWithExactly(domainClient.requestCopyFactory, {
      url: '/users/current/configuration/strategies',
      method: 'GET',
      headers: {
        'auth-token': token
      },
      qs: {
        includeRemoved: true,
        limit: 100,
        offset: 200
      },
      json: true
    }, true);
  });

  /**
     * @test {ConfigurationClient#getStrategies}
     */
  it('should not retrieve strategies from API with account token', async () => {
    domainClient = new _domain2.default(httpClient, 'token');
    copyFactoryClient = new _configuration2.default(domainClient);
    try {
      await copyFactoryClient.getStrategies();
      throw new Error('MethodAccessError expected');
    } catch (error) {
      error.name.should.equal('MethodAccessError');
      error.message.should.equal('You can not invoke getStrategies method, because you have connected with account access token. ' + 'Please use API access token from https://app.metaapi.cloud/token page to invoke this method.');
    }
  });

  /**
   * @test {ConfigurationClient#getStrategy}
   */
  it('should retrieve strategy from API', async () => {
    let expected = {
      _id: 'ABCD',
      providerId: 'providerId',
      platformCommissionRate: 0.01,
      name: 'Test strategy',
      connectionId: 'e8867baa-5ec2-45ae-9930-4d5cea18d0d6',
      maxTradeRisk: 0.1,
      timeSettings: {
        lifetimeInHours: 192,
        openingIntervalInMinutes: 5
      }
    };
    requestStub.resolves(expected);
    let strategies = await copyFactoryClient.getStrategy('ABCD');
    strategies.should.equal(expected);
    _sinon2.default.assert.calledOnceWithExactly(domainClient.requestCopyFactory, {
      url: '/users/current/configuration/strategies/ABCD',
      method: 'GET',
      headers: {
        'auth-token': token
      },
      json: true
    });
  });

  /**
     * @test {ConfigurationClient#getStrategy}
     */
  it('should not retrieve strategy from API with account token', async () => {
    domainClient = new _domain2.default(httpClient, 'token');
    copyFactoryClient = new _configuration2.default(domainClient);
    try {
      await copyFactoryClient.getStrategy('ABCD');
      throw new Error('MethodAccessError expected');
    } catch (error) {
      error.name.should.equal('MethodAccessError');
      error.message.should.equal('You can not invoke getStrategy method, because you have connected with account access token. ' + 'Please use API access token from https://app.metaapi.cloud/token page to invoke this method.');
    }
  });

  /**
   * @test {ConfigurationClient#updateStrategy}
   */
  it('should update strategy via API', async () => {
    const strategy = {
      name: 'Test strategy',
      accountId: 'e8867baa-5ec2-45ae-9930-4d5cea18d0d6',
      maxTradeRisk: 0.1,
      riskLimits: [{
        type: 'monthly',
        applyTo: 'balance',
        maxRelativeRisk: 0.5,
        closePositions: false,
        startTime: '2020-08-24T00:00:01.000Z'
      }],
      timeSettings: {
        lifetimeInHours: 192,
        openingIntervalInMinutes: 5
      }
    };
    await copyFactoryClient.updateStrategy('ABCD', strategy);
    _sinon2.default.assert.calledOnceWithExactly(domainClient.requestCopyFactory, {
      url: '/users/current/configuration/strategies/ABCD',
      method: 'PUT',
      headers: {
        'auth-token': token
      },
      json: true,
      body: strategy });
  });

  /**
   * @test {ConfigurationClient#updateStrategy}
   */
  it('should not update strategy via API with account token', async () => {
    domainClient = new _domain2.default(httpClient, 'token');
    copyFactoryClient = new _configuration2.default(domainClient);
    try {
      await copyFactoryClient.updateStrategy('ABCD', {});
      throw new Error('MethodAccessError expected');
    } catch (error) {
      error.name.should.equal('MethodAccessError');
      error.message.should.equal('You can not invoke updateStrategy method, because you have connected with account access token. ' + 'Please use API access token from https://app.metaapi.cloud/token page to invoke this method.');
    }
  });

  /**
   * @test {ConfigurationClient#removeStrategy}
   */
  it('should remove strategy via API', async () => {
    const payload = { mode: 'preserve', removeAfter: '2020-08-24T00:00:00.000Z' };
    await copyFactoryClient.removeStrategy('ABCD', payload);
    _sinon2.default.assert.calledOnceWithExactly(domainClient.requestCopyFactory, {
      url: '/users/current/configuration/strategies/ABCD',
      method: 'DELETE',
      headers: {
        'auth-token': token
      },
      body: payload,
      json: true
    });
  });

  /**
   * @test {ConfigurationClient#removeStrategy}
   */
  it('should not remove strategy from via with account token', async () => {
    domainClient = new _domain2.default(httpClient, 'token');
    copyFactoryClient = new _configuration2.default(domainClient);
    try {
      await copyFactoryClient.removeStrategy('ABCD');
      throw new Error('MethodAccessError expected');
    } catch (error) {
      error.name.should.equal('MethodAccessError');
      error.message.should.equal('You can not invoke removeStrategy method, because you have connected with account access token. ' + 'Please use API access token from https://app.metaapi.cloud/token page to invoke this method.');
    }
  });

  /**
   * @test {ConfigurationClient#getPortfolioStrategies}
   */
  it('should retrieve portfolio strategies from API', async () => {
    let expected = [{
      _id: 'ABCD',
      providerId: 'providerId',
      platformCommissionRate: 0.01,
      name: 'Test strategy',
      members: [{
        strategyId: 'BCDE'
      }],
      maxTradeRisk: 0.1
    }];
    requestStub.resolves(expected);
    let strategies = await copyFactoryClient.getPortfolioStrategies(true, 100, 200);
    strategies.should.equal(expected);
    _sinon2.default.assert.calledOnceWithExactly(domainClient.requestCopyFactory, {
      url: '/users/current/configuration/portfolio-strategies',
      method: 'GET',
      headers: {
        'auth-token': token
      },
      qs: {
        includeRemoved: true,
        limit: 100,
        offset: 200
      },
      json: true
    }, true);
  });

  /**
   * @test {ConfigurationClient#getPortfolioStrategies}
   */
  it('should not retrieve portfolio strategies from API with account token', async () => {
    domainClient = new _domain2.default(httpClient, 'token');
    copyFactoryClient = new _configuration2.default(domainClient);
    try {
      await copyFactoryClient.getPortfolioStrategies();
      throw new Error('MethodAccessError expected');
    } catch (error) {
      error.name.should.equal('MethodAccessError');
      error.message.should.equal('You can not invoke getPortfolioStrategies method, because you have connected with account access token. ' + 'Please use API access token from https://app.metaapi.cloud/token page to invoke this method.');
    }
  });

  /**
   * @test {ConfigurationClient#getPortfolioStrategy}
   */
  it('should retrieve portfolio strategy from API', async () => {
    let expected = {
      _id: 'ABCD',
      providerId: 'providerId',
      platformCommissionRate: 0.01,
      name: 'Test strategy',
      members: [{
        strategyId: 'BCDE'
      }],
      maxTradeRisk: 0.1
    };
    requestStub.resolves(expected);
    let strategies = await copyFactoryClient.getPortfolioStrategy('ABCD');
    strategies.should.equal(expected);
    _sinon2.default.assert.calledOnceWithExactly(domainClient.requestCopyFactory, {
      url: '/users/current/configuration/portfolio-strategies/ABCD',
      method: 'GET',
      headers: {
        'auth-token': token
      },
      json: true
    });
  });

  /**
   * @test {ConfigurationClient#getPortfolioStrategy}
   */
  it('should not retrieve portfolio strategy from API with account token', async () => {
    domainClient = new _domain2.default(httpClient, 'token');
    copyFactoryClient = new _configuration2.default(domainClient);
    try {
      await copyFactoryClient.getPortfolioStrategy('ABCD');
      throw new Error('MethodAccessError expected');
    } catch (error) {
      error.name.should.equal('MethodAccessError');
      error.message.should.equal('You can not invoke getPortfolioStrategy method, because you have connected with account access token. ' + 'Please use API access token from https://app.metaapi.cloud/token page to invoke this method.');
    }
  });

  /**
   * @test {ConfigurationClient#updatePortfolioStrategy}
   */
  it('should update portfolio strategy via API', async () => {
    const strategy = {
      name: 'Test strategy',
      members: [{
        strategyId: 'BCDE'
      }],
      maxTradeRisk: 0.1
    };
    await copyFactoryClient.updatePortfolioStrategy('ABCD', strategy);
    _sinon2.default.assert.calledOnceWithExactly(domainClient.requestCopyFactory, {
      url: '/users/current/configuration/portfolio-strategies/ABCD',
      method: 'PUT',
      headers: {
        'auth-token': token
      },
      json: true,
      body: strategy
    });
  });

  /**
   * @test {ConfigurationClient#updatePortfolioStrategy}
   */
  it('should not update portfolio strategy via API with account token', async () => {
    domainClient = new _domain2.default(httpClient, 'token');
    copyFactoryClient = new _configuration2.default(domainClient);
    try {
      await copyFactoryClient.updatePortfolioStrategy('ABCD', {});
      throw new Error('MethodAccessError expected');
    } catch (error) {
      error.name.should.equal('MethodAccessError');
      error.message.should.equal('You can not invoke updatePortfolioStrategy method, because you have connected with account access token. ' + 'Please use API access token from https://app.metaapi.cloud/token page to invoke this method.');
    }
  });

  /**
   * @test {ConfigurationClient#removePortfolioStrategy}
   */
  it('should remove portfolio strategy via API', async () => {
    const payload = { mode: 'preserve', removeAfter: '2020-08-24T00:00:00.000Z' };
    await copyFactoryClient.removePortfolioStrategy('ABCD', payload);
    _sinon2.default.assert.calledOnceWithExactly(domainClient.requestCopyFactory, {
      url: '/users/current/configuration/portfolio-strategies/ABCD',
      method: 'DELETE',
      headers: {
        'auth-token': token
      },
      body: payload,
      json: true
    });
  });

  /**
   * @test {ConfigurationClient#removePortfolioStrategy}
   */
  it('should not remove portfolio strategy from via with account token', async () => {
    domainClient = new _domain2.default(httpClient, 'token');
    copyFactoryClient = new _configuration2.default(domainClient);
    try {
      await copyFactoryClient.removePortfolioStrategy('ABCD');
      throw new Error('MethodAccessError expected');
    } catch (error) {
      error.name.should.equal('MethodAccessError');
      error.message.should.equal('You can not invoke removePortfolioStrategy method, because you have connected with account access token. ' + 'Please use API access token from https://app.metaapi.cloud/token page to invoke this method.');
    }
  });

  /**
   * @test {ConfigurationClient#removePortfolioStrategyMember}
   */
  it('should remove portfolio strategy member via API', async () => {
    const payload = { mode: 'preserve', removeAfter: '2020-08-24T00:00:00.000Z' };
    await copyFactoryClient.removePortfolioStrategyMember('ABCD', 'BCDE', payload);
    _sinon2.default.assert.calledOnceWithExactly(domainClient.requestCopyFactory, {
      url: '/users/current/configuration/portfolio-strategies/ABCD/members/BCDE',
      method: 'DELETE',
      headers: {
        'auth-token': token
      },
      body: payload,
      json: true
    });
  });

  /**
     * @test {ConfigurationClient#removePortfolioStrategyMember}
     */
  it('should not remove portfolio strategy member from via with account token', async () => {
    domainClient = new _domain2.default(httpClient, 'token');
    copyFactoryClient = new _configuration2.default(domainClient);
    try {
      await copyFactoryClient.removePortfolioStrategyMember('ABCD', 'BCDE');
      throw new Error('MethodAccessError expected');
    } catch (error) {
      error.name.should.equal('MethodAccessError');
      error.message.should.equal('You can not invoke removePortfolioStrategyMember method, because you have connected with account access ' + 'token. Please use API access token from https://app.metaapi.cloud/token page to invoke this method.');
    }
  });

  /**
   * @test {TradingClient#getSubscribers}
   */
  it('should retrieve CopyFactory subscribers from API', async () => {
    let expected = [{
      _id: 'e8867baa-5ec2-45ae-9930-4d5cea18d0d6',
      name: 'Demo account',
      reservedMarginFraction: 0.25,
      subscriptions: [{
        strategyId: 'ABCD',
        multiplier: 1
      }]
    }];
    requestStub.resolves(expected);
    let accounts = await copyFactoryClient.getSubscribers(true, 100, 200);
    accounts.should.equal(expected);
    _sinon2.default.assert.calledOnceWithExactly(domainClient.requestCopyFactory, {
      url: '/users/current/configuration/subscribers',
      method: 'GET',
      headers: {
        'auth-token': token
      },
      qs: {
        includeRemoved: true,
        limit: 100,
        offset: 200
      },
      json: true
    }, true);
  });

  /**
     * @test {TradingClient#getSubscribers}
     */
  it('should not retrieve subscribers from API with account token', async () => {
    domainClient = new _domain2.default(httpClient, 'token');
    copyFactoryClient = new _configuration2.default(domainClient);
    try {
      await copyFactoryClient.getSubscribers();
      throw new Error('MethodAccessError expected');
    } catch (error) {
      error.name.should.equal('MethodAccessError');
      error.message.should.equal('You can not invoke getSubscribers method, because you have connected with account access token. ' + 'Please use API access token from https://app.metaapi.cloud/token page to invoke this method.');
    }
  });

  /**
   * @test {TradingClient#getSubscriber}
   */
  it('should retrieve CopyFactory subscriber from API', async () => {
    let expected = {
      _id: 'e8867baa-5ec2-45ae-9930-4d5cea18d0d6',
      name: 'Demo account',
      reservedMarginFraction: 0.25,
      subscriptions: [{
        strategyId: 'ABCD',
        multiplier: 1
      }]
    };
    requestStub.resolves(expected);
    let accounts = await copyFactoryClient.getSubscriber('e8867baa-5ec2-45ae-9930-4d5cea18d0d6');
    accounts.should.equal(expected);
    _sinon2.default.assert.calledOnceWithExactly(domainClient.requestCopyFactory, {
      url: '/users/current/configuration/subscribers/' + 'e8867baa-5ec2-45ae-9930-4d5cea18d0d6',
      method: 'GET',
      headers: {
        'auth-token': token
      },
      json: true
    });
  });

  /**
   * @test {TradingClient#getSubscriber}
   */
  it('should not retrieve CopyFactory subscriber from API with account token', async () => {
    domainClient = new _domain2.default(httpClient, 'token');
    copyFactoryClient = new _configuration2.default(domainClient);
    try {
      await copyFactoryClient.getSubscriber('test');
      throw new Error('MethodAccessError expected');
    } catch (error) {
      error.name.should.equal('MethodAccessError');
      error.message.should.equal('You can not invoke getSubscriber method, because you have connected with account access token. ' + 'Please use API access token from https://app.metaapi.cloud/token page to invoke this method.');
    }
  });

  /**
   * @test {TradingClient#updateSubscriber}
   */
  it('should update CopyFactory subscriber via API', async () => {
    let subscriber = {
      name: 'Demo account',
      reservedMarginFraction: 0.25,
      subscriptions: [{
        strategyId: 'ABCD',
        multiplier: 1
      }]
    };
    await copyFactoryClient.updateSubscriber('e8867baa-5ec2-45ae-9930-4d5cea18d0d6', subscriber);
    _sinon2.default.assert.calledOnceWithExactly(domainClient.requestCopyFactory, {
      url: '/users/current/configuration/subscribers/' + 'e8867baa-5ec2-45ae-9930-4d5cea18d0d6',
      method: 'PUT',
      headers: {
        'auth-token': token
      },
      body: subscriber,
      json: true
    });
  });

  /**
   * @test {TradingClient#updateSubscriber}
   */
  it('should not update CopyFactory subscriber via API with account token', async () => {
    domainClient = new _domain2.default(httpClient, 'token');
    copyFactoryClient = new _configuration2.default(domainClient);
    try {
      await copyFactoryClient.updateSubscriber('test', {});
      throw new Error('MethodAccessError expected');
    } catch (error) {
      error.name.should.equal('MethodAccessError');
      error.message.should.equal('You can not invoke updateSubscriber method, because you have connected with account access token. ' + 'Please use API access token from https://app.metaapi.cloud/token page to invoke this method.');
    }
  });

  /**
   * @test {TradingClient#removeSubscriber}
   */
  it('should remove CopyFactory subscriber via API', async () => {
    const payload = { mode: 'preserve', removeAfter: '2020-08-24T00:00:00.000Z' };
    await copyFactoryClient.removeSubscriber('e8867baa-5ec2-45ae-9930-4d5cea18d0d6', payload);
    _sinon2.default.assert.calledOnceWithExactly(domainClient.requestCopyFactory, {
      url: '/users/current/configuration/subscribers/' + 'e8867baa-5ec2-45ae-9930-4d5cea18d0d6',
      method: 'DELETE',
      headers: {
        'auth-token': token
      },
      body: payload,
      json: true
    });
  });

  /**
   * @test {TradingClient#removeSubscriber}
   */
  it('should not remove CopyFactory subscriber via API with account token', async () => {
    domainClient = new _domain2.default(httpClient, 'token');
    copyFactoryClient = new _configuration2.default(domainClient);
    try {
      await copyFactoryClient.removeSubscriber('test');
      throw new Error('MethodAccessError expected');
    } catch (error) {
      error.name.should.equal('MethodAccessError');
      error.message.should.equal('You can not invoke removeSubscriber method, because you have connected with account access token. ' + 'Please use API access token from https://app.metaapi.cloud/token page to invoke this method.');
    }
  });

  /**
   * @test {TradingClient#removeSubscription}
   */
  it('should remove CopyFactory subscription via API', async () => {
    const payload = { mode: 'preserve', removeAfter: '2020-08-24T00:00:00.000Z' };
    await copyFactoryClient.removeSubscription('e8867baa-5ec2-45ae-9930-4d5cea18d0d6', 'ABCD', payload);
    _sinon2.default.assert.calledOnceWithExactly(domainClient.requestCopyFactory, {
      url: '/users/current/configuration/subscribers/' + 'e8867baa-5ec2-45ae-9930-4d5cea18d0d6/subscriptions/ABCD',
      method: 'DELETE',
      headers: {
        'auth-token': token
      },
      body: payload,
      json: true
    });
  });

  /**
   * @test {TradingClient#removeSubscription}
   */
  it('should not remove CopyFactory subscription via API with account token', async () => {
    domainClient = new _domain2.default(httpClient, 'token');
    copyFactoryClient = new _configuration2.default(domainClient);
    try {
      await copyFactoryClient.removeSubscription('test', 'ABCD');
      throw new Error('MethodAccessError expected');
    } catch (error) {
      error.name.should.equal('MethodAccessError');
      error.message.should.equal('You can not invoke removeSubscription method, because you have connected with account access token. ' + 'Please use API access token from https://app.metaapi.cloud/token page to invoke this method.');
    }
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL2xpYi9jbGllbnRzL2NvcHlGYWN0b3J5L2NvbmZpZ3VyYXRpb24uY2xpZW50LnNwZWMuZXM2Il0sIm5hbWVzIjpbImRlc2NyaWJlIiwic2FuZGJveCIsImNvcHlGYWN0b3J5Q2xpZW50IiwidG9rZW4iLCJodHRwQ2xpZW50IiwiSHR0cENsaWVudCIsImRvbWFpbkNsaWVudCIsInJlcXVlc3RTdHViIiwiYmVmb3JlIiwic2lub24iLCJjcmVhdGVTYW5kYm94IiwiYmVmb3JlRWFjaCIsIkRvbWFpbkNsaWVudCIsIkNvbmZpZ3VyYXRpb25DbGllbnQiLCJzdHViIiwiYWZ0ZXJFYWNoIiwicmVzdG9yZSIsIml0IiwiZ2VuZXJhdGVBY2NvdW50SWQiLCJsZW5ndGgiLCJzaG91bGQiLCJlcXVhbCIsImV4cGVjdGVkIiwiaWQiLCJyZXNvbHZlcyIsImdlbmVyYXRlU3RyYXRlZ3lJZCIsImFzc2VydCIsImNhbGxlZE9uY2VXaXRoRXhhY3RseSIsInJlcXVlc3RDb3B5RmFjdG9yeSIsInVybCIsIm1ldGhvZCIsImhlYWRlcnMiLCJqc29uIiwiRXJyb3IiLCJlcnJvciIsIm5hbWUiLCJtZXNzYWdlIiwiX2lkIiwicGxhdGZvcm1Db21taXNzaW9uUmF0ZSIsImFjY291bnRJZCIsIm1heFRyYWRlUmlzayIsInJpc2tMaW1pdHMiLCJ0eXBlIiwiYXBwbHlUbyIsIm1heFJlbGF0aXZlUmlzayIsImNsb3NlUG9zaXRpb25zIiwic3RhcnRUaW1lIiwidGltZVNldHRpbmdzIiwibGlmZXRpbWVJbkhvdXJzIiwib3BlbmluZ0ludGVydmFsSW5NaW51dGVzIiwic3RyYXRlZ2llcyIsImdldFN0cmF0ZWdpZXMiLCJxcyIsImluY2x1ZGVSZW1vdmVkIiwibGltaXQiLCJvZmZzZXQiLCJwcm92aWRlcklkIiwiY29ubmVjdGlvbklkIiwiZ2V0U3RyYXRlZ3kiLCJzdHJhdGVneSIsInVwZGF0ZVN0cmF0ZWd5IiwiYm9keSIsInBheWxvYWQiLCJtb2RlIiwicmVtb3ZlQWZ0ZXIiLCJyZW1vdmVTdHJhdGVneSIsIm1lbWJlcnMiLCJzdHJhdGVneUlkIiwiZ2V0UG9ydGZvbGlvU3RyYXRlZ2llcyIsImdldFBvcnRmb2xpb1N0cmF0ZWd5IiwidXBkYXRlUG9ydGZvbGlvU3RyYXRlZ3kiLCJyZW1vdmVQb3J0Zm9saW9TdHJhdGVneSIsInJlbW92ZVBvcnRmb2xpb1N0cmF0ZWd5TWVtYmVyIiwicmVzZXJ2ZWRNYXJnaW5GcmFjdGlvbiIsInN1YnNjcmlwdGlvbnMiLCJtdWx0aXBsaWVyIiwiYWNjb3VudHMiLCJnZXRTdWJzY3JpYmVycyIsImdldFN1YnNjcmliZXIiLCJzdWJzY3JpYmVyIiwidXBkYXRlU3Vic2NyaWJlciIsInJlbW92ZVN1YnNjcmliZXIiLCJyZW1vdmVTdWJzY3JpcHRpb24iXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBOzs7O0FBQ0E7Ozs7QUFDQTs7OztBQUNBOzs7O0FBQ0E7Ozs7OztBQUVBOzs7QUFHQUEsU0FBUyxxQkFBVCxFQUFnQyxNQUFNOztBQUVwQyxNQUFJQyxPQUFKO0FBQ0EsTUFBSUMsaUJBQUo7QUFDQSxRQUFNQyxRQUFRLHFCQUFkO0FBQ0EsTUFBSUMsYUFBYSxJQUFJQyxvQkFBSixFQUFqQjtBQUNBLE1BQUlDLFlBQUo7QUFDQSxNQUFJQyxXQUFKOztBQUVBQyxTQUFPLE1BQU07QUFDWFAsY0FBVVEsZ0JBQU1DLGFBQU4sRUFBVjtBQUNELEdBRkQ7O0FBSUFDLGFBQVcsTUFBTTtBQUNmTCxtQkFBZSxJQUFJTSxnQkFBSixDQUFpQlIsVUFBakIsRUFBNkJELEtBQTdCLENBQWY7QUFDQUQsd0JBQW9CLElBQUlXLHVCQUFKLENBQXdCUCxZQUF4QixDQUFwQjtBQUNBQyxrQkFBY04sUUFBUWEsSUFBUixDQUFhUixZQUFiLEVBQTJCLG9CQUEzQixDQUFkO0FBQ0QsR0FKRDs7QUFNQVMsWUFBVSxNQUFNO0FBQ2RkLFlBQVFlLE9BQVI7QUFDRCxHQUZEOztBQUlBOzs7QUFHQUMsS0FBRyw0QkFBSCxFQUFpQyxZQUFZO0FBQzNDZixzQkFBa0JnQixpQkFB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QUFrQkMsS0FBbEIsQ0FBd0IsbUJBQXhCO0FBQ0FhLFlBQU1FLE9BQU4sQ0FBY2hCLE1BQWQsQ0FBcUJDLEtBQXJCLENBQ0UseUdBQ0UsOEZBRko7QUFJRDtBQUNGLEdBYkQ7QUFlRCxDQWhyQkQiLCJmaWxlIjoiY29uZmlndXJhdGlvbi5jbGllbnQuc3BlYy5qcyIsInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IHNob3VsZCBmcm9tICdzaG91bGQnO1xuaW1wb3J0IHNpbm9uIGZyb20gJ3Npbm9uJztcbmltcG9ydCBEb21haW5DbGllbnQgZnJvbSAnLi4vZG9tYWluLmNsaWVudCc7XG5pbXBvcnQgSHR0cENsaWVudCBmcm9tICcuLi9odHRwQ2xpZW50JztcbmltcG9ydCBDb25maWd1cmF0aW9uQ2xpZW50IGZyb20gJy4vY29uZmlndXJhdGlvbi5jbGllbnQnO1xuXG4vKipcbiAqIEB0ZXN0IHtDb25maWd1cmF0aW9uQ2xpZW50fVxuICovXG5kZXNjcmliZSgnQ29uZmlndXJhdGlvbkNsaWVudCcsICgpID0+IHtcblxuICBsZXQgc2FuZGJveDtcbiAgbGV0IGNvcHlGYWN0b3J5Q2xpZW50O1xuICBjb25zdCB0b2tlbiA9ICdoZWFkZXIucGF5bG9hZC5zaWduJztcbiAgbGV0IGh0dHBDbGllbnQgPSBuZXcgSHR0cENsaWVudCgpO1xuICBsZXQgZG9tYWluQ2xpZW50O1xuICBsZXQgcmVxdWVzdFN0dWI7XG5cbiAgYmVmb3JlKCgpID0+IHtcbiAgICBzYW5kYm94ID0gc2lub24uY3JlYXRlU2FuZGJveCgpO1xuICB9KTtcblxuICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICBkb21haW5DbGllbnQgPSBuZXcgRG9tYWluQ2xpZW50KGh0dHBDbGllbnQsIHRva2VuKTtcbiAgICBjb3B5RmFjdG9yeUNsaWVudCA9IG5ldyBDb25maWd1cmF0aW9uQ2xpZW50KGRvbWFpbkNsaWVudCk7XG4gICAgcmVxdWVzdFN0dWIgPSBzYW5kYm94LnN0dWIoZG9tYWluQ2xpZW50LCAncmVxdWVzdENvcHlGYWN0b3J5Jyk7XG4gIH0pO1xuXG4gIGFmdGVyRWFjaCgoKSA9PiB7XG4gICAgc2FuZGJveC5yZXN0b3JlKCk7XG4gIH0pO1xuXG4gIC8qKlxuICAgKiBAdGVzdCB7Q29uZmlndXJhdGlvbkNsaWVudCNnZW5lcmF0ZUFjY291bnRJZH1cbiAgICovXG4gIGl0KCdzaG91bGQgZ2VuZXJhdGUgYWNjb3VudCBpZCcsIGFzeW5jICgpID0+IHtcbiAgICBjb3B5RmFjdG9yeUNsaWVudC5nZW5lcmF0ZUFjY291bnRJZCgpLmxlbmd0aC5zaG91bGQuZXF1YWwoNjQpO1xuICB9KTtcblxuICAvKipcbiAgICogQHRlc3Qge0NvbmZpZ3VyYXRpb25DbGllbnQjZ2VuZXJhdGVTdHJhdGVneUlkfVxuICAgKi9cbiAgaXQoJ3Nob3VsZCBnZW5lcmF0ZSBzdHJhdGVneSBpZCcsIGFzeW5jICgpID0+IHtcbiAgICBsZXQgZXhwZWN0ZWQgPSB7XG4gICAgICBpZDogJ0FCQ0QnXG4gICAgfTtcbiAgICByZXF1ZXN0U3R1Yi5yZXNvbHZlcyhleHBlY3RlZCk7XG4gICAgbGV0IGlkID0gYXdhaXQgY29weUZhY3RvcnlDbGllbnQuZ2VuZXJhdGVTdHJhdGVneUlkKCk7XG4gICAgaWQuc2hvdWxkLmVxdWFsKGV4cGVjdGVkKTtcbiAgICBzaW5vbi5hc3NlcnQuY2FsbGVkT25jZVdpdGhFeGFjdGx5KGRvbWFpbkNsaWVudC5yZXF1ZXN0Q29weUZhY3RvcnksIHtcbiAgICAgIHVybDogJy91c2Vycy9jdXJyZW50L2NvbmZpZ3VyYXRpb24vdW51c2VkLXN0cmF0ZWd5LWlkJyxcbiAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgICdhdXRoLXRva2VuJzogdG9rZW5cbiAgICAgIH0sXG4gICAgICBqc29uOiB0cnVlLFxuICAgIH0pO1xuICB9KTtcblxuICAvKipcbiAgICogQHRlc3Qge0NvbmZpZ3VyYXRpb25DbGllbnQjZ2VuZXJhdGVTdHJhdGVneUlkfVxuICAgKi9cbiAgaXQoJ3Nob3VsZCBub3QgZ2VuZXJhdGUgc3RyYXRlZ3kgaWQgd2l0aCBhY2NvdW50IHRva2VuJywgYXN5bmMgKCkgPT4ge1xuICAgIGRvbWFpbkNsaWVudCA9IG5ldyBEb21haW5DbGllbnQoaHR0cENsaWVudCwgJ3Rva2VuJyk7XG4gICAgY29weUZhY3RvcnlDbGllbnQgPSBuZXcgQ29uZmlndXJhdGlvbkNsaWVudChkb21haW5DbGllbnQpO1xuICAgIHRyeSB7XG4gICAgICBhd2FpdCBjb3B5RmFjdG9yeUNsaWVudC5nZW5lcmF0ZVN0cmF0ZWd5SWQoKTtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWV0aG9kQWNjZXNzRXJyb3IgZXhwZWN0ZWQnKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgZXJyb3IubmFtZS5zaG91bGQuZXF1YWwoJ01ldGhvZEFjY2Vzc0Vycm9yJyk7XG4gICAgICBlcnJvci5tZXNzYWdlLnNob3VsZC5lcXVhbChcbiAgICAgICAgJ1lvdSBjYW4gbm90IGludm9rZSBnZW5lcmF0ZVN0cmF0ZWd5SWQgbWV0aG9kLCBiZWNhdXNlIHlvdSBoYXZlIGNvbm5lY3RlZCB3aXRoIGFjY291bnQgYWNjZXNzIHRva2VuLiAnICtcbiAgICAgICAgJ1BsZWFzZSB1c2UgQVBJIGFjY2VzcyB0b2tlbiBmcm9tIGh0dHBzOi8vYXBwLm1ldGFhcGkuY2xvdWQvdG9rZW4gcGFnZSB0byBpbnZva2UgdGhpcyBtZXRob2QuJ1xuICAgICAgKTtcbiAgICB9XG4gIH0pO1xuXG4gIC8qKlxuICAgKiBAdGVzdCB7Q29uZmlndXJhdGlvbkNsaWVudCNnZXRTdHJhdGVnaWVzfVxuICAgKi9cbiAgaXQoJ3Nob3VsZCByZXRyaWV2ZSBzdHJhdGVnaWVzIGZyb20gQVBJJywgYXN5bmMgKCkgPT4ge1xuICAgIGxldCBleHBlY3RlZCA9IFt7XG4gICAgICBfaWQ6ICdBQkNEJyxcbiAgICAgIHBsYXRmb3JtQ29tbWlzc2lvblJhdGU6IDAuMDEsXG4gICAgICBuYW1lOiAnVGVzdCBzdHJhdGVneScsXG4gICAgICBhY2NvdW50SWQ6ICdlODg2N2JhYS01ZWMyLTQ1YWUtOTkzMC00ZDVjZWExOGQwZDYnLFxuICAgICAgbWF4VHJhZGVSaXNrOiAwLjEsXG4gICAgICByaXNrTGltaXRzOiBbe1xuICAgICAgICB0eXBlOiAnbW9udGhseScsXG4gICAgICAgIGFwcGx5VG86ICdiYWxhbmNlJyxcbiAgICAgICAgbWF4UmVsYXRpdmVSaXNrOiAwLjUsXG4gICAgICAgIGNsb3NlUG9zaXRpb25zOiBmYWxzZSxcbiAgICAgICAgc3RhcnRUaW1lOiAnMjAyMC0wOC0yNFQwMDowMDowMS4wMDBaJ1xuICAgICAgfV0sXG4gICAgICB0aW1lU2V0dGluZ3M6IHtcbiAgICAgICAgbGlmZXRpbWVJbkhvdXJzOiAxOTIsXG4gICAgICAgIG9wZW5pbmdJbnRlcnZhbEluTWludXRlczogNVxuICAgICAgfVxuICAgIH1dO1xuICAgIHJlcXVlc3RTdHViLnJlc29sdmVzKGV4cGVjdGVkKTtcbiAgICBsZXQgc3RyYXRlZ2llcyA9IGF3YWl0IGNvcHlGYWN0b3J5Q2xpZW50LmdldFN0cmF0ZWdpZXModHJ1ZSwgMTAwLCAyMDApO1xuICAgIHN0cmF0ZWdpZXMuc2hvdWxkLmVxdWFsKGV4cGVjdGVkKTtcbiAgICBzaW5vbi5hc3NlcnQuY2FsbGVkT25jZVdpdGhFeGFjdGx5KGRvbWFpbkNsaWVudC5yZXF1ZXN0Q29weUZhY3RvcnksIHtcbiAgICAgIHVybDogJy91c2Vycy9jdXJyZW50L2NvbmZpZ3VyYXRpb24vc3RyYXRlZ2llcycsXG4gICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICAnYXV0aC10b2tlbic6IHRva2VuXG4gICAgICB9LFxuICAgICAgcXM6IHsgXG4gICAgICAgIGluY2x1ZGVSZW1vdmVkOiB0cnVlLCBcbiAgICAgICAgbGltaXQ6IDEwMCxcbiAgICAgICAgb2Zmc2V0OiAyMDAgXG4gICAgICB9LFxuICAgICAganNvbjogdHJ1ZSxcbiAgICB9LCB0cnVlKTtcbiAgfSk7XG4gIFxuICAvKipcbiAgICAgKiBAdGVzdCB7Q29uZmlndXJhdGlvbkNsaWVudCNnZXRTdHJhdGVnaWVzfVxuICAgICAqL1xuICBpdCgnc2hvdWxkIG5vdCByZXRyaWV2ZSBzdHJhdGVnaWVzIGZyb20gQVBJIHdpdGggYWNjb3VudCB0b2tlbicsIGFzeW5jICgpID0+IHtcbiAgICBkb21haW5DbGllbnQgPSBuZXcgRG9tYWluQ2xpZW50KGh0dHBDbGllbnQsICd0b2tlbicpO1xuICAgIGNvcHlGYWN0b3J5Q2xpZW50ID0gbmV3IENvbmZpZ3VyYXRpb25DbGllbnQoZG9tYWluQ2xpZW50KTtcbiAgICB0cnkge1xuICAgICAgYXdhaXQgY29weUZhY3RvcnlDbGllbnQuZ2V0U3RyYXRlZ2llcygpO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNZXRob2RBY2Nlc3NFcnJvciBleHBlY3RlZCcpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBlcnJvci5uYW1lLnNob3VsZC5lcXVhbCgnTWV0aG9kQWNjZXNzRXJyb3InKTtcbiAgICAgIGVycm9yLm1lc3NhZ2Uuc2hvdWxkLmVxdWFsKFxuICAgICAgICAnWW91IGNhbiBub3QgaW52b2tlIGdldFN0cmF0ZWdpZXMgbWV0aG9kLCBiZWNhdXNlIHlvdSBoYXZlIGNvbm5lY3RlZCB3aXRoIGFjY291bnQgYWNjZXNzIHRva2VuLiAnICtcbiAgICAgICAgICAnUGxlYXNlIHVzZSBBUEkgYWNjZXNzIHRva2VuIGZyb20gaHR0cHM6Ly9hcHAubWV0YWFwaS5jbG91ZC90b2tlbiBwYWdlIHRvIGludm9rZSB0aGlzIG1ldGhvZC4nXG4gICAgICApO1xuICAgIH1cbiAgfSk7XG5cbiAgLyoqXG4gICAqIEB0ZXN0IHtDb25maWd1cmF0aW9uQ2xpZW50I2dldFN0cmF0ZWd5fVxuICAgKi9cbiAgaXQoJ3Nob3VsZCByZXRyaWV2ZSBzdHJhdGVneSBmcm9tIEFQSScsIGFzeW5jICgpID0+IHtcbiAgICBsZXQgZXhwZWN0ZWQgPSB7XG4gICAgICBfaWQ6ICdBQkNEJyxcbiAgICAgIHByb3ZpZGVySWQ6ICdwcm92aWRlcklkJyxcbiAgICAgIHBsYXRmb3JtQ29tbWlzc2lvblJhdGU6IDAuMDEsXG4gICAgICBuYW1lOiAnVGVzdCBzdHJhdGVneScsXG4gICAgICBjb25uZWN0aW9uSWQ6ICdlODg2N2JhYS01ZWMyLTQ1YWUtOTkzMC00ZDVjZWExOGQwZDYnLFxuICAgICAgbWF4VHJhZGVSaXNrOiAwLjEsXG4gICAgICB0aW1lU2V0dGluZ3M6IHtcbiAgICAgICAgbGlmZXRpbWVJbkhvdXJzOiAxOTIsXG4gICAgICAgIG9wZW5pbmdJbnRlcnZhbEluTWludXRlczogNVxuICAgICAgfVxuICAgIH07XG4gICAgcmVxdWVzdFN0dWIucmVzb2x2ZXMoZXhwZWN0ZWQpO1xuICAgIGxldCBzdHJhdGVnaWVzID0gYXdhaXQgY29weUZhY3RvcnlDbGllbnQuZ2V0U3RyYXRlZ3koJ0FCQ0QnKTtcbiAgICBzdHJhdGVnaWVzLnNob3VsZC5lcXVhbChleHBlY3RlZCk7XG4gICAgc2lub24uYXNzZXJ0LmNhbGxlZE9uY2VXaXRoRXhhY3RseShkb21haW5DbGllbnQucmVxdWVzdENvcHlGYWN0b3J5LCB7XG4gICAgICB1cmw6ICcvdXNlcnMvY3VycmVudC9jb25maWd1cmF0aW9uL3N0cmF0ZWdpZXMvQUJDRCcsXG4gICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICAnYXV0aC10b2tlbic6IHRva2VuXG4gICAgICB9LFxuICAgICAganNvbjogdHJ1ZSxcbiAgICB9KTtcbiAgfSk7XG4gIFxuICAvKipcbiAgICAgKiBAdGVzdCB7Q29uZmlndXJhdGlvbkNsaWVudCNnZXRTdHJhdGVneX1cbiAgICAgKi9cbiAgaXQoJ3Nob3VsZCBub3QgcmV0cmlldmUgc3RyYXRlZ3kgZnJvbSBBUEkgd2l0aCBhY2NvdW50IHRva2VuJywgYXN5bmMgKCkgPT4ge1xuICAgIGRvbWFpbkNsaWVudCA9IG5ldyBEb21haW5DbGllbnQoaHR0cENsaWVudCwgJ3Rva2VuJyk7XG4gICAgY29weUZhY3RvcnlDbGllbnQgPSBuZXcgQ29uZmlndXJhdGlvbkNsaWVudChkb21haW5DbGllbnQpO1xuICAgIHRyeSB7XG4gICAgICBhd2FpdCBjb3B5RmFjdG9yeUNsaWVudC5nZXRTdHJhdGVneSgnQUJDRCcpO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNZXRob2RBY2Nlc3NFcnJvciBleHBlY3RlZCcpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBlcnJvci5uYW1lLnNob3VsZC5lcXVhbCgnTWV0aG9kQWNjZXNzRXJyb3InKTtcbiAgICAgIGVycm9yLm1lc3NhZ2Uuc2hvdWxkLmVxdWFsKFxuICAgICAgICAnWW91IGNhbiBub3QgaW52b2tlIGdldFN0cmF0ZWd5IG1ldGhvZCwgYmVjYXVzZSB5b3UgaGF2ZSBjb25uZWN0ZWQgd2l0aCBhY2NvdW50IGFjY2VzcyB0b2tlbi4gJyArXG4gICAgICAgICAgJ1BsZWFzZSB1c2UgQVBJIGFjY2VzcyB0b2tlbiBmcm9tIGh0dHBzOi8vYXBwLm1ldGFhcGkuY2xvdWQvdG9rZW4gcGFnZSB0byBpbnZva2UgdGhpcyBtZXRob2QuJ1xuICAgICAgKTtcbiAgICB9XG4gIH0pO1xuXG4gIC8qKlxuICAgKiBAdGVzdCB7Q29uZmlndXJhdGlvbkNsaWVudCN1cGRhdGVTdHJhdGVneX1cbiAgICovXG4gIGl0KCdzaG91bGQgdXBkYXRlIHN0cmF0ZWd5IHZpYSBBUEknLCBhc3luYyAoKSA9PiB7XG4gICAgY29uc3Qgc3RyYXRlZ3kgPSB7XG4gICAgICBuYW1lOiAnVGVzdCBzdHJhdGVneScsXG4gICAgICBhY2NvdW50SWQ6ICdlODg2N2JhYS01ZWMyLTQ1YWUtOTkzMC00ZDVjZWExOGQwZDYnLFxuICAgICAgbWF4VHJhZGVSaXNrOiAwLjEsXG4gICAgICByaXNrTGltaXRzOiBbe1xuICAgICAgICB0eXBlOiAnbW9udGhseScsXG4gICAgICAgIGFwcGx5VG86ICdiYWxhbmNlJyxcbiAgICAgICAgbWF4UmVsYXRpdmVSaXNrOiAwLjUsXG4gICAgICAgIGNsb3NlUG9zaXRpb25zOiBmYWxzZSxcbiAgICAgICAgc3RhcnRUaW1lOiAnMjAyMC0wOC0yNFQwMDowMDowMS4wMDBaJ1xuICAgICAgfV0sXG4gICAgICB0aW1lU2V0dGluZ3M6IHtcbiAgICAgICAgbGlmZXRpbWVJbkhvdXJzOiAxOTIsXG4gICAgICAgIG9wZW5pbmdJbnRlcnZhbEluTWludXRlczogNVxuICAgICAgfVxuICAgIH07XG4gICAgYXdhaXQgY29weUZhY3RvcnlDbGllbnQudXBkYXRlU3RyYXRlZ3koJ0FCQ0QnLCBzdHJhdGVneSk7XG4gICAgc2lub24uYXNzZXJ0LmNhbGxlZE9uY2VXaXRoRXhhY3RseShkb21haW5DbGllbnQucmVxdWVzdENvcHlGYWN0b3J5LCB7XG4gICAgICB1cmw6ICcvdXNlcnMvY3VycmVudC9jb25maWd1cmF0aW9uL3N0cmF0ZWdpZXMvQUJDRCcsXG4gICAgICBtZXRob2Q6ICdQVVQnLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICAnYXV0aC10b2tlbic6IHRva2VuXG4gICAgICB9LFxuICAgICAganNvbjogdHJ1ZSxcbiAgICAgIGJvZHk6IHN0cmF0ZWd5fSk7XG4gIH0pO1xuXG4gIC8qKlxuICAgKiBAdGVzdCB7Q29uZmlndXJhdGlvbkNsaWVudCN1cGRhdGVTdHJhdGVneX1cbiAgICovXG4gIGl0KCdzaG91bGQgbm90IHVwZGF0ZSBzdHJhdGVneSB2aWEgQVBJIHdpdGggYWNjb3VudCB0b2tlbicsIGFzeW5jICgpID0+IHtcbiAgICBkb21haW5DbGllbnQgPSBuZXcgRG9tYWluQ2xpZW50KGh0dHBDbGllbnQsICd0b2tlbicpO1xuICAgIGNvcHlGYWN0b3J5Q2xpZW50ID0gbmV3IENvbmZpZ3VyYXRpb25DbGllbnQoZG9tYWluQ2xpZW50KTtcbiAgICB0cnkge1xuICAgICAgYXdhaXQgY29weUZhY3RvcnlDbGllbnQudXBkYXRlU3RyYXRlZ3koJ0FCQ0QnLCB7fSk7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01ldGhvZEFjY2Vzc0Vycm9yIGV4cGVjdGVkJyk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGVycm9yLm5hbWUuc2hvdWxkLmVxdWFsKCdNZXRob2RBY2Nlc3NFcnJvcicpO1xuICAgICAgZXJyb3IubWVzc2FnZS5zaG91bGQuZXF1YWwoXG4gICAgICAgICdZb3UgY2FuIG5vdCBpbnZva2UgdXBkYXRlU3RyYXRlZ3kgbWV0aG9kLCBiZWNhdXNlIHlvdSBoYXZlIGNvbm5lY3RlZCB3aXRoIGFjY291bnQgYWNjZXNzIHRva2VuLiAnICtcbiAgICAgICAgJ1BsZWFzZSB1c2UgQVBJIGFjY2VzcyB0b2tlbiBmcm9tIGh0dHBzOi8vYXBwLm1ldGFhcGkuY2xvdWQvdG9rZW4gcGFnZSB0byBpbnZva2UgdGhpcyBtZXRob2QuJ1xuICAgICAgKTtcbiAgICB9XG4gIH0pO1xuXG4gIC8qKlxuICAgKiBAdGVzdCB7Q29uZmlndXJhdGlvbkNsaWVudCNyZW1vdmVTdHJhdGVneX1cbiAgICovXG4gIGl0KCdzaG91bGQgcmVtb3ZlIHN0cmF0ZWd5IHZpYSBBUEknLCBhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgcGF5bG9hZCA9IHttb2RlOiAncHJlc2VydmUnLCByZW1vdmVBZnRlcjogJzIwMjAtMDgtMjRUMDA6MDA6MDAuMDAwWid9O1xuICAgIGF3YWl0IGNvcHlGYWN0b3J5Q2xpZW50LnJlbW92ZVN0cmF0ZWd5KCdBQkNEJywgcGF5bG9hZCk7XG4gICAgc2lub24uYXNzZXJ0LmNhbGxlZE9uY2VXaXRoRXhhY3RseShkb21haW5DbGllbnQucmVxdWVzdENvcHlGYWN0b3J5LCB7XG4gICAgICB1cmw6ICcvdXNlcnMvY3VycmVudC9jb25maWd1cmF0aW9uL3N0cmF0ZWdpZXMvQUJDRCcsXG4gICAgICBtZXRob2Q6ICdERUxFVEUnLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICAnYXV0aC10b2tlbic6IHRva2VuXG4gICAgICB9LFxuICAgICAgYm9keTogcGF5bG9hZCxcbiAgICAgIGpzb246IHRydWUsXG4gICAgfSk7XG4gIH0pO1xuXG4gIC8qKlxuICAgKiBAdGVzdCB7Q29uZmlndXJhdGlvbkNsaWVudCNyZW1vdmVTdHJhdGVneX1cbiAgICovXG4gIGl0KCdzaG91bGQgbm90IHJlbW92ZSBzdHJhdGVneSBmcm9tIHZpYSB3aXRoIGFjY291bnQgdG9rZW4nLCBhc3luYyAoKSA9PiB7XG4gICAgZG9tYWluQ2xpZW50ID0gbmV3IERvbWFpbkNsaWVudChodHRwQ2xpZW50LCAndG9rZW4nKTtcbiAgICBjb3B5RmFjdG9yeUNsaWVudCA9IG5ldyBDb25maWd1cmF0aW9uQ2xpZW50KGRvbWFpbkNsaWVudCk7XG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IGNvcHlGYWN0b3J5Q2xpZW50LnJlbW92ZVN0cmF0ZWd5KCdBQkNEJyk7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01ldGhvZEFjY2Vzc0Vycm9yIGV4cGVjdGVkJyk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGVycm9yLm5hbWUuc2hvdWxkLmVxdWFsKCdNZXRob2RBY2Nlc3NFcnJvcicpO1xuICAgICAgZXJyb3IubWVzc2FnZS5zaG91bGQuZXF1YWwoXG4gICAgICAgICdZb3UgY2FuIG5vdCBpbnZva2UgcmVtb3ZlU3RyYXRlZ3kgbWV0aG9kLCBiZWNhdXNlIHlvdSBoYXZlIGNvbm5lY3RlZCB3aXRoIGFjY291bnQgYWNjZXNzIHRva2VuLiAnICtcbiAgICAgICAgJ1BsZWFzZSB1c2UgQVBJIGFjY2VzcyB0b2tlbiBmcm9tIGh0dHBzOi8vYXBwLm1ldGFhcGkuY2xvdWQvdG9rZW4gcGFnZSB0byBpbnZva2UgdGhpcyBtZXRob2QuJ1xuICAgICAgKTtcbiAgICB9XG4gIH0pO1xuXG4gIC8qKlxuICAgKiBAdGVzdCB7Q29uZmlndXJhdGlvbkNsaWVudCNnZXRQb3J0Zm9saW9TdHJhdGVnaWVzfVxuICAgKi9cbiAgaXQoJ3Nob3VsZCByZXRyaWV2ZSBwb3J0Zm9saW8gc3RyYXRlZ2llcyBmcm9tIEFQSScsIGFzeW5jICgpID0+IHtcbiAgICBsZXQgZXhwZWN0ZWQgPSBbe1xuICAgICAgX2lkOiAnQUJDRCcsXG4gICAgICBwcm92aWRlcklkOiAncHJvdmlkZXJJZCcsXG4gICAgICBwbGF0Zm9ybUNvbW1pc3Npb25SYXRlOiAwLjAxLFxuICAgICAgbmFtZTogJ1Rlc3Qgc3RyYXRlZ3knLFxuICAgICAgbWVtYmVyczogW1xuICAgICAgICB7XG4gICAgICAgICAgc3RyYXRlZ3lJZDogJ0JDREUnXG4gICAgICAgIH1cbiAgICAgIF0sXG4gICAgICBtYXhUcmFkZVJpc2s6IDAuMVxuICAgIH1dO1xuICAgIHJlcXVlc3RTdHViLnJlc29sdmVzKGV4cGVjdGVkKTtcbiAgICBsZXQgc3RyYXRlZ2llcyA9IGF3YWl0IGNvcHlGYWN0b3J5Q2xpZW50LmdldFBvcnRmb2xpb1N0cmF0ZWdpZXModHJ1ZSwgMTAwLCAyMDApO1xuICAgIHN0cmF0ZWdpZXMuc2hvdWxkLmVxdWFsKGV4cGVjdGVkKTtcbiAgICBzaW5vbi5hc3NlcnQuY2FsbGVkT25jZVdpdGhFeGFjdGx5KGRvbWFpbkNsaWVudC5yZXF1ZXN0Q29weUZhY3RvcnksIHtcbiAgICAgIHVybDogJy91c2Vycy9jdXJyZW50L2NvbmZpZ3VyYXRpb24vcG9ydGZvbGlvLXN0cmF0ZWdpZXMnLFxuICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgJ2F1dGgtdG9rZW4nOiB0b2tlblxuICAgICAgfSxcbiAgICAgIHFzOiB7IFxuICAgICAgICBpbmNsdWRlUmVtb3ZlZDogdHJ1ZSwgXG4gICAgICAgIGxpbWl0OiAxMDAsXG4gICAgICAgIG9mZnNldDogMjAwIFxuICAgICAgfSxcbiAgICAgIGpzb246IHRydWUsXG4gICAgfSwgdHJ1ZSk7XG4gIH0pO1xuXG4gIC8qKlxuICAgKiBAdGVzdCB7Q29uZmlndXJhdGlvbkNsaWVudCNnZXRQb3J0Zm9saW9TdHJhdGVnaWVzfVxuICAgKi9cbiAgaXQoJ3Nob3VsZCBub3QgcmV0cmlldmUgcG9ydGZvbGlvIHN0cmF0ZWdpZXMgZnJvbSBBUEkgd2l0aCBhY2NvdW50IHRva2VuJywgYXN5bmMgKCkgPT4ge1xuICAgIGRvbWFpbkNsaWVudCA9IG5ldyBEb21haW5DbGllbnQoaHR0cENsaWVudCwgJ3Rva2VuJyk7XG4gICAgY29weUZhY3RvcnlDbGllbnQgPSBuZXcgQ29uZmlndXJhdGlvbkNsaWVudChkb21haW5DbGllbnQpO1xuICAgIHRyeSB7XG4gICAgICBhd2FpdCBjb3B5RmFjdG9yeUNsaWVudC5nZXRQb3J0Zm9saW9TdHJhdGVnaWVzKCk7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01ldGhvZEFjY2Vzc0Vycm9yIGV4cGVjdGVkJyk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGVycm9yLm5hbWUuc2hvdWxkLmVxdWFsKCdNZXRob2RBY2Nlc3NFcnJvcicpO1xuICAgICAgZXJyb3IubWVzc2FnZS5zaG91bGQuZXF1YWwoXG4gICAgICAgICdZb3UgY2FuIG5vdCBpbnZva2UgZ2V0UG9ydGZvbGlvU3RyYXRlZ2llcyBtZXRob2QsIGJlY2F1c2UgeW91IGhhdmUgY29ubmVjdGVkIHdpdGggYWNjb3VudCBhY2Nlc3MgdG9rZW4uICcgK1xuICAgICAgICAnUGxlYXNlIHVzZSBBUEkgYWNjZXNzIHRva2VuIGZyb20gaHR0cHM6Ly9hcHAubWV0YWFwaS5jbG91ZC90b2tlbiBwYWdlIHRvIGludm9rZSB0aGlzIG1ldGhvZC4nXG4gICAgICApO1xuICAgIH1cbiAgfSk7XG5cbiAgLyoqXG4gICAqIEB0ZXN0IHtDb25maWd1cmF0aW9uQ2xpZW50I2dldFBvcnRmb2xpb1N0cmF0ZWd5fVxuICAgKi9cbiAgaXQoJ3Nob3VsZCByZXRyaWV2ZSBwb3J0Zm9saW8gc3RyYXRlZ3kgZnJvbSBBUEknLCBhc3luYyAoKSA9PiB7XG4gICAgbGV0IGV4cGVjdGVkID0ge1xuICAgICAgX2lkOiAnQUJDRCcsXG4gICAgICBwcm92aWRlcklkOiAncHJvdmlkZXJJZCcsXG4gICAgICBwbGF0Zm9ybUNvbW1pc3Npb25SYXRlOiAwLjAxLFxuICAgICAgbmFtZTogJ1Rlc3Qgc3RyYXRlZ3knLFxuICAgICAgbWVtYmVyczogW1xuICAgICAgICB7XG4gICAgICAgICAgc3RyYXRlZ3lJZDogJ0JDREUnXG4gICAgICAgIH1cbiAgICAgIF0sXG4gICAgICBtYXhUcmFkZVJpc2s6IDAuMVxuICAgIH07XG4gICAgcmVxdWVzdFN0dWIucmVzb2x2ZXMoZXhwZWN0ZWQpO1xuICAgIGxldCBzdHJhdGVnaWVzID0gYXdhaXQgY29weUZhY3RvcnlDbGllbnQuZ2V0UG9ydGZvbGlvU3RyYXRlZ3koJ0FCQ0QnKTtcbiAgICBzdHJhdGVnaWVzLnNob3VsZC5lcXVhbChleHBlY3RlZCk7XG4gICAgc2lub24uYXNzZXJ0LmNhbGxlZE9uY2VXaXRoRXhhY3RseShkb21haW5DbGllbnQucmVxdWVzdENvcHlGYWN0b3J5LCB7XG4gICAgICB1cmw6ICcvdXNlcnMvY3VycmVudC9jb25maWd1cmF0aW9uL3BvcnRmb2xpby1zdHJhdGVnaWVzL0FCQ0QnLFxuICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgJ2F1dGgtdG9rZW4nOiB0b2tlblxuICAgICAgfSxcbiAgICAgIGpzb246IHRydWUsXG4gICAgfSk7XG4gIH0pO1xuXG4gIC8qKlxuICAgKiBAdGVzdCB7Q29uZmlndXJhdGlvbkNsaWVudCNnZXRQb3J0Zm9saW9TdHJhdGVneX1cbiAgICovXG4gIGl0KCdzaG91bGQgbm90IHJldHJpZXZlIHBvcnRmb2xpbyBzdHJhdGVneSBmcm9tIEFQSSB3aXRoIGFjY291bnQgdG9rZW4nLCBhc3luYyAoKSA9PiB7XG4gICAgZG9tYWluQ2xpZW50ID0gbmV3IERvbWFpbkNsaWVudChodHRwQ2xpZW50LCAndG9rZW4nKTtcbiAgICBjb3B5RmFjdG9yeUNsaWVudCA9IG5ldyBDb25maWd1cmF0aW9uQ2xpZW50KGRvbWFpbkNsaWVudCk7XG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IGNvcHlGYWN0b3J5Q2xpZW50LmdldFBvcnRmb2xpb1N0cmF0ZWd5KCdBQkNEJyk7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01ldGhvZEFjY2Vzc0Vycm9yIGV4cGVjdGVkJyk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGVycm9yLm5hbWUuc2hvdWxkLmVxdWFsKCdNZXRob2RBY2Nlc3NFcnJvcicpO1xuICAgICAgZXJyb3IubWVzc2FnZS5zaG91bGQuZXF1YWwoXG4gICAgICAgICdZb3UgY2FuIG5vdCBpbnZva2UgZ2V0UG9ydGZvbGlvU3RyYXRlZ3kgbWV0aG9kLCBiZWNhdXNlIHlvdSBoYXZlIGNvbm5lY3RlZCB3aXRoIGFjY291bnQgYWNjZXNzIHRva2VuLiAnICtcbiAgICAgICAgJ1BsZWFzZSB1c2UgQVBJIGFjY2VzcyB0b2tlbiBmcm9tIGh0dHBzOi8vYXBwLm1ldGFhcGkuY2xvdWQvdG9rZW4gcGFnZSB0byBpbnZva2UgdGhpcyBtZXRob2QuJ1xuICAgICAgKTtcbiAgICB9XG4gIH0pO1xuXG4gIC8qKlxuICAgKiBAdGVzdCB7Q29uZmlndXJhdGlvbkNsaWVudCN1cGRhdGVQb3J0Zm9saW9TdHJhdGVneX1cbiAgICovXG4gIGl0KCdzaG91bGQgdXBkYXRlIHBvcnRmb2xpbyBzdHJhdGVneSB2aWEgQVBJJywgYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IHN0cmF0ZWd5ID0ge1xuICAgICAgbmFtZTogJ1Rlc3Qgc3RyYXRlZ3knLFxuICAgICAgbWVtYmVyczogW1xuICAgICAgICB7XG4gICAgICAgICAgc3RyYXRlZ3lJZDogJ0JDREUnXG4gICAgICAgIH1cbiAgICAgIF0sXG4gICAgICBtYXhUcmFkZVJpc2s6IDAuMVxuICAgIH07XG4gICAgYXdhaXQgY29weUZhY3RvcnlDbGllbnQudXBkYXRlUG9ydGZvbGlvU3RyYXRlZ3koJ0FCQ0QnLCBzdHJhdGVneSk7XG4gICAgc2lub24uYXNzZXJ0LmNhbGxlZE9uY2VXaXRoRXhhY3RseShkb21haW5DbGllbnQucmVxdWVzdENvcHlGYWN0b3J5LCB7XG4gICAgICB1cmw6ICcvdXNlcnMvY3VycmVudC9jb25maWd1cmF0aW9uL3BvcnRmb2xpby1zdHJhdGVnaWVzL0FCQ0QnLFxuICAgICAgbWV0aG9kOiAnUFVUJyxcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgJ2F1dGgtdG9rZW4nOiB0b2tlblxuICAgICAgfSxcbiAgICAgIGpzb246IHRydWUsXG4gICAgICBib2R5OiBzdHJhdGVneVxuICAgIH0pO1xuICB9KTtcblxuICAvKipcbiAgICogQHRlc3Qge0NvbmZpZ3VyYXRpb25DbGllbnQjdXBkYXRlUG9ydGZvbGlvU3RyYXRlZ3l9XG4gICAqL1xuICBpdCgnc2hvdWxkIG5vdCB1cGRhdGUgcG9ydGZvbGlvIHN0cmF0ZWd5IHZpYSBBUEkgd2l0aCBhY2NvdW50IHRva2VuJywgYXN5bmMgKCkgPT4ge1xuICAgIGRvbWFpbkNsaWVudCA9IG5ldyBEb21haW5DbGllbnQoaHR0cENsaWVudCwgJ3Rva2VuJyk7XG4gICAgY29weUZhY3RvcnlDbGllbnQgPSBuZXcgQ29uZmlndXJhdGlvbkNsaWVudChkb21haW5DbGllbnQpO1xuICAgIHRyeSB7XG4gICAgICBhd2FpdCBjb3B5RmFjdG9yeUNsaWVudC51cGRhdGVQb3J0Zm9saW9TdHJhdGVneSgnQUJDRCcsIHt9KTtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWV0aG9kQWNjZXNzRXJyb3IgZXhwZWN0ZWQnKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgZXJyb3IubmFtZS5zaG91bGQuZXF1YWwoJ01ldGhvZEFjY2Vzc0Vycm9yJyk7XG4gICAgICBlcnJvci5tZXNzYWdlLnNob3VsZC5lcXVhbChcbiAgICAgICAgJ1lvdSBjYW4gbm90IGludm9rZSB1cGRhdGVQb3J0Zm9saW9TdHJhdGVneSBtZXRob2QsIGJlY2F1c2UgeW91IGhhdmUgY29ubmVjdGVkIHdpdGggYWNjb3VudCBhY2Nlc3MgdG9rZW4uICcgK1xuICAgICAgICAnUGxlYXNlIHVzZSBBUEkgYWNjZXNzIHRva2VuIGZyb20gaHR0cHM6Ly9hcHAubWV0YWFwaS5jbG91ZC90b2tlbiBwYWdlIHRvIGludm9rZSB0aGlzIG1ldGhvZC4nXG4gICAgICApO1xuICAgIH1cbiAgfSk7XG5cbiAgLyoqXG4gICAqIEB0ZXN0IHtDb25maWd1cmF0aW9uQ2xpZW50I3JlbW92ZVBvcnRmb2xpb1N0cmF0ZWd5fVxuICAgKi9cbiAgaXQoJ3Nob3VsZCByZW1vdmUgcG9ydGZvbGlvIHN0cmF0ZWd5IHZpYSBBUEknLCBhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgcGF5bG9hZCA9IHttb2RlOiAncHJlc2VydmUnLCByZW1vdmVBZnRlcjogJzIwMjAtMDgtMjRUMDA6MDA6MDAuMDAwWid9O1xuICAgIGF3YWl0IGNvcHlGYWN0b3J5Q2xpZW50LnJlbW92ZVBvcnRmb2xpb1N0cmF0ZWd5KCdBQkNEJywgcGF5bG9hZCk7XG4gICAgc2lub24uYXNzZXJ0LmNhbGxlZE9uY2VXaXRoRXhhY3RseShkb21haW5DbGllbnQucmVxdWVzdENvcHlGYWN0b3J5LCB7XG4gICAgICB1cmw6ICcvdXNlcnMvY3VycmVudC9jb25maWd1cmF0aW9uL3BvcnRmb2xpby1zdHJhdGVnaWVzL0FCQ0QnLFxuICAgICAgbWV0aG9kOiAnREVMRVRFJyxcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgJ2F1dGgtdG9rZW4nOiB0b2tlblxuICAgICAgfSxcbiAgICAgIGJvZHk6IHBheWxvYWQsXG4gICAgICBqc29uOiB0cnVlLFxuICAgIH0pO1xuICB9KTtcblxuICAvKipcbiAgICogQHRlc3Qge0NvbmZpZ3VyYXRpb25DbGllbnQjcmVtb3ZlUG9ydGZvbGlvU3RyYXRlZ3l9XG4gICAqL1xuICBpdCgnc2hvdWxkIG5vdCByZW1vdmUgcG9ydGZvbGlvIHN0cmF0ZWd5IGZyb20gdmlhIHdpdGggYWNjb3VudCB0b2tlbicsIGFzeW5jICgpID0+IHtcbiAgICBkb21haW5DbGllbnQgPSBuZXcgRG9tYWluQ2xpZW50KGh0dHBDbGllbnQsICd0b2tlbicpO1xuICAgIGNvcHlGYWN0b3J5Q2xpZW50ID0gbmV3IENvbmZpZ3VyYXRpb25DbGllbnQoZG9tYWluQ2xpZW50KTtcbiAgICB0cnkge1xuICAgICAgYXdhaXQgY29weUZhY3RvcnlDbGllbnQucmVtb3ZlUG9ydGZvbGlvU3RyYXRlZ3koJ0FCQ0QnKTtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWV0aG9kQWNjZXNzRXJyb3IgZXhwZWN0ZWQnKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgZXJyb3IubmFtZS5zaG91bGQuZXF1YWwoJ01ldGhvZEFjY2Vzc0Vycm9yJyk7XG4gICAgICBlcnJvci5tZXNzYWdlLnNob3VsZC5lcXVhbChcbiAgICAgICAgJ1lvdSBjYW4gbm90IGludm9rZSByZW1vdmVQb3J0Zm9saW9TdHJhdGVneSBtZXRob2QsIGJlY2F1c2UgeW91IGhhdmUgY29ubmVjdGVkIHdpdGggYWNjb3VudCBhY2Nlc3MgdG9rZW4uICcgK1xuICAgICAgICAnUGxlYXNlIHVzZSBBUEkgYWNjZXNzIHRva2VuIGZyb20gaHR0cHM6Ly9hcHAubWV0YWFwaS5jbG91ZC90b2tlbiBwYWdlIHRvIGludm9rZSB0aGlzIG1ldGhvZC4nXG4gICAgICApO1xuICAgIH1cbiAgfSk7XG5cbiAgLyoqXG4gICAqIEB0ZXN0IHtDb25maWd1cmF0aW9uQ2xpZW50I3JlbW92ZVBvcnRmb2xpb1N0cmF0ZWd5TWVtYmVyfVxuICAgKi9cbiAgaXQoJ3Nob3VsZCByZW1vdmUgcG9ydGZvbGlvIHN0cmF0ZWd5IG1lbWJlciB2aWEgQVBJJywgYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IHBheWxvYWQgPSB7bW9kZTogJ3ByZXNlcnZlJywgcmVtb3ZlQWZ0ZXI6ICcyMDIwLTA4LTI0VDAwOjAwOjAwLjAwMFonfTtcbiAgICBhd2FpdCBjb3B5RmFjdG9yeUNsaWVudC5yZW1vdmVQb3J0Zm9saW9TdHJhdGVneU1lbWJlcignQUJDRCcsICdCQ0RFJywgcGF5bG9hZCk7XG4gICAgc2lub24uYXNzZXJ0LmNhbGxlZE9uY2VXaXRoRXhhY3RseShkb21haW5DbGllbnQucmVxdWVzdENvcHlGYWN0b3J5LCB7XG4gICAgICB1cmw6ICcvdXNlcnMvY3VycmVudC9jb25maWd1cmF0aW9uL3BvcnRmb2xpby1zdHJhdGVnaWVzL0FCQ0QvbWVtYmVycy9CQ0RFJyxcbiAgICAgIG1ldGhvZDogJ0RFTEVURScsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgICdhdXRoLXRva2VuJzogdG9rZW5cbiAgICAgIH0sXG4gICAgICBib2R5OiBwYXlsb2FkLFxuICAgICAganNvbjogdHJ1ZSxcbiAgICB9KTtcbiAgfSk7XG4gIFxuICAvKipcbiAgICAgKiBAdGVzdCB7Q29uZmlndXJhdGlvbkNsaWVudCNyZW1vdmVQb3J0Zm9saW9TdHJhdGVneU1lbWJlcn1cbiAgICAgKi9cbiAgaXQoJ3Nob3VsZCBub3QgcmVtb3ZlIHBvcnRmb2xpbyBzdHJhdGVneSBtZW1iZXIgZnJvbSB2aWEgd2l0aCBhY2NvdW50IHRva2VuJywgYXN5bmMgKCkgPT4ge1xuICAgIGRvbWFpbkNsaWVudCA9IG5ldyBEb21haW5DbGllbnQoaHR0cENsaWVudCwgJ3Rva2VuJyk7XG4gICAgY29weUZhY3RvcnlDbGllbnQgPSBuZXcgQ29uZmlndXJhdGlvbkNsaWVudChkb21haW5DbGllbnQpO1xuICAgIHRyeSB7XG4gICAgICBhd2FpdCBjb3B5RmFjdG9yeUNsaWVudC5yZW1vdmVQb3J0Zm9saW9TdHJhdGVneU1lbWJlcignQUJDRCcsICdCQ0RFJyk7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01ldGhvZEFjY2Vzc0Vycm9yIGV4cGVjdGVkJyk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGVycm9yLm5hbWUuc2hvdWxkLmVxdWFsKCdNZXRob2RBY2Nlc3NFcnJvcicpO1xuICAgICAgZXJyb3IubWVzc2FnZS5zaG91bGQuZXF1YWwoXG4gICAgICAgICdZb3UgY2FuIG5vdCBpbnZva2UgcmVtb3ZlUG9ydGZvbGlvU3RyYXRlZ3lNZW1iZXIgbWV0aG9kLCBiZWNhdXNlIHlvdSBoYXZlIGNvbm5lY3RlZCB3aXRoIGFjY291bnQgYWNjZXNzICcgK1xuICAgICAgICAndG9rZW4uIFBsZWFzZSB1c2UgQVBJIGFjY2VzcyB0b2tlbiBmcm9tIGh0dHBzOi8vYXBwLm1ldGFhcGkuY2xvdWQvdG9rZW4gcGFnZSB0byBpbnZva2UgdGhpcyBtZXRob2QuJ1xuICAgICAgKTtcbiAgICB9XG4gIH0pO1xuXG4gIC8qKlxuICAgKiBAdGVzdCB7VHJhZGluZ0NsaWVudCNnZXRTdWJzY3JpYmVyc31cbiAgICovXG4gIGl0KCdzaG91bGQgcmV0cmlldmUgQ29weUZhY3Rvcnkgc3Vic2NyaWJlcnMgZnJvbSBBUEknLCBhc3luYyAoKSA9PiB7XG4gICAgbGV0IGV4cGVjdGVkID0gW3tcbiAgICAgIF9pZDogJ2U4ODY3YmFhLTVlYzItNDVhZS05OTMwLTRkNWNlYTE4ZDBkNicsXG4gICAgICBuYW1lOiAnRGVtbyBhY2NvdW50JyxcbiAgICAgIHJlc2VydmVkTWFyZ2luRnJhY3Rpb246IDAuMjUsXG4gICAgICBzdWJzY3JpcHRpb25zOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBzdHJhdGVneUlkOiAnQUJDRCcsXG4gICAgICAgICAgbXVsdGlwbGllcjogMVxuICAgICAgICB9XG4gICAgICBdXG4gICAgfV07XG4gICAgcmVxdWVzdFN0dWIucmVzb2x2ZXMoZXhwZWN0ZWQpO1xuICAgIGxldCBhY2NvdW50cyA9IGF3YWl0IGNvcHlGYWN0b3J5Q2xpZW50LmdldFN1YnNjcmliZXJzKHRydWUsIDEwMCwgMjAwKTtcbiAgICBhY2NvdW50cy5zaG91bGQuZXF1YWwoZXhwZWN0ZWQpO1xuICAgIHNpbm9uLmFzc2VydC5jYWxsZWRPbmNlV2l0aEV4YWN0bHkoZG9tYWluQ2xpZW50LnJlcXVlc3RDb3B5RmFjdG9yeSwge1xuICAgICAgdXJsOiAnL3VzZXJzL2N1cnJlbnQvY29uZmlndXJhdGlvbi9zdWJzY3JpYmVycycsXG4gICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICAnYXV0aC10b2tlbic6IHRva2VuXG4gICAgICB9LFxuICAgICAgcXM6IHsgXG4gICAgICAgIGluY2x1ZGVSZW1vdmVkOiB0cnVlLCBcbiAgICAgICAgbGltaXQ6IDEwMCxcbiAgICAgICAgb2Zmc2V0OiAyMDAgXG4gICAgICB9LFxuICAgICAganNvbjogdHJ1ZSxcbiAgICB9LCB0cnVlKTtcbiAgfSk7XG4gIFxuICAvKipcbiAgICAgKiBAdGVzdCB7VHJhZGluZ0NsaWVudCNnZXRTdWJzY3JpYmVyc31cbiAgICAgKi9cbiAgaXQoJ3Nob3VsZCBub3QgcmV0cmlldmUgc3Vic2NyaWJlcnMgZnJvbSBBUEkgd2l0aCBhY2NvdW50IHRva2VuJywgYXN5bmMgKCkgPT4ge1xuICAgIGRvbWFpbkNsaWVudCA9IG5ldyBEb21haW5DbGllbnQoaHR0cENsaWVudCwgJ3Rva2VuJyk7XG4gICAgY29weUZhY3RvcnlDbGllbnQgPSBuZXcgQ29uZmlndXJhdGlvbkNsaWVudChkb21haW5DbGllbnQpO1xuICAgIHRyeSB7XG4gICAgICBhd2FpdCBjb3B5RmFjdG9yeUNsaWVudC5nZXRTdWJzY3JpYmVycygpO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNZXRob2RBY2Nlc3NFcnJvciBleHBlY3RlZCcpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBlcnJvci5uYW1lLnNob3VsZC5lcXVhbCgnTWV0aG9kQWNjZXNzRXJyb3InKTtcbiAgICAgIGVycm9yLm1lc3NhZ2Uuc2hvdWxkLmVxdWFsKFxuICAgICAgICAnWW91IGNhbiBub3QgaW52b2tlIGdldFN1YnNjcmliZXJzIG1ldGhvZCwgYmVjYXVzZSB5b3UgaGF2ZSBjb25uZWN0ZWQgd2l0aCBhY2NvdW50IGFjY2VzcyB0b2tlbi4gJyArXG4gICAgICAgICAgJ1BsZWFzZSB1c2UgQVBJIGFjY2VzcyB0b2tlbiBmcm9tIGh0dHBzOi8vYXBwLm1ldGFhcGkuY2xvdWQvdG9rZW4gcGFnZSB0byBpbnZva2UgdGhpcyBtZXRob2QuJ1xuICAgICAgKTtcbiAgICB9XG4gIH0pO1xuXG4gIC8qKlxuICAgKiBAdGVzdCB7VHJhZGluZ0NsaWVudCNnZXRTdWJzY3JpYmVyfVxuICAgKi9cbiAgaXQoJ3Nob3VsZCByZXRyaWV2ZSBDb3B5RmFjdG9yeSBzdWJzY3JpYmVyIGZyb20gQVBJJywgYXN5bmMgKCkgPT4ge1xuICAgIGxldCBleHBlY3RlZCA9IHtcbiAgICAgIF9pZDogJ2U4ODY3YmFhLTVlYzItNDVhZS05OTMwLTRkNWNlYTE4ZDBkNicsXG4gICAgICBuYW1lOiAnRGVtbyBhY2NvdW50JyxcbiAgICAgIHJlc2VydmVkTWFyZ2luRnJhY3Rpb246IDAuMjUsXG4gICAgICBzdWJzY3JpcHRpb25zOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBzdHJhdGVneUlkOiAnQUJDRCcsXG4gICAgICAgICAgbXVsdGlwbGllcjogMVxuICAgICAgICB9XG4gICAgICBdXG4gICAgfTtcbiAgICByZXF1ZXN0U3R1Yi5yZXNvbHZlcyhleHBlY3RlZCk7XG4gICAgbGV0IGFjY291bnRzID0gYXdhaXQgY29weUZhY3RvcnlDbGllbnRcbiAgICAgIC5nZXRTdWJzY3JpYmVyKCdlODg2N2JhYS01ZWMyLTQ1YWUtOTkzMC00ZDVjZWExOGQwZDYnKTtcbiAgICBhY2NvdW50cy5zaG91bGQuZXF1YWwoZXhwZWN0ZWQpO1xuICAgIHNpbm9uLmFzc2VydC5jYWxsZWRPbmNlV2l0aEV4YWN0bHkoZG9tYWluQ2xpZW50LnJlcXVlc3RDb3B5RmFjdG9yeSwge1xuICAgICAgdXJsOiAnL3VzZXJzL2N1cnJlbnQvY29uZmlndXJhdGlvbi9zdWJzY3JpYmVycy8nICtcbiAgICAgICAgJ2U4ODY3YmFhLTVlYzItNDVhZS05OTMwLTRkNWNlYTE4ZDBkNicsXG4gICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICAnYXV0aC10b2tlbic6IHRva2VuXG4gICAgICB9LFxuICAgICAganNvbjogdHJ1ZSxcbiAgICB9KTtcbiAgfSk7XG5cbiAgLyoqXG4gICAqIEB0ZXN0IHtUcmFkaW5nQ2xpZW50I2dldFN1YnNjcmliZXJ9XG4gICAqL1xuICBpdCgnc2hvdWxkIG5vdCByZXRyaWV2ZSBDb3B5RmFjdG9yeSBzdWJzY3JpYmVyIGZyb20gQVBJIHdpdGggYWNjb3VudCB0b2tlbicsIGFzeW5jICgpID0+IHtcbiAgICBkb21haW5DbGllbnQgPSBuZXcgRG9tYWluQ2xpZW50KGh0dHBDbGllbnQsICd0b2tlbicpO1xuICAgIGNvcHlGYWN0b3J5Q2xpZW50ID0gbmV3IENvbmZpZ3VyYXRpb25DbGllbnQoZG9tYWluQ2xpZW50KTtcbiAgICB0cnkge1xuICAgICAgYXdhaXQgY29weUZhY3RvcnlDbGllbnQuZ2V0U3Vic2NyaWJlcigndGVzdCcpO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNZXRob2RBY2Nlc3NFcnJvciBleHBlY3RlZCcpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBlcnJvci5uYW1lLnNob3VsZC5lcXVhbCgnTWV0aG9kQWNjZXNzRXJyb3InKTtcbiAgICAgIGVycm9yLm1lc3NhZ2Uuc2hvdWxkLmVxdWFsKFxuICAgICAgICAnWW91IGNhbiBub3QgaW52b2tlIGdldFN1YnNjcmliZXIgbWV0aG9kLCBiZWNhdXNlIHlvdSBoYXZlIGNvbm5lY3RlZCB3aXRoIGFjY291bnQgYWNjZXNzIHRva2VuLiAnICtcbiAgICAgICAgICAgICdQbGVhc2UgdXNlIEFQSSBhY2Nlc3MgdG9rZW4gZnJvbSBodHRwczovL2FwcC5tZXRhYXBpLmNsb3VkL3Rva2VuIHBhZ2UgdG8gaW52b2tlIHRoaXMgbWV0aG9kLidcbiAgICAgICk7XG4gICAgfVxuICB9KTtcblxuICAvKipcbiAgICogQHRlc3Qge1RyYWRpbmdDbGllbnQjdXBkYXRlU3Vic2NyaWJlcn1cbiAgICovXG4gIGl0KCdzaG91bGQgdXBkYXRlIENvcHlGYWN0b3J5IHN1YnNjcmliZXIgdmlhIEFQSScsIGFzeW5jICgpID0+IHtcbiAgICBsZXQgc3Vic2NyaWJlciA9IHtcbiAgICAgIG5hbWU6ICdEZW1vIGFjY291bnQnLFxuICAgICAgcmVzZXJ2ZWRNYXJnaW5GcmFjdGlvbjogMC4yNSxcbiAgICAgIHN1YnNjcmlwdGlvbnM6IFtcbiAgICAgICAge1xuICAgICAgICAgIHN0cmF0ZWd5SWQ6ICdBQkNEJyxcbiAgICAgICAgICBtdWx0aXBsaWVyOiAxXG4gICAgICAgIH1cbiAgICAgIF1cbiAgICB9O1xuICAgIGF3YWl0IGNvcHlGYWN0b3J5Q2xpZW50XG4gICAgICAudXBkYXRlU3Vic2NyaWJlcignZTg4NjdiYWEtNWVjMi00NWFlLTk5MzAtNGQ1Y2VhMThkMGQ2Jywgc3Vic2NyaWJlcik7XG4gICAgc2lub24uYXNzZXJ0LmNhbGxlZE9uY2VXaXRoRXhhY3RseShkb21haW5DbGllbnQucmVxdWVzdENvcHlGYWN0b3J5LCB7XG4gICAgICB1cmw6ICcvdXNlcnMvY3VycmVudC9jb25maWd1cmF0aW9uL3N1YnNjcmliZXJzLycgK1xuICAgICAgICAnZTg4NjdiYWEtNWVjMi00NWFlLTk5MzAtNGQ1Y2VhMThkMGQ2JyxcbiAgICAgIG1ldGhvZDogJ1BVVCcsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgICdhdXRoLXRva2VuJzogdG9rZW5cbiAgICAgIH0sXG4gICAgICBib2R5OiBzdWJzY3JpYmVyLFxuICAgICAganNvbjogdHJ1ZSxcbiAgICB9KTtcbiAgfSk7XG5cbiAgLyoqXG4gICAqIEB0ZXN0IHtUcmFkaW5nQ2xpZW50I3VwZGF0ZVN1YnNjcmliZXJ9XG4gICAqL1xuICBpdCgnc2hvdWxkIG5vdCB1cGRhdGUgQ29weUZhY3Rvcnkgc3Vic2NyaWJlciB2aWEgQVBJIHdpdGggYWNjb3VudCB0b2tlbicsIGFzeW5jICgpID0+IHtcbiAgICBkb21haW5DbGllbnQgPSBuZXcgRG9tYWluQ2xpZW50KGh0dHBDbGllbnQsICd0b2tlbicpO1xuICAgIGNvcHlGYWN0b3J5Q2xpZW50ID0gbmV3IENvbmZpZ3VyYXRpb25DbGllbnQoZG9tYWluQ2xpZW50KTtcbiAgICB0cnkge1xuICAgICAgYXdhaXQgY29weUZhY3RvcnlDbGllbnQudXBkYXRlU3Vic2NyaWJlcigndGVzdCcsIHt9KTtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWV0aG9kQWNjZXNzRXJyb3IgZXhwZWN0ZWQnKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgZXJyb3IubmFtZS5zaG91bGQuZXF1YWwoJ01ldGhvZEFjY2Vzc0Vycm9yJyk7XG4gICAgICBlcnJvci5tZXNzYWdlLnNob3VsZC5lcXVhbChcbiAgICAgICAgJ1lvdSBjYW4gbm90IGludm9rZSB1cGRhdGVTdWJzY3JpYmVyIG1ldGhvZCwgYmVjYXVzZSB5b3UgaGF2ZSBjb25uZWN0ZWQgd2l0aCBhY2NvdW50IGFjY2VzcyB0b2tlbi4gJyArXG4gICAgICAgICAgICAnUGxlYXNlIHVzZSBBUEkgYWNjZXNzIHRva2VuIGZyb20gaHR0cHM6Ly9hcHAubWV0YWFwaS5jbG91ZC90b2tlbiBwYWdlIHRvIGludm9rZSB0aGlzIG1ldGhvZC4nXG4gICAgICApO1xuICAgIH1cbiAgfSk7XG5cbiAgLyoqXG4gICAqIEB0ZXN0IHtUcmFkaW5nQ2xpZW50I3JlbW92ZVN1YnNjcmliZXJ9XG4gICAqL1xuICBpdCgnc2hvdWxkIHJlbW92ZSBDb3B5RmFjdG9yeSBzdWJzY3JpYmVyIHZpYSBBUEknLCBhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgcGF5bG9hZCA9IHttb2RlOiAncHJlc2VydmUnLCByZW1vdmVBZnRlcjogJzIwMjAtMDgtMjRUMDA6MDA6MDAuMDAwWid9O1xuICAgIGF3YWl0IGNvcHlGYWN0b3J5Q2xpZW50XG4gICAgICAucmVtb3ZlU3Vic2NyaWJlcignZTg4NjdiYWEtNWVjMi00NWFlLTk5MzAtNGQ1Y2VhMThkMGQ2JywgcGF5bG9hZCk7XG4gICAgc2lub24uYXNzZXJ0LmNhbGxlZE9uY2VXaXRoRXhhY3RseShkb21haW5DbGllbnQucmVxdWVzdENvcHlGYWN0b3J5LCB7XG4gICAgICB1cmw6ICcvdXNlcnMvY3VycmVudC9jb25maWd1cmF0aW9uL3N1YnNjcmliZXJzLycgK1xuICAgICAgICAnZTg4NjdiYWEtNWVjMi00NWFlLTk5MzAtNGQ1Y2VhMThkMGQ2JyxcbiAgICAgIG1ldGhvZDogJ0RFTEVURScsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgICdhdXRoLXRva2VuJzogdG9rZW5cbiAgICAgIH0sXG4gICAgICBib2R5OiBwYXlsb2FkLFxuICAgICAganNvbjogdHJ1ZSxcbiAgICB9KTtcbiAgfSk7XG4gIFxuICAvKipcbiAgICogQHRlc3Qge1RyYWRpbmdDbGllbnQjcmVtb3ZlU3Vic2NyaWJlcn1cbiAgICovXG4gIGl0KCdzaG91bGQgbm90IHJlbW92ZSBDb3B5RmFjdG9yeSBzdWJzY3JpYmVyIHZpYSBBUEkgd2l0aCBhY2NvdW50IHRva2VuJywgYXN5bmMgKCkgPT4ge1xuICAgIGRvbWFpbkNsaWVudCA9IG5ldyBEb21haW5DbGllbnQoaHR0cENsaWVudCwgJ3Rva2VuJyk7XG4gICAgY29weUZhY3RvcnlDbGllbnQgPSBuZXcgQ29uZmlndXJhdGlvbkNsaWVudChkb21haW5DbGllbnQpO1xuICAgIHRyeSB7XG4gICAgICBhd2FpdCBjb3B5RmFjdG9yeUNsaWVudC5yZW1vdmVTdWJzY3JpYmVyKCd0ZXN0Jyk7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01ldGhvZEFjY2Vzc0Vycm9yIGV4cGVjdGVkJyk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGVycm9yLm5hbWUuc2hvdWxkLmVxdWFsKCdNZXRob2RBY2Nlc3NFcnJvcicpO1xuICAgICAgZXJyb3IubWVzc2FnZS5zaG91bGQuZXF1YWwoXG4gICAgICAgICdZb3UgY2FuIG5vdCBpbnZva2UgcmVtb3ZlU3Vic2NyaWJlciBtZXRob2QsIGJlY2F1c2UgeW91IGhhdmUgY29ubmVjdGVkIHdpdGggYWNjb3VudCBhY2Nlc3MgdG9rZW4uICcgK1xuICAgICAgICAgICAgICAnUGxlYXNlIHVzZSBBUEkgYWNjZXNzIHRva2VuIGZyb20gaHR0cHM6Ly9hcHAubWV0YWFwaS5jbG91ZC90b2tlbiBwYWdlIHRvIGludm9rZSB0aGlzIG1ldGhvZC4nXG4gICAgICApO1xuICAgIH1cbiAgfSk7XG5cbiAgLyoqXG4gICAqIEB0ZXN0IHtUcmFkaW5nQ2xpZW50I3JlbW92ZVN1YnNjcmlwdGlvbn1cbiAgICovXG4gIGl0KCdzaG91bGQgcmVtb3ZlIENvcHlGYWN0b3J5IHN1YnNjcmlwdGlvbiB2aWEgQVBJJywgYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IHBheWxvYWQgPSB7bW9kZTogJ3ByZXNlcnZlJywgcmVtb3ZlQWZ0ZXI6ICcyMDIwLTA4LTI0VDAwOjAwOjAwLjAwMFonfTtcbiAgICBhd2FpdCBjb3B5RmFjdG9yeUNsaWVudFxuICAgICAgLnJlbW92ZVN1YnNjcmlwdGlvbignZTg4NjdiYWEtNWVjMi00NWFlLTk5MzAtNGQ1Y2VhMThkMGQ2JywgJ0FCQ0QnLCBwYXlsb2FkKTtcbiAgICBzaW5vbi5hc3NlcnQuY2FsbGVkT25jZVdpdGhFeGFjdGx5KGRvbWFpbkNsaWVudC5yZXF1ZXN0Q29weUZhY3RvcnksIHtcbiAgICAgIHVybDogJy91c2Vycy9jdXJyZW50L2NvbmZpZ3VyYXRpb24vc3Vic2NyaWJlcnMvJyArXG4gICAgICAgICAgJ2U4ODY3YmFhLTVlYzItNDVhZS05OTMwLTRkNWNlYTE4ZDBkNi9zdWJzY3JpcHRpb25zL0FCQ0QnLFxuICAgICAgbWV0aG9kOiAnREVMRVRFJyxcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgJ2F1dGgtdG9rZW4nOiB0b2tlblxuICAgICAgfSxcbiAgICAgIGJvZHk6IHBheWxvYWQsXG4gICAgICBqc29uOiB0cnVlLFxuICAgIH0pO1xuICB9KTtcbiAgICBcbiAgLyoqXG4gICAqIEB0ZXN0IHtUcmFkaW5nQ2xpZW50I3JlbW92ZVN1YnNjcmlwdGlvbn1cbiAgICovXG4gIGl0KCdzaG91bGQgbm90IHJlbW92ZSBDb3B5RmFjdG9yeSBzdWJzY3JpcHRpb24gdmlhIEFQSSB3aXRoIGFjY291bnQgdG9rZW4nLCBhc3luYyAoKSA9PiB7XG4gICAgZG9tYWluQ2xpZW50ID0gbmV3IERvbWFpbkNsaWVudChodHRwQ2xpZW50LCAndG9rZW4nKTtcbiAgICBjb3B5RmFjdG9yeUNsaWVudCA9IG5ldyBDb25maWd1cmF0aW9uQ2xpZW50KGRvbWFpbkNsaWVudCk7XG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IGNvcHlGYWN0b3J5Q2xpZW50LnJlbW92ZVN1YnNjcmlwdGlvbigndGVzdCcsICdBQkNEJyk7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01ldGhvZEFjY2Vzc0Vycm9yIGV4cGVjdGVkJyk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGVycm9yLm5hbWUuc2hvdWxkLmVxdWFsKCdNZXRob2RBY2Nlc3NFcnJvcicpO1xuICAgICAgZXJyb3IubWVzc2FnZS5zaG91bGQuZXF1YWwoXG4gICAgICAgICdZb3UgY2FuIG5vdCBpbnZva2UgcmVtb3ZlU3Vic2NyaXB0aW9uIG1ldGhvZCwgYmVjYXVzZSB5b3UgaGF2ZSBjb25uZWN0ZWQgd2l0aCBhY2NvdW50IGFjY2VzcyB0b2tlbi4gJyArXG4gICAgICAgICAgJ1BsZWFzZSB1c2UgQVBJIGFjY2VzcyB0b2tlbiBmcm9tIGh0dHBzOi8vYXBwLm1ldGFhcGkuY2xvdWQvdG9rZW4gcGFnZSB0byBpbnZva2UgdGhpcyBtZXRob2QuJ1xuICAgICAgKTtcbiAgICB9XG4gIH0pO1xuXG59KTtcbiJdfQ==