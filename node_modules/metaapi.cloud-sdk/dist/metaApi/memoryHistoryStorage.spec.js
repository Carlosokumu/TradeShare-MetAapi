'use strict';

var _promise = require('babel-runtime/core-js/promise');

var _promise2 = _interopRequireDefault(_promise);

var _should = require('should');

var _should2 = _interopRequireDefault(_should);

var _sinon = require('sinon');

var _sinon2 = _interopRequireDefault(_sinon);

var _memoryHistoryStorage = require('./memoryHistoryStorage');

var _memoryHistoryStorage2 = _interopRequireDefault(_memoryHistoryStorage);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/**
 * @test {MemoryHistoryStorage}
 */
describe('MemoryHistoryStorage', () => {

  let storage;
  let sandbox;
  let clock;
  let realSetTimeout = setTimeout;
  let db = {
    loadHistory: () => {
      return { deals: [], historyOrders: [] };
    },
    clear: () => {},
    flush: () => {}
  };

  before(() => {
    sandbox = _sinon2.default.createSandbox();
  });

  beforeEach(async () => {
    storage = new _memoryHistoryStorage2.default();
    storage._historyDatabase = db;
    await storage.initialize('accountId', 'MetaApi');
    await storage.clear();
    storage.onConnected('vint-hill:1:ps-mpa-1', 1);
    clock = _sinon2.default.useFakeTimers();
  });

  afterEach(() => {
    sandbox.restore();
    clock.restore();
  });

  /**
   * @test {MemoryHistoryStorage#loadDataFromDisk}
   */
  it('should load data from the file manager', async () => {
    let testDeal = { id: '37863643', type: 'DEAL_TYPE_BALANCE', magic: 0, time: new Date(100), commission: 0,
      swap: 0, profit: 10000, platform: 'mt5', comment: 'Demo deposit 1' };
    let testOrder = { id: '61210463', type: 'ORDER_TYPE_SELL', state: 'ORDER_STATE_FILLED', symbol: 'AUDNZD', magic: 0,
      time: new Date(50), doneTime: new Date(100), currentPrice: 1, volume: 0.01,
      currentVolume: 0, positionId: '61206630', platform: 'mt5', comment: 'AS_AUDNZD_5YyM6KS7Fv:' };
    sandbox.stub(db, 'loadHistory').resolves({ deals: [testDeal], historyOrders: [testOrder] });
    await storage.initialize('accountId', 'MetaApi');
    await new _promise2.default(res => realSetTimeout(res, 50));
    storage.deals.should.match([testDeal]);
    storage.historyOrders.should.match([testOrder]);
  });

  /**
   * @test {MemoryHistoryStorage#updateDiskStorage}
   */
  it('should clear db storage', async () => {
    sandbox.stub(db, 'clear').resolves();
    storage.onDealAdded('vint-hill:1:ps-mpa-1', { id: '1', time: new Date('2020-01-01T00:00:00.000Z'), type: 'DEAL_TYPE_SELL' });
    storage.onHistoryOrderAdded('vint-hill:1:ps-mpa-1', { id: '1', doneTime: new Date('2020-01-01T00:00:00.000Z'),
      type: 'ORDER_TYPE_SELL' });
    await storage.clear();
    _sinon2.default.assert.match(storage.deals, []);
    _sinon2.default.assert.match(storage.historyOrders, []);
    _sinon2.default.assert.calledWith(db.clear, 'accountId', 'MetaApi');
  });

  /**
   * @test {MemoryHistoryStorage#lastHistoryOrderTime}
   */
  it('should return last history order time', () => {
    storage.onHistoryOrderAdded('vint-hill:1:ps-mpa-1', { id: '1' });
    storage.onHistoryOrderAdded('vint-hill:1:ps-mpa-1', { id: '2', doneTime: new Date('2020-01-01T00:00:00.000Z') });
    storage.onHistoryOrderAdded('vint-hill:1:ps-mpa-1', { id: '3', doneTime: new Date('2020-01-02T00:00:00.000Z') });
    storage.lastHistoryOrderTime().should.match(new Date('2020-01-02T00:00:00.000Z'));
  });

  /**
   * @test {MemoryHistoryStorage#lastDealTime}
   */
  it('should return last history deal time', () => {
    storage.onDealAdded('vint-hill:1:ps-mpa-1', { id: '1' });
    storage.onDealAdded('vint-hill:1:ps-mpa-1', { id: '2', time: new Date('2020-01-01T00:00:00.000Z') });
    storage.onDealAdded('vint-hill:1:ps-mpa-1', { id: '3', time: new Date('2020-01-02T00:00:00.000Z') });
    storage.lastDealTime().should.match(new Date('2020-01-02T00:00:00.000Z'));
  });

  /**
   * @test {MemoryHistoryStorage#deals}
   */
  it('should return saved deals', () => {
    storage.onDealAdded('vint-hill:1:ps-mpa-1', { id: '1', positionId: '1', time: new Date('2020-01-01T00:00:00.000Z'),
      type: 'DEAL_TYPE_SELL' });
    storage.onDealAdded('vint-hill:1:ps-mpa-1', { id: '7', time: new Date('2020-05-01T00:00:00.000Z'), type: 'DEAL_TYPE_BUY' });
    storage.onDealAdded('vint-hill:1:ps-mpa-1', { id: '8', time: new Date('2020-02-01T00:00:00.000Z'), type: 'DEAL_TYPE_SELL' });
    storage.onDealAdded('vint-hill:1:ps-mpa-1', { id: '6', time: new Date('2020-10-01T00:00:00.000Z'), type: 'DEAL_TYPE_BUY' });
    storage.onDealAdded('vint-hill:1:ps-mpa-1', { id: '4', time: new Date('2020-02-01T00:00:00.000Z'), type: 'DEAL_TYPE_SELL' });
    storage.onDealAdded('vint-hill:1:ps-mpa-1', { id: '5', time: new Date('2020-06-01T00:00:00.000Z'), type: 'DEAL_TYPE_BUY' });
    storage.onDealAdded('vint-hill:1:ps-mpa-1', { id: '11', type: 'DEAL_TYPE_SELL' });
    storage.onDealAdded('vint-hill:1:ps-mpa-1', { id: '3', time: new Date('2020-09-01T00:00:00.000Z'), type: 'DEAL_TYPE_BUY' });
    storage.onDealAdded('vint-hill:1:ps-mpa-1', { id: '5', time: new Date('2020-06-01T00:00:00.000Z'), type: 'DEAL_TYPE_BUY' });
    storage.onDealAdded('vint-hill:1:ps-mpa-1', { id: '2', positionId: '1', time: new Date('2020-08-01T00:00:00.000Z'),
      type: 'DEAL_TYPE_SELL' });
    storage.onDealAdded('vint-hill:1:ps-mpa-1', { id: '10', type: 'DEAL_TYPE_SELL' });
    storage.onDealAdded('vint-hill:1:ps-mpa-1', { id: '12', type: 'DEAL_TYPE_BUY' });
    storage.deals.should.match([{ id: '10', type: 'DEAL_TYPE_SELL' }, { id: '11', type: 'DEAL_TYPE_SELL' }, { id: '12', type: 'DEAL_TYPE_BUY' }, { id: '1', positionId: '1', time: new Date('2020-01-01T00:00:00.000Z'), type: 'DEAL_TYPE_SELL' }, { id: '4', time: new Date('2020-02-01T00:00:00.000Z'), type: 'DEAL_TYPE_SELL' }, { id: '8', time: new Date('2020-02-01T00:00:00.000Z'), type: 'DEAL_TYPE_SELL' }, { id: '7', time: new Date('2020-05-01T00:00:00.000Z'), type: 'DEAL_TYPE_BUY' }, { id: '5', time: new Date('2020-06-01T00:00:00.000Z'), type: 'DEAL_TYPE_BUY' }, { id: '2', positionId: '1', time: new Date('2020-08-01T00:00:00.000Z'), type: 'DEAL_TYPE_SELL' }, { id: '3', time: new Date('2020-09-01T00:00:00.000Z'), type: 'DEAL_TYPE_BUY' }, { id: '6', time: new Date('2020-10-01T00:00:00.000Z'), type: 'DEAL_TYPE_BUY' }]);
    storage.getDealsByTicket(1).should.match([{ id: '1', positionId: '1', time: new Date('2020-01-01T00:00:00.000Z'), type: 'DEAL_TYPE_SELL' }]);
    storage.getDealsByPosition(1).should.match([{ id: '1', positionId: '1', time: new Date('2020-01-01T00:00:00.000Z'), type: 'DEAL_TYPE_SELL' }, { id: '2', positionId: '1', time: new Date('2020-08-01T00:00:00.000Z'), type: 'DEAL_TYPE_SELL' }]);
    storage.getDealsByTimeRange(new Date('2020-08-01T00:00:00.000Z'), new Date('2020-09-01T00:00:00.000Z')).should.match([{ id: '2', positionId: '1', time: new Date('2020-08-01T00:00:00.000Z'), type: 'DEAL_TYPE_SELL' }, { id: '3', time: new Date('2020-09-01T00:00:00.000Z'), type: 'DEAL_TYPE_BUY' }]);
  });

  /**
   * @test {MemoryHistoryStorage#historyOrders}
   */
  it('should return saved historyOrders', () => {
    storage.onHistoryOrderAdded('vint-hill:1:ps-mpa-1', { id: '1', positionId: '1', doneTime: new Date('2020-01-01T00:00:00.000Z'), type: 'ORDER_TYPE_SELL' });
    storage.onHistoryOrderAdded('vint-hill:1:ps-mpa-1', { id: '7', doneTime: new Date('2020-05-01T00:00:00.000Z'),
      type: 'ORDER_TYPE_BUY' });
    storage.onHistoryOrderAdded('vint-hill:1:ps-mpa-1', { id: '8', doneTime: new Date('2020-02-01T00:00:00.000Z'),
      type: 'ORDER_TYPE_SELL' });
    storage.onHistoryOrderAdded('vint-hill:1:ps-mpa-1', { id: '6', doneTime: new Date('2020-10-01T00:00:00.000Z'),
      type: 'ORDER_TYPE_BUY' });
    storage.onHistoryOrderAdded('vint-hill:1:ps-mpa-1', { id: '4', doneTime: new Date('2020-02-01T00:00:00.000Z'),
      type: 'ORDER_TYPE_SELL' });
    storage.onHistoryOrderAdded('vint-hill:1:ps-mpa-1', { id: '5', doneTime: new Date('2020-06-01T00:00:00.000Z'),
      type: 'ORDER_TYPE_BUY' });
    storage.onHistoryOrderAdded('vint-hill:1:ps-mpa-1', { id: '11', type: 'ORDER_TYPE_SELL' });
    storage.onHistoryOrderAdded('vint-hill:1:ps-mpa-1', { id: '3', doneTime: new Date('2020-09-01T00:00:00.000Z'),
      type: 'ORDER_TYPE_BUY' });
    storage.onHistoryOrderAdded('vint-hill:1:ps-mpa-1', { id: '5', doneTime: new Date('2020-06-01T00:00:00.000Z'),
      type: 'ORDER_TYPE_BUY' });
    storage.onHistoryOrderAdded('vint-hill:1:ps-mpa-1', { id: '2', positionId: '1', doneTime: new Date('2020-08-01T00:00:00.000Z'), type: 'ORDER_TYPE_SELL' });
    storage.onHistoryOrderAdded('vint-hill:1:ps-mpa-1', { id: '10', type: 'ORDER_TYPE_SELL' });
    storage.onHistoryOrderAdded('vint-hill:1:ps-mpa-1', { id: '12', type: 'ORDER_TYPE_BUY' });
    storage.historyOrders.should.match([{ id: '10', type: 'ORDER_TYPE_SELL' }, { id: '11', type: 'ORDER_TYPE_SELL' }, { id: '12', type: 'ORDER_TYPE_BUY' }, { id: '1', positionId: '1', doneTime: new Date('2020-01-01T00:00:00.000Z'), type: 'ORDER_TYPE_SELL' }, { id: '4', doneTime: new Date('2020-02-01T00:00:00.000Z'), type: 'ORDER_TYPE_SELL' }, { id: '8', doneTime: new Date('2020-02-01T00:00:00.000Z'), type: 'ORDER_TYPE_SELL' }, { id: '7', doneTime: new Date('2020-05-01T00:00:00.000Z'), type: 'ORDER_TYPE_BUY' }, { id: '5', doneTime: new Date('2020-06-01T00:00:00.000Z'), type: 'ORDER_TYPE_BUY' }, { id: '2', positionId: '1', doneTime: new Date('2020-08-01T00:00:00.000Z'), type: 'ORDER_TYPE_SELL' }, { id: '3', doneTime: new Date('2020-09-01T00:00:00.000Z'), type: 'ORDER_TYPE_BUY' }, { id: '6', doneTime: new Date('2020-10-01T00:00:00.000Z'), type: 'ORDER_TYPE_BUY' }]);
    storage.getHistoryOrdersByTicket(1).should.match([{ id: '1', positionId: '1', doneTime: new Date('2020-01-01T00:00:00.000Z'), type: 'ORDER_TYPE_SELL' }]);
    storage.getHistoryOrdersByPosition(1).should.match([{ id: '1', positionId: '1', doneTime: new Date('2020-01-01T00:00:00.000Z'), type: 'ORDER_TYPE_SELL' }, { id: '2', positionId: '1', doneTime: new Date('2020-08-01T00:00:00.000Z'), type: 'ORDER_TYPE_SELL' }]);
    storage.getHistoryOrdersByTimeRange(new Date('2020-08-01T00:00:00.000Z'), new Date('2020-09-01T00:00:00.000Z')).should.match([{ id: '2', positionId: '1', doneTime: new Date('2020-08-01T00:00:00.000Z'), type: 'ORDER_TYPE_SELL' }, { id: '3', doneTime: new Date('2020-09-01T00:00:00.000Z'), type: 'ORDER_TYPE_BUY' }]);
  });

  /**
   * @test {MemoryHistoryStorage#orderSynchronizationFinished}
   */
  it('should return saved order synchronization status', async () => {
    storage.orderSynchronizationFinished.should.be.false();
    await storage.onHistoryOrdersSynchronized(1);
    storage.orderSynchronizationFinished.should.be.true();
  });

  /**
   * @test {MemoryHistoryStorage#dealSynchronizationFinished}
   */
  it('should return saved deal synchronization status', async () => {
    storage.dealSynchronizationFinished.should.be.false();
    await storage.onDealsSynchronized(1);
    storage.dealSynchronizationFinished.should.be.true();
  });

  describe('flush', () => {

    /**
     * @test {MemoryHistoryStorage#updateDiskStorage}
     */
    it('should flush db when synchronization ends', async () => {
      sandbox.stub(db, 'flush').resolves();
      storage.onHistoryOrderAdded('vint-hill:1:ps-mpa-1', { id: '1', positionId: '1',
        doneTime: new Date('2020-01-01T00:00:00.000Z'), type: 'ORDER_TYPE_SELL' });
      storage.onDealAdded('vint-hill:1:ps-mpa-1', { id: '1', positionId: '1', time: new Date('2020-01-01T00:00:00.000Z'),
        type: 'DEAL_TYPE_SELL' });
      await storage.onDealsSynchronized(1);
      _sinon2.default.assert.calledWith(db.flush, 'accountId', 'MetaApi', [{ id: '1', positionId: '1', doneTime: new Date('2020-01-01T00:00:00.000Z'), type: 'ORDER_TYPE_SELL' }], [{ id: '1', positionId: '1', time: new Date('2020-01-01T00:00:00.000Z'), type: 'DEAL_TYPE_SELL' }]);
    });

    /**
     * @test {MemoryHistoryStorage#updateDiskStorage}
     */
    it('should flush db when new record arrives', async () => {
      await storage.onDealsSynchronized(1);
      sandbox.stub(db, 'flush').resolves();
      await storage.onHistoryOrderAdded('vint-hill:1:ps-mpa-1', { id: '1', positionId: '1',
        doneTime: new Date('2020-01-01T00:00:00.000Z'), type: 'ORDER_TYPE_SELL' });
      clock.tick(5500);
      await new _promise2.default(res => realSetTimeout(res, 50));
      _sinon2.default.assert.calledWith(db.flush, 'accountId', 'MetaApi', [{ id: '1', positionId: '1',
        doneTime: new Date('2020-01-01T00:00:00.000Z'), type: 'ORDER_TYPE_SELL' }], []);
    });

    /**
     * @test {MemoryHistoryStorage#updateDiskStorage}
     */
    it('should throttle db flush', async () => {
      await storage.onDealsSynchronized(1);
      sandbox.stub(db, 'flush').resolves();
      await storage.onHistoryOrderAdded('vint-hill:1:ps-mpa-1', { id: '1', positionId: '1',
        doneTime: new Date('2020-01-01T00:00:00.000Z'), type: 'ORDER_TYPE_SELL' });
      clock.tick(4500);
      await new _promise2.default(res => realSetTimeout(res, 50));
      await storage.onHistoryOrderAdded('vint-hill:1:ps-mpa-1', { id: '2', positionId: '1',
        doneTime: new Date('2020-01-01T00:00:00.000Z'), type: 'ORDER_TYPE_SELL' });
      clock.tick(4500);
      await new _promise2.default(res => realSetTimeout(res, 50));
      _sinon2.default.assert.notCalled(db.flush);
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL2xpYi9tZXRhQXBpL21lbW9yeUhpc3RvcnlTdG9yYWdlLnNwZWMuZXM2Il0sIm5hbWVzIjpbImRlc2NyaWJlIiwic3RvcmFnZSIsInNhbmRib3giLCJjbG9jayIsInJlYWxTZXRUaW1lb3V0Iiwic2V0VGltZW91dCIsImRiIiwibG9hZEhpc3RvcnkiLCJkZWFscyIsImhpc3RvcnlPcmRlcnMiLCJjbGVhciIsImZsdXNoIiwiYmVmb3JlIiwic2lub24iLCJjcmVhdGVTYW5kYm94IiwiYmVmb3JlRWFjaCIsIk1lbW9yeUhpc3RvcnlTdG9yYWdlIiwiX2hpc3RvcnlEYXRhYmFzZSIsImluaXRpYWxpemUiLCJvbkNvbm5lY3RlZCIsInVzZUZha2VUaW1lcnMiLCJhZnRlckVhY2giLCJyZXN0b3JlIiwiaXQiLCJ0ZXN0RGVhbCIsImlkIiwidHlwZSIsIm1hZ2ljIiwidGltZSIsIkRhdGUiLCJjb21taXNzaW9uIiwic3dhcCIsInByb2ZpdCIsInBsYXRmb3JtIiwiY29tbWVudCIsInRlc3RPcmRlciIsInN0YXRlIiwic3ltYm9sIiwiZG9uZVRpbWUiLCJjdXJyZW50UHJpY2UiLCJ2b2x1bWUiLCJjdXJyZW50Vm9sdW1lIiwicG9zaXRpb25JZCIsInN0dWIiLCJyZXNvbHZlcyIsInJlcyIsInNob3VsZCIsIm1hdGNoIiwib25EZWFsQWRkZWQiLCJvbkhpc3RvcnlPcmRlckFkZGVkIiwiYXNzZXJ0IiwiY2FsbGVkV2l0aCIsImxhc3RIaXN0b3J5T3JkZXJUaW1lIiwibGFzdERlYWxUaW1lIiwiZ2V0RGVhbHNCeVRpY2tldCIsImdldERlYWxzQnlQb3NpdGlvbiIsImdldERlYWxzQnlUaW1lUmFuZ2UiLCJnZXRIaXN0b3J5T3JkZXJzQnlUaWNrZXQiLCJnZXRIaXN0b3J5T3JkZXJzQnlQb3NpdGlvbiIsImdldEhpc3RvcnlPcmRlcnNCeVRpbWVSYW5nZSIsIm9yZGVyU3luY2hyb25pemF0aW9uRmluaXNoZWQiLCJiZSIsImZhbHNlIiwib25IaXN0b3J5T3JkZXJzU3luY2hyb25pemVkIiwidHJ1ZSIsImRlYWxTeW5jaHJvbml6YXRpb25GaW5pc2hlZCIsIm9uRGVhbHNTeW5jaHJvbml6ZWQiLCJ0aWNrIiwibm90Q2FsbGVkIl0sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7O0FBRUE7Ozs7QUFDQTs7OztBQUNBOzs7Ozs7QUFFQTs7O0FBR0FBLFNBQVMsc0JBQVQsRUFBaUMsTUFBTTs7QUFFckMsTUFBSUMsT0FBSjtBQUNBLE1BQUlDLE9BQUo7QUFDQSxNQUFJQyxLQUFKO0FBQ0EsTUFBSUMsaUJBQWlCQyxVQUFyQjtBQUNBLE1BQUlDLEtBQUs7QUFDUEMsaUJBQWEsTUFBTTtBQUNqQixhQUFPLEVBQUNDLE9BQU8sRUFBUixFQUFZQyxlQUFlLEVBQTNCLEVBQVA7QUFDRCxLQUhNO0FBSVBDLFdBQU8sTUFBTSxDQUFFLENBSlI7QUFLUEMsV0FBTyxNQUFNLENBQUU7QUFMUixHQUFUOztBQVFBQyxTQUFPLE1BQU07QUFDWFYsY0FBVVcsZ0JBQU1DLGFBQU4sRUFBVjtBQUNELEdBRkQ7O0FBSUFDLGFBQVcsWUFBWTtBQUNyQmQsY0FBVSxJQUFJZSw4QkFBSixFQUFWO0FBQ0FmLFlBQVFnQixnQkFBUixHQUEyQlgsRUFBM0I7QUFDQSxVQUFNTCxRQUFRaUIsVUFBUixDQUFtQixXQUFuQixFQUFnQyxTQUFoQyxDQUFOO0FBQ0EsVUFBTWpCLFFBQVFTLEtBQVIsRUFBTjtBQUNBVCxZQUFRa0IsV0FBUixDQUFvQixzQkFBcEIsRUFBNEMsQ0FBNUM7QUFDQWhCLFlBQVFVLGdCQUFNTyxhQUFOLEVBQVI7QUFDRCxHQVBEOztBQVNBQyxZQUFVLE1BQU07QUFDZG5CLFlBQVFvQixPQUFSO0FBQ0FuQixVQUFNbUIsT0FBTjtBQUNELEdBSEQ7O0FBS0E7OztBQUdBQyxLQUFHLHdDQUFILEVBQTZDLFlBQVk7QUFDdkQsUUFBSUMsV0FBVyxFQUFDQyxJQUFHLFVBQUosRUFBZ0JDLE1BQUssbUJBQXJCLEVBQTBDQyxPQUFNLENBQWhELEVBQW1EQyxNQUFNLElBQUlDLElBQUosQ0FBUyxH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Y3QnO1xuXG5pbXBvcnQgc2hvdWxkIGZyb20gJ3Nob3VsZCc7XG5pbXBvcnQgc2lub24gZnJvbSAnc2lub24nO1xuaW1wb3J0IE1lbW9yeUhpc3RvcnlTdG9yYWdlIGZyb20gJy4vbWVtb3J5SGlzdG9yeVN0b3JhZ2UnO1xuXG4vKipcbiAqIEB0ZXN0IHtNZW1vcnlIaXN0b3J5U3RvcmFnZX1cbiAqL1xuZGVzY3JpYmUoJ01lbW9yeUhpc3RvcnlTdG9yYWdlJywgKCkgPT4ge1xuXG4gIGxldCBzdG9yYWdlO1xuICBsZXQgc2FuZGJveDtcbiAgbGV0IGNsb2NrO1xuICBsZXQgcmVhbFNldFRpbWVvdXQgPSBzZXRUaW1lb3V0O1xuICBsZXQgZGIgPSB7XG4gICAgbG9hZEhpc3Rvcnk6ICgpID0+IHtcbiAgICAgIHJldHVybiB7ZGVhbHM6IFtdLCBoaXN0b3J5T3JkZXJzOiBbXX07XG4gICAgfSxcbiAgICBjbGVhcjogKCkgPT4ge30sXG4gICAgZmx1c2g6ICgpID0+IHt9XG4gIH07XG5cbiAgYmVmb3JlKCgpID0+IHtcbiAgICBzYW5kYm94ID0gc2lub24uY3JlYXRlU2FuZGJveCgpO1xuICB9KTtcblxuICBiZWZvcmVFYWNoKGFzeW5jICgpID0+IHtcbiAgICBzdG9yYWdlID0gbmV3IE1lbW9yeUhpc3RvcnlTdG9yYWdlKCk7XG4gICAgc3RvcmFnZS5faGlzdG9yeURhdGFiYXNlID0gZGI7XG4gICAgYXdhaXQgc3RvcmFnZS5pbml0aWFsaXplKCdhY2NvdW50SWQnLCAnTWV0YUFwaScpO1xuICAgIGF3YWl0IHN0b3JhZ2UuY2xlYXIoKTtcbiAgICBzdG9yYWdlLm9uQ29ubmVjdGVkKCd2aW50LWhpbGw6MTpwcy1tcGEtMScsIDEpO1xuICAgIGNsb2NrID0gc2lub24udXNlRmFrZVRpbWVycygpO1xuICB9KTtcblxuICBhZnRlckVhY2goKCkgPT4ge1xuICAgIHNhbmRib3gucmVzdG9yZSgpO1xuICAgIGNsb2NrLnJlc3RvcmUoKTtcbiAgfSk7XG4gIFxuICAvKipcbiAgICogQHRlc3Qge01lbW9yeUhpc3RvcnlTdG9yYWdlI2xvYWREYXRhRnJvbURpc2t9XG4gICAqL1xuICBpdCgnc2hvdWxkIGxvYWQgZGF0YSBmcm9tIHRoZSBmaWxlIG1hbmFnZXInLCBhc3luYyAoKSA9PiB7XG4gICAgbGV0IHRlc3REZWFsID0ge2lkOiczNzg2MzY0MycsIHR5cGU6J0RFQUxfVFlQRV9CQUxBTkNFJywgbWFnaWM6MCwgdGltZTogbmV3IERhdGUoMTAwKSwgY29tbWlzc2lvbjowLFxuICAgICAgc3dhcDowLCBwcm9maXQ6MTAwMDAsIHBsYXRmb3JtOidtdDUnLCBjb21tZW50OidEZW1vIGRlcG9zaXQgMSd9O1xuICAgIGxldCB0ZXN0T3JkZXIgPSB7aWQ6JzYxMjEwNDYzJywgdHlwZTonT1JERVJfVFlQRV9TRUxMJywgc3RhdGU6J09SREVSX1NUQVRFX0ZJTExFRCcsIHN5bWJvbDonQVVETlpEJywgbWFnaWM6MCxcbiAgICAgIHRpbWU6IG5ldyBEYXRlKDUwKSwgZG9uZVRpbWU6IG5ldyBEYXRlKDEwMCksIGN1cnJlbnRQcmljZToxLCB2b2x1bWU6MC4wMSxcbiAgICAgIGN1cnJlbnRWb2x1bWU6MCwgcG9zaXRpb25JZDonNjEyMDY2MzAnLCBwbGF0Zm9ybTonbXQ1JywgY29tbWVudDonQVNfQVVETlpEXzVZeU02S1M3RnY6J307XG4gICAgc2FuZGJveC5zdHViKGRiLCAnbG9hZEhpc3RvcnknKS5yZXNvbHZlcyh7ZGVhbHM6IFt0ZXN0RGVhbF0sIGhpc3RvcnlPcmRlcnM6IFt0ZXN0T3JkZXJdfSk7XG4gICAgYXdhaXQgc3RvcmFnZS5pbml0aWFsaXplKCdhY2NvdW50SWQnLCAnTWV0YUFwaScpO1xuICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlcyA9PiByZWFsU2V0VGltZW91dChyZXMsIDUwKSk7XG4gICAgc3RvcmFnZS5kZWFscy5zaG91bGQubWF0Y2goW3Rlc3REZWFsXSk7XG4gICAgc3RvcmFnZS5oaXN0b3J5T3JkZXJzLnNob3VsZC5tYXRjaChbdGVzdE9yZGVyXSk7XG4gIH0pO1xuXG4gIC8qKlxuICAgKiBAdGVzdCB7TWVtb3J5SGlzdG9yeVN0b3JhZ2UjdXBkYXRlRGlza1N0b3JhZ2V9XG4gICAqL1xuICBpdCgnc2hvdWxkIGNsZWFyIGRiIHN0b3JhZ2UnLCBhc3luYyAoKSA9PiB7XG4gICAgc2FuZGJveC5zdHViKGRiLCAnY2xlYXInKS5yZXNvbHZlcygpO1xuICAgIHN0b3JhZ2Uub25EZWFsQWRkZWQoJ3ZpbnQtaGlsbDoxOnBzLW1wYS0xJywgXG4gICAgICB7aWQ6ICcxJywgdGltZTogbmV3IERhdGUoJzIwMjAtMDEtMDFUMDA6MDA6MDAuMDAwWicpLCB0eXBlOiAnREVBTF9UWVBFX1NFTEwnfSk7XG4gICAgc3RvcmFnZS5vbkhpc3RvcnlPcmRlckFkZGVkKCd2aW50LWhpbGw6MTpwcy1tcGEtMScsIHtpZDogJzEnLCBkb25lVGltZTogbmV3IERhdGUoJzIwMjAtMDEtMDFUMDA6MDA6MDAuMDAwWicpLFxuICAgICAgdHlwZTogJ09SREVSX1RZUEVfU0VMTCd9KTtcbiAgICBhd2FpdCBzdG9yYWdlLmNsZWFyKCk7XG4gICAgc2lub24uYXNzZXJ0Lm1hdGNoKHN0b3JhZ2UuZGVhbHMsIFtdKTtcbiAgICBzaW5vbi5hc3NlcnQubWF0Y2goc3RvcmFnZS5oaXN0b3J5T3JkZXJzLCBbXSk7XG4gICAgc2lub24uYXNzZXJ0LmNhbGxlZFdpdGgoZGIuY2xlYXIsICdhY2NvdW50SWQnLCAnTWV0YUFwaScpO1xuICB9KTtcblxuICAvKipcbiAgICogQHRlc3Qge01lbW9yeUhpc3RvcnlTdG9yYWdlI2xhc3RIaXN0b3J5T3JkZXJUaW1lfVxuICAgKi9cbiAgaXQoJ3Nob3VsZCByZXR1cm4gbGFzdCBoaXN0b3J5IG9yZGVyIHRpbWUnLCAoKSA9PiB7XG4gICAgc3RvcmFnZS5vbkhpc3RvcnlPcmRlckFkZGVkKCd2aW50LWhpbGw6MTpwcy1tcGEtMScsIHtpZDogJzEnfSk7XG4gICAgc3RvcmFnZS5vbkhpc3RvcnlPcmRlckFkZGVkKCd2aW50LWhpbGw6MTpwcy1tcGEtMScsIHtpZDogJzInLCBkb25lVGltZTogbmV3IERhdGUoJzIwMjAtMDEtMDFUMDA6MDA6MDAuMDAwWicpfSk7XG4gICAgc3RvcmFnZS5vbkhpc3RvcnlPcmRlckFkZGVkKCd2aW50LWhpbGw6MTpwcy1tcGEtMScsIHtpZDogJzMnLCBkb25lVGltZTogbmV3IERhdGUoJzIwMjAtMDEtMDJUMDA6MDA6MDAuMDAwWicpfSk7XG4gICAgc3RvcmFnZS5sYXN0SGlzdG9yeU9yZGVyVGltZSgpLnNob3VsZC5tYXRjaChuZXcgRGF0ZSgnMjAyMC0wMS0wMlQwMDowMDowMC4wMDBaJykpO1xuICB9KTtcblxuICAvKipcbiAgICogQHRlc3Qge01lbW9yeUhpc3RvcnlTdG9yYWdlI2xhc3REZWFsVGltZX1cbiAgICovXG4gIGl0KCdzaG91bGQgcmV0dXJuIGxhc3QgaGlzdG9yeSBkZWFsIHRpbWUnLCAoKSA9PiB7XG4gICAgc3RvcmFnZS5vbkRlYWxBZGRlZCgndmludC1oaWxsOjE6cHMtbXBhLTEnLCB7aWQ6ICcxJ30pO1xuICAgIHN0b3JhZ2Uub25EZWFsQWRkZWQoJ3ZpbnQtaGlsbDoxOnBzLW1wYS0xJywge2lkOiAnMicsIHRpbWU6IG5ldyBEYXRlKCcyMDIwLTAxLTAxVDAwOjAwOjAwLjAwMFonKX0pO1xuICAgIHN0b3JhZ2Uub25EZWFsQWRkZWQoJ3ZpbnQtaGlsbDoxOnBzLW1wYS0xJywge2lkOiAnMycsIHRpbWU6IG5ldyBEYXRlKCcyMDIwLTAxLTAyVDAwOjAwOjAwLjAwMFonKX0pO1xuICAgIHN0b3JhZ2UubGFzdERlYWxUaW1lKCkuc2hvdWxkLm1hdGNoKG5ldyBEYXRlKCcyMDIwLTAxLTAyVDAwOjAwOjAwLjAwMFonKSk7XG4gIH0pO1xuXG4gIC8qKlxuICAgKiBAdGVzdCB7TWVtb3J5SGlzdG9yeVN0b3JhZ2UjZGVhbHN9XG4gICAqL1xuICBpdCgnc2hvdWxkIHJldHVybiBzYXZlZCBkZWFscycsICgpID0+IHtcbiAgICBzdG9yYWdlLm9uRGVhbEFkZGVkKCd2aW50LWhpbGw6MTpwcy1tcGEtMScsIHtpZDogJzEnLCBwb3NpdGlvbklkOiAnMScsIHRpbWU6IG5ldyBEYXRlKCcyMDIwLTAxLTAxVDAwOjAwOjAwLjAwMFonKSxcbiAgICAgIHR5cGU6ICdERUFMX1RZUEVfU0VMTCd9KTtcbiAgICBzdG9yYWdlLm9uRGVhbEFkZGVkKCd2aW50LWhpbGw6MTpwcy1tcGEtMScsIFxuICAgICAge2lkOiAnNycsIHRpbWU6IG5ldyBEYXRlKCcyMDIwLTA1LTAxVDAwOjAwOjAwLjAwMFonKSwgdHlwZTogJ0RFQUxfVFlQRV9CVVknfSk7XG4gICAgc3RvcmFnZS5vbkRlYWxBZGRlZCgndmludC1oaWxsOjE6cHMtbXBhLTEnLCBcbiAgICAgIHtpZDogJzgnLCB0aW1lOiBuZXcgRGF0ZSgnMjAyMC0wMi0wMVQwMDowMDowMC4wMDBaJyksIHR5cGU6ICdERUFMX1RZUEVfU0VMTCd9KTtcbiAgICBzdG9yYWdlLm9uRGVhbEFkZGVkKCd2aW50LWhpbGw6MTpwcy1tcGEtMScsIFxuICAgICAge2lkOiAnNicsIHRpbWU6IG5ldyBEYXRlKCcyMDIwLTEwLTAxVDAwOjAwOjAwLjAwMFonKSwgdHlwZTogJ0RFQUxfVFlQRV9CVVknfSk7XG4gICAgc3RvcmFnZS5vbkRlYWxBZGRlZCgndmludC1oaWxsOjE6cHMtbXBhLTEnLCBcbiAgICAgIHtpZDogJzQnLCB0aW1lOiBuZXcgRGF0ZSgnMjAyMC0wMi0wMVQwMDowMDowMC4wMDBaJyksIHR5cGU6ICdERUFMX1RZUEVfU0VMTCd9KTtcbiAgICBzdG9yYWdlLm9uRGVhbEFkZGVkKCd2aW50LWhpbGw6MTpwcy1tcGEtMScsIFxuICAgICAge2lkOiAnNScsIHRpbWU6IG5ldyBEYXRlKCcyMDIwLTA2LTAxVDAwOjAwOjAwLjAwMFonKSwgdHlwZTogJ0RFQUxfVFlQRV9CVVknfSk7XG4gICAgc3RvcmFnZS5vbkRlYWxBZGRlZCgndmludC1oaWxsOjE6cHMtbXBhLTEnLCB7aWQ6ICcxMScsIHR5cGU6ICdERUFMX1RZUEVfU0VMTCd9KTtcbiAgICBzdG9yYWdlLm9uRGVhbEFkZGVkKCd2aW50LWhpbGw6MTpwcy1tcGEtMScsIFxuICAgICAge2lkOiAnMycsIHRpbWU6IG5ldyBEYXRlKCcyMDIwLTA5LTAxVDAwOjAwOjAwLjAwMFonKSwgdHlwZTogJ0RFQUxfVFlQRV9CVVknfSk7XG4gICAgc3RvcmFnZS5vbkRlYWxBZGRlZCgndmludC1oaWxsOjE6cHMtbXBhLTEnLCBcbiAgICAgIHtpZDogJzUnLCB0aW1lOiBuZXcgRGF0ZSgnMjAyMC0wNi0wMVQwMDowMDowMC4wMDBaJyksIHR5cGU6ICdERUFMX1RZUEVfQlVZJ30pO1xuICAgIHN0b3JhZ2Uub25EZWFsQWRkZWQoJ3ZpbnQtaGlsbDoxOnBzLW1wYS0xJywge2lkOiAnMicsIHBvc2l0aW9uSWQ6ICcxJywgdGltZTogbmV3IERhdGUoJzIwMjAtMDgtMDFUMDA6MDA6MDAuMDAwWicpLFxuICAgICAgdHlwZTogJ0RFQUxfVFlQRV9TRUxMJ30pO1xuICAgIHN0b3JhZ2Uub25EZWFsQWRkZWQoJ3ZpbnQtaGlsbDoxOnBzLW1wYS0xJywge2lkOiAnMTAnLCB0eXBlOiAnREVBTF9UWVBFX1NFTEwnfSk7XG4gICAgc3RvcmFnZS5vbkRlYWxBZGRlZCgndmludC1oaWxsOjE6cHMtbXBhLTEnLCB7aWQ6ICcxMicsIHR5cGU6ICdERUFMX1RZUEVfQlVZJ30pO1xuICAgIHN0b3JhZ2UuZGVhbHMuc2hvdWxkLm1hdGNoKFtcbiAgICAgIHtpZDogJzEwJywgdHlwZTogJ0RFQUxfVFlQRV9TRUxMJ30sXG4gICAgICB7aWQ6ICcxMScsIHR5cGU6ICdERUFMX1RZUEVfU0VMTCd9LFxuICAgICAge2lkOiAnMTInLCB0eXBlOiAnREVBTF9UWVBFX0JVWSd9LFxuICAgICAge2lkOiAnMScsIHBvc2l0aW9uSWQ6ICcxJywgdGltZTogbmV3IERhdGUoJzIwMjAtMDEtMDFUMDA6MDA6MDAuMDAwWicpLCB0eXBlOiAnREVBTF9UWVBFX1NFTEwnfSxcbiAgICAgIHtpZDogJzQnLCB0aW1lOiBuZXcgRGF0ZSgnMjAyMC0wMi0wMVQwMDowMDowMC4wMDBaJyksIHR5cGU6ICdERUFMX1RZUEVfU0VMTCd9LFxuICAgICAge2lkOiAnOCcsIHRpbWU6IG5ldyBEYXRlKCcyMDIwLTAyLTAxVDAwOjAwOjAwLjAwMFonKSwgdHlwZTogJ0RFQUxfVFlQRV9TRUxMJ30sXG4gICAgICB7aWQ6ICc3JywgdGltZTogbmV3IERhdGUoJzIwMjAtMDUtMDFUMDA6MDA6MDAuMDAwWicpLCB0eXBlOiAnREVBTF9UWVBFX0JVWSd9LFxuICAgICAge2lkOiAnNScsIHRpbWU6IG5ldyBEYXRlKCcyMDIwLTA2LTAxVDAwOjAwOjAwLjAwMFonKSwgdHlwZTogJ0RFQUxfVFlQRV9CVVknfSxcbiAgICAgIHtpZDogJzInLCBwb3NpdGlvbklkOiAnMScsIHRpbWU6IG5ldyBEYXRlKCcyMDIwLTA4LTAxVDAwOjAwOjAwLjAwMFonKSwgdHlwZTogJ0RFQUxfVFlQRV9TRUxMJ30sXG4gICAgICB7aWQ6ICczJywgdGltZTogbmV3IERhdGUoJzIwMjAtMDktMDFUMDA6MDA6MDAuMDAwWicpLCB0eXBlOiAnREVBTF9UWVBFX0JVWSd9LFxuICAgICAge2lkOiAnNicsIHRpbWU6IG5ldyBEYXRlKCcyMDIwLTEwLTAxVDAwOjAwOjAwLjAwMFonKSwgdHlwZTogJ0RFQUxfVFlQRV9CVVknfVxuICAgIF0pO1xuICAgIHN0b3JhZ2UuZ2V0RGVhbHNCeVRpY2tldCgxKS5zaG91bGQubWF0Y2goW1xuICAgICAge2lkOiAnMScsIHBvc2l0aW9uSWQ6ICcxJywgdGltZTogbmV3IERhdGUoJzIwMjAtMDEtMDFUMDA6MDA6MDAuMDAwWicpLCB0eXBlOiAnREVBTF9UWVBFX1NFTEwnfVxuICAgIF0pO1xuICAgIHN0b3JhZ2UuZ2V0RGVhbHNCeVBvc2l0aW9uKDEpLnNob3VsZC5tYXRjaChbXG4gICAgICB7aWQ6ICcxJywgcG9zaXRpb25JZDogJzEnLCB0aW1lOiBuZXcgRGF0ZSgnMjAyMC0wMS0wMVQwMDowMDowMC4wMDBaJyksIHR5cGU6ICdERUFMX1RZUEVfU0VMTCd9LFxuICAgICAge2lkOiAnMicsIHBvc2l0aW9uSWQ6ICcxJywgdGltZTogbmV3IERhdGUoJzIwMjAtMDgtMDFUMDA6MDA6MDAuMDAwWicpLCB0eXBlOiAnREVBTF9UWVBFX1NFTEwnfVxuICAgIF0pO1xuICAgIHN0b3JhZ2UuZ2V0RGVhbHNCeVRpbWVSYW5nZShuZXcgRGF0ZSgnMjAyMC0wOC0wMVQwMDowMDowMC4wMDBaJyksIG5ldyBEYXRlKCcyMDIwLTA5LTAxVDAwOjAwOjAwLjAwMFonKSkuc2hvdWxkXG4gICAgICAubWF0Y2goW1xuICAgICAgICB7aWQ6ICcyJywgcG9zaXRpb25JZDogJzEnLCB0aW1lOiBuZXcgRGF0ZSgnMjAyMC0wOC0wMVQwMDowMDowMC4wMDBaJyksIHR5cGU6ICdERUFMX1RZUEVfU0VMTCd9LFxuICAgICAgICB7aWQ6ICczJywgdGltZTogbmV3IERhdGUoJzIwMjAtMDktMDFUMDA6MDA6MDAuMDAwWicpLCB0eXBlOiAnREVBTF9UWVBFX0JVWSd9LFxuICAgICAgXSk7XG4gIH0pO1xuXG4gIC8qKlxuICAgKiBAdGVzdCB7TWVtb3J5SGlzdG9yeVN0b3JhZ2UjaGlzdG9yeU9yZGVyc31cbiAgICovXG4gIGl0KCdzaG91bGQgcmV0dXJuIHNhdmVkIGhpc3RvcnlPcmRlcnMnLCAoKSA9PiB7XG4gICAgc3RvcmFnZS5vbkhpc3RvcnlPcmRlckFkZGVkKCd2aW50LWhpbGw6MTpwcy1tcGEtMScsIFxuICAgICAge2lkOiAnMScsIHBvc2l0aW9uSWQ6ICcxJywgZG9uZVRpbWU6IG5ldyBEYXRlKCcyMDIwLTAxLTAxVDAwOjAwOjAwLjAwMFonKSwgdHlwZTogJ09SREVSX1RZUEVfU0VMTCd9KTtcbiAgICBzdG9yYWdlLm9uSGlzdG9yeU9yZGVyQWRkZWQoJ3ZpbnQtaGlsbDoxOnBzLW1wYS0xJywge2lkOiAnNycsIGRvbmVUaW1lOiBuZXcgRGF0ZSgnMjAyMC0wNS0wMVQwMDowMDowMC4wMDBaJyksXG4gICAgICB0eXBlOiAnT1JERVJfVFlQRV9CVVknfSk7XG4gICAgc3RvcmFnZS5vbkhpc3RvcnlPcmRlckFkZGVkKCd2aW50LWhpbGw6MTpwcy1tcGEtMScsIHtpZDogJzgnLCBkb25lVGltZTogbmV3IERhdGUoJzIwMjAtMDItMDFUMDA6MDA6MDAuMDAwWicpLFxuICAgICAgdHlwZTogJ09SREVSX1RZUEVfU0VMTCd9KTtcbiAgICBzdG9yYWdlLm9uSGlzdG9yeU9yZGVyQWRkZWQoJ3ZpbnQtaGlsbDoxOnBzLW1wYS0xJywge2lkOiAnNicsIGRvbmVUaW1lOiBuZXcgRGF0ZSgnMjAyMC0xMC0wMVQwMDowMDowMC4wMDBaJyksXG4gICAgICB0eXBlOiAnT1JERVJfVFlQRV9CVVknfSk7XG4gICAgc3RvcmFnZS5vbkhpc3RvcnlPcmRlckFkZGVkKCd2aW50LWhpbGw6MTpwcy1tcGEtMScsIHtpZDogJzQnLCBkb25lVGltZTogbmV3IERhdGUoJzIwMjAtMDItMDFUMDA6MDA6MDAuMDAwWicpLFxuICAgICAgdHlwZTogJ09SREVSX1RZUEVfU0VMTCd9KTtcbiAgICBzdG9yYWdlLm9uSGlzdG9yeU9yZGVyQWRkZWQoJ3ZpbnQtaGlsbDoxOnBzLW1wYS0xJywge2lkOiAnNScsIGRvbmVUaW1lOiBuZXcgRGF0ZSgnMjAyMC0wNi0wMVQwMDowMDowMC4wMDBaJyksXG4gICAgICB0eXBlOiAnT1JERVJfVFlQRV9CVVknfSk7XG4gICAgc3RvcmFnZS5vbkhpc3RvcnlPcmRlckFkZGVkKCd2aW50LWhpbGw6MTpwcy1tcGEtMScsIHtpZDogJzExJywgdHlwZTogJ09SREVSX1RZUEVfU0VMTCd9KTtcbiAgICBzdG9yYWdlLm9uSGlzdG9yeU9yZGVyQWRkZWQoJ3ZpbnQtaGlsbDoxOnBzLW1wYS0xJywge2lkOiAnMycsIGRvbmVUaW1lOiBuZXcgRGF0ZSgnMjAyMC0wOS0wMVQwMDowMDowMC4wMDBaJyksXG4gICAgICB0eXBlOiAnT1JERVJfVFlQRV9CVVknfSk7XG4gICAgc3RvcmFnZS5vbkhpc3RvcnlPcmRlckFkZGVkKCd2aW50LWhpbGw6MTpwcy1tcGEtMScsIHtpZDogJzUnLCBkb25lVGltZTogbmV3IERhdGUoJzIwMjAtMDYtMDFUMDA6MDA6MDAuMDAwWicpLFxuICAgICAgdHlwZTogJ09SREVSX1RZUEVfQlVZJ30pO1xuICAgIHN0b3JhZ2Uub25IaXN0b3J5T3JkZXJBZGRlZCgndmludC1oaWxsOjE6cHMtbXBhLTEnLCBcbiAgICAgIHtpZDogJzInLCBwb3NpdGlvbklkOiAnMScsIGRvbmVUaW1lOiBuZXcgRGF0ZSgnMjAyMC0wOC0wMVQwMDowMDowMC4wMDBaJyksIHR5cGU6ICdPUkRFUl9UWVBFX1NFTEwnfSk7XG4gICAgc3RvcmFnZS5vbkhpc3RvcnlPcmRlckFkZGVkKCd2aW50LWhpbGw6MTpwcy1tcGEtMScsIHtpZDogJzEwJywgdHlwZTogJ09SREVSX1RZUEVfU0VMTCd9KTtcbiAgICBzdG9yYWdlLm9uSGlzdG9yeU9yZGVyQWRkZWQoJ3ZpbnQtaGlsbDoxOnBzLW1wYS0xJywge2lkOiAnMTInLCB0eXBlOiAnT1JERVJfVFlQRV9CVVknfSk7XG4gICAgc3RvcmFnZS5oaXN0b3J5T3JkZXJzLnNob3VsZC5tYXRjaChbXG4gICAgICB7aWQ6ICcxMCcsIHR5cGU6ICdPUkRFUl9UWVBFX1NFTEwnfSxcbiAgICAgIHtpZDogJzExJywgdHlwZTogJ09SREVSX1RZUEVfU0VMTCd9LFxuICAgICAge2lkOiAnMTInLCB0eXBlOiAnT1JERVJfVFlQRV9CVVknfSxcbiAgICAgIHtpZDogJzEnLCBwb3NpdGlvbklkOiAnMScsIGRvbmVUaW1lOiBuZXcgRGF0ZSgnMjAyMC0wMS0wMVQwMDowMDowMC4wMDBaJyksIHR5cGU6ICdPUkRFUl9UWVBFX1NFTEwnfSxcbiAgICAgIHtpZDogJzQnLCBkb25lVGltZTogbmV3IERhdGUoJzIwMjAtMDItMDFUMDA6MDA6MDAuMDAwWicpLCB0eXBlOiAnT1JERVJfVFlQRV9TRUxMJ30sXG4gICAgICB7aWQ6ICc4JywgZG9uZVRpbWU6IG5ldyBEYXRlKCcyMDIwLTAyLTAxVDAwOjAwOjAwLjAwMFonKSwgdHlwZTogJ09SREVSX1RZUEVfU0VMTCd9LFxuICAgICAge2lkOiAnNycsIGRvbmVUaW1lOiBuZXcgRGF0ZSgnMjAyMC0wNS0wMVQwMDowMDowMC4wMDBaJyksIHR5cGU6ICdPUkRFUl9UWVBFX0JVWSd9LFxuICAgICAge2lkOiAnNScsIGRvbmVUaW1lOiBuZXcgRGF0ZSgnMjAyMC0wNi0wMVQwMDowMDowMC4wMDBaJyksIHR5cGU6ICdPUkRFUl9UWVBFX0JVWSd9LFxuICAgICAge2lkOiAnMicsIHBvc2l0aW9uSWQ6ICcxJywgZG9uZVRpbWU6IG5ldyBEYXRlKCcyMDIwLTA4LTAxVDAwOjAwOjAwLjAwMFonKSwgdHlwZTogJ09SREVSX1RZUEVfU0VMTCd9LFxuICAgICAge2lkOiAnMycsIGRvbmVUaW1lOiBuZXcgRGF0ZSgnMjAyMC0wOS0wMVQwMDowMDowMC4wMDBaJyksIHR5cGU6ICdPUkRFUl9UWVBFX0JVWSd9LFxuICAgICAge2lkOiAnNicsIGRvbmVUaW1lOiBuZXcgRGF0ZSgnMjAyMC0xMC0wMVQwMDowMDowMC4wMDBaJyksIHR5cGU6ICdPUkRFUl9UWVBFX0JVWSd9XG4gICAgXSk7XG4gICAgc3RvcmFnZS5nZXRIaXN0b3J5T3JkZXJzQnlUaWNrZXQoMSkuc2hvdWxkLm1hdGNoKFtcbiAgICAgIHtpZDogJzEnLCBwb3NpdGlvbklkOiAnMScsIGRvbmVUaW1lOiBuZXcgRGF0ZSgnMjAyMC0wMS0wMVQwMDowMDowMC4wMDBaJyksIHR5cGU6ICdPUkRFUl9UWVBFX1NFTEwnfVxuICAgIF0pO1xuICAgIHN0b3JhZ2UuZ2V0SGlzdG9yeU9yZGVyc0J5UG9zaXRpb24oMSkuc2hvdWxkLm1hdGNoKFtcbiAgICAgIHtpZDogJzEnLCBwb3NpdGlvbklkOiAnMScsIGRvbmVUaW1lOiBuZXcgRGF0ZSgnMjAyMC0wMS0wMVQwMDowMDowMC4wMDBaJyksIHR5cGU6ICdPUkRFUl9UWVBFX1NFTEwnfSxcbiAgICAgIHtpZDogJzInLCBwb3NpdGlvbklkOiAnMScsIGRvbmVUaW1lOiBuZXcgRGF0ZSgnMjAyMC0wOC0wMVQwMDowMDowMC4wMDBaJyksIHR5cGU6ICdPUkRFUl9UWVBFX1NFTEwnfVxuICAgIF0pO1xuICAgIHN0b3JhZ2UuZ2V0SGlzdG9yeU9yZGVyc0J5VGltZVJhbmdlKG5ldyBEYXRlKCcyMDIwLTA4LTAxVDAwOjAwOjAwLjAwMFonKSwgbmV3IERhdGUoJzIwMjAtMDktMDFUMDA6MDA6MDAuMDAwWicpKVxuICAgICAgLnNob3VsZC5tYXRjaChbXG4gICAgICAgIHtpZDogJzInLCBwb3NpdGlvbklkOiAnMScsIGRvbmVUaW1lOiBuZXcgRGF0ZSgnMjAyMC0wOC0wMVQwMDowMDowMC4wMDBaJyksIHR5cGU6ICdPUkRFUl9UWVBFX1NFTEwnfSxcbiAgICAgICAge2lkOiAnMycsIGRvbmVUaW1lOiBuZXcgRGF0ZSgnMjAyMC0wOS0wMVQwMDowMDowMC4wMDBaJyksIHR5cGU6ICdPUkRFUl9UWVBFX0JVWSd9XG4gICAgICBdKTtcbiAgfSk7XG5cbiAgLyoqXG4gICAqIEB0ZXN0IHtNZW1vcnlIaXN0b3J5U3RvcmFnZSNvcmRlclN5bmNocm9uaXphdGlvbkZpbmlzaGVkfVxuICAgKi9cbiAgaXQoJ3Nob3VsZCByZXR1cm4gc2F2ZWQgb3JkZXIgc3luY2hyb25pemF0aW9uIHN0YXR1cycsIGFzeW5jICgpID0+IHtcbiAgICBzdG9yYWdlLm9yZGVyU3luY2hyb25pemF0aW9uRmluaXNoZWQuc2hvdWxkLmJlLmZhbHNlKCk7XG4gICAgYXdhaXQgc3RvcmFnZS5vbkhpc3RvcnlPcmRlcnNTeW5jaHJvbml6ZWQoMSk7XG4gICAgc3RvcmFnZS5vcmRlclN5bmNocm9uaXphdGlvbkZpbmlzaGVkLnNob3VsZC5iZS50cnVlKCk7XG4gIH0pO1xuXG4gIC8qKlxuICAgKiBAdGVzdCB7TWVtb3J5SGlzdG9yeVN0b3JhZ2UjZGVhbFN5bmNocm9uaXphdGlvbkZpbmlzaGVkfVxuICAgKi9cbiAgaXQoJ3Nob3VsZCByZXR1cm4gc2F2ZWQgZGVhbCBzeW5jaHJvbml6YXRpb24gc3RhdHVzJywgYXN5bmMgKCkgPT4ge1xuICAgIHN0b3JhZ2UuZGVhbFN5bmNocm9uaXphdGlvbkZpbmlzaGVkLnNob3VsZC5iZS5mYWxzZSgpO1xuICAgIGF3YWl0IHN0b3JhZ2Uub25EZWFsc1N5bmNocm9uaXplZCgxKTtcbiAgICBzdG9yYWdlLmRlYWxTeW5jaHJvbml6YXRpb25GaW5pc2hlZC5zaG91bGQuYmUudHJ1ZSgpO1xuICB9KTtcblxuICBkZXNjcmliZSgnZmx1c2gnLCAoKSA9PiB7XG5cbiAgICAvKipcbiAgICAgKiBAdGVzdCB7TWVtb3J5SGlzdG9yeVN0b3JhZ2UjdXBkYXRlRGlza1N0b3JhZ2V9XG4gICAgICovXG4gICAgaXQoJ3Nob3VsZCBmbHVzaCBkYiB3aGVuIHN5bmNocm9uaXphdGlvbiBlbmRzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgc2FuZGJveC5zdHViKGRiLCAnZmx1c2gnKS5yZXNvbHZlcygpO1xuICAgICAgc3RvcmFnZS5vbkhpc3RvcnlPcmRlckFkZGVkKCd2aW50LWhpbGw6MTpwcy1tcGEtMScsIHtpZDogJzEnLCBwb3NpdGlvbklkOiAnMScsXG4gICAgICAgIGRvbmVUaW1lOiBuZXcgRGF0ZSgnMjAyMC0wMS0wMVQwMDowMDowMC4wMDBaJyksIHR5cGU6ICdPUkRFUl9UWVBFX1NFTEwnfSk7XG4gICAgICBzdG9yYWdlLm9uRGVhbEFkZGVkKCd2aW50LWhpbGw6MTpwcy1tcGEtMScsIHtpZDogJzEnLCBwb3NpdGlvbklkOiAnMScsIHRpbWU6IG5ldyBEYXRlKCcyMDIwLTAxLTAxVDAwOjAwOjAwLjAwMFonKSxcbiAgICAgICAgdHlwZTogJ0RFQUxfVFlQRV9TRUxMJ30pO1xuICAgICAgYXdhaXQgc3RvcmFnZS5vbkRlYWxzU3luY2hyb25pemVkKDEpO1xuICAgICAgc2lub24uYXNzZXJ0LmNhbGxlZFdpdGgoZGIuZmx1c2gsICdhY2NvdW50SWQnLCAnTWV0YUFwaScsIFtcbiAgICAgICAge2lkOiAnMScsIHBvc2l0aW9uSWQ6ICcxJywgZG9uZVRpbWU6IG5ldyBEYXRlKCcyMDIwLTAxLTAxVDAwOjAwOjAwLjAwMFonKSwgdHlwZTogJ09SREVSX1RZUEVfU0VMTCd9XG4gICAgICBdLCBbXG4gICAgICAgIHtpZDogJzEnLCBwb3NpdGlvbklkOiAnMScsIHRpbWU6IG5ldyBEYXRlKCcyMDIwLTAxLTAxVDAwOjAwOjAwLjAwMFonKSwgdHlwZTogJ0RFQUxfVFlQRV9TRUxMJ31cbiAgICAgIF0pO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogQHRlc3Qge01lbW9yeUhpc3RvcnlTdG9yYWdlI3VwZGF0ZURpc2tTdG9yYWdlfVxuICAgICAqL1xuICAgIGl0KCdzaG91bGQgZmx1c2ggZGIgd2hlbiBuZXcgcmVjb3JkIGFycml2ZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBhd2FpdCBzdG9yYWdlLm9uRGVhbHNTeW5jaHJvbml6ZWQoMSk7XG4gICAgICBzYW5kYm94LnN0dWIoZGIsICdmbHVzaCcpLnJlc29sdmVzKCk7XG4gICAgICBhd2FpdCBzdG9yYWdlLm9uSGlzdG9yeU9yZGVyQWRkZWQoJ3ZpbnQtaGlsbDoxOnBzLW1wYS0xJywge2lkOiAnMScsIHBvc2l0aW9uSWQ6ICcxJyxcbiAgICAgICAgZG9uZVRpbWU6IG5ldyBEYXRlKCcyMDIwLTAxLTAxVDAwOjAwOjAwLjAwMFonKSwgdHlwZTogJ09SREVSX1RZUEVfU0VMTCd9KTtcbiAgICAgIGNsb2NrLnRpY2soNTUwMCk7XG4gICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXMgPT4gcmVhbFNldFRpbWVvdXQocmVzLCA1MCkpO1xuICAgICAgc2lub24uYXNzZXJ0LmNhbGxlZFdpdGgoZGIuZmx1c2gsICdhY2NvdW50SWQnLCAnTWV0YUFwaScsIFt7aWQ6ICcxJywgcG9zaXRpb25JZDogJzEnLFxuICAgICAgICBkb25lVGltZTogbmV3IERhdGUoJzIwMjAtMDEtMDFUMDA6MDA6MDAuMDAwWicpLCB0eXBlOiAnT1JERVJfVFlQRV9TRUxMJ31dLCBbXSk7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBAdGVzdCB7TWVtb3J5SGlzdG9yeVN0b3JhZ2UjdXBkYXRlRGlza1N0b3JhZ2V9XG4gICAgICovXG4gICAgaXQoJ3Nob3VsZCB0aHJvdHRsZSBkYiBmbHVzaCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGF3YWl0IHN0b3JhZ2Uub25EZWFsc1N5bmNocm9uaXplZCgxKTtcbiAgICAgIHNhbmRib3guc3R1YihkYiwgJ2ZsdXNoJykucmVzb2x2ZXMoKTtcbiAgICAgIGF3YWl0IHN0b3JhZ2Uub25IaXN0b3J5T3JkZXJBZGRlZCgndmludC1oaWxsOjE6cHMtbXBhLTEnLCB7aWQ6ICcxJywgcG9zaXRpb25JZDogJzEnLFxuICAgICAgICBkb25lVGltZTogbmV3IERhdGUoJzIwMjAtMDEtMDFUMDA6MDA6MDAuMDAwWicpLCB0eXBlOiAnT1JERVJfVFlQRV9TRUxMJ30pO1xuICAgICAgY2xvY2sudGljayg0NTAwKTtcbiAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlcyA9PiByZWFsU2V0VGltZW91dChyZXMsIDUwKSk7XG4gICAgICBhd2FpdCBzdG9yYWdlLm9uSGlzdG9yeU9yZGVyQWRkZWQoJ3ZpbnQtaGlsbDoxOnBzLW1wYS0xJywge2lkOiAnMicsIHBvc2l0aW9uSWQ6ICcxJyxcbiAgICAgICAgZG9uZVRpbWU6IG5ldyBEYXRlKCcyMDIwLTAxLTAxVDAwOjAwOjAwLjAwMFonKSwgdHlwZTogJ09SREVSX1RZUEVfU0VMTCd9KTtcbiAgICAgIGNsb2NrLnRpY2soNDUwMCk7XG4gICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXMgPT4gcmVhbFNldFRpbWVvdXQocmVzLCA1MCkpO1xuICAgICAgc2lub24uYXNzZXJ0Lm5vdENhbGxlZChkYi5mbHVzaCk7XG4gICAgfSk7XG5cbiAgfSk7XG5cbn0pO1xuIl19