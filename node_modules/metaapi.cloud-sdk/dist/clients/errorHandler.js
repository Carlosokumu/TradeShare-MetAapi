'use strict';

/**
 * Base class for API errors. Contains indication of HTTP status.
 */

Object.defineProperty(exports, "__esModule", {
  value: true
});
class ApiError extends Error {

  /**
   * ApiError constructor
   * @param {Function} clazz error name
   * @param {Object} message error message
   * @param {number} status HTTP status
   */
  constructor(clazz, message, status) {
    super(message);
    /**
     * Error name
     * @type {string}
     */
    this.name = clazz.name;
    /**
     * HTTP status code
     * @type {number}
     */
    this.status = status;
    if (process.title !== 'browser') {
      Error.captureStackTrace(this, clazz);
    }
  }

  /**
   * Sets error code, used for i18n
   * @param {string} code error code for i18n
   */
  set code(code) {
    this._code = code;
  }

  /**
   * Returns error code used for i18n
   * @return {string} error code
   */
  get code() {
    return this._code;
  }

  /**
   * Set message arguments for i18n
   * @param {Array<Object>} args arguments for i18n
   */
  set arguments(args) {
    this._args = args;
  }

  /**
   * Returns message arguments for i18n
   * @return {Array<Object>} message arguments for i18n
   */
  get arguments() {
    return this._args;
  }

}

exports.ApiError = ApiError; /**
                              * Throwing this error results in 404 (Not Found) HTTP response code.
                              */

class NotFoundError extends ApiError {

  /**
   * Represents NotFoundError.
   * @param {string} message error message
   */
  constructor(message) {
    super(NotFoundError, message, 404);
  }

}

exports.NotFoundError = NotFoundError; /**
                                        * Throwing this error results in 403 (Forbidden) HTTP response code.
                                        */

class ForbiddenError extends ApiError {

  /**
   * Constructs forbidden error.
   * @param {string} message error message
   */
  constructor(message) {
    super(ForbiddenError, message, 403);
  }

}

exports.ForbiddenError = ForbiddenError; /**
                                          * Throwing this error results in 401 (Unauthorized) HTTP response code.
                                          */

class UnauthorizedError extends ApiError {

  /**
   * Constructs unauthorized error.
   * @param {string} message error message
   */
  constructor(message) {
    super(UnauthorizedError, message, 401);
  }

}

exports.UnauthorizedError = UnauthorizedError; /**
                                                * Represents validation error. Throwing this error results in 400 (Bad Request) HTTP response code.
                                                */

class ValidationError extends ApiError {

  /**
   * Constructs validation error.
   * @param {string} message error message
   * @param {Object} details error data
   */
  constructor(message, details) {
    super(ValidationError, message, 400);
    /**
     * Validation error details
     * @type {Object}
     */
    this.details = details;
  }

}

exports.ValidationError = ValidationError; /**
                                            * Represents unexpected error. Throwing this error results in 500 (Internal Error) HTTP response code.
                                            */

class InternalError extends ApiError {

  /**
   * Constructs unexpected error.
   * @param {string} message error message
   */
  constructor(message) {
    super(InternalError, message, 500);
  }

}

exports.InternalError = InternalError; /**
                                        * Represents conflict error. Throwing this error results in 409 (Conflict) HTTP response code.
                                        */

class ConflictError extends ApiError {
  /**
   * Constructs conflict error.
   * @param {string} message error message
   */
  constructor(message) {
    super(ConflictError, message, 409);
  }
}

exports.ConflictError = ConflictError; /**
                                        * @typedef {Object} TooManyRequestsErrorMetadata
                                        * @property {Number} periodInMinutes throttling period in minutes
                                        * @property {Number} requestsPerPeriodAllowed available requests for periodInMinutes
                                        * @property {Date} recommendedRetryTime recommended date to retry request
                                        * @property {String} type error type
                                        */

/**
 * Represents too many requests error. Throwing this error results in 429 (Too Many Requests) HTTP response code.
 */

class TooManyRequestsError extends ApiError {
  /**
   * Constructs too many requests error.
   * @param {string} message error message
   * @param {TooManyRequestsErrorMetadata} metadata error metadata
   */
  constructor(message, metadata) {
    super(TooManyRequestsError, message, 429);
    this.metadata = metadata;
  }
}
exports.TooManyRequestsError = TooManyRequestsError;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL2xpYi9jbGllbnRzL2Vycm9ySGFuZGxlci5lczYiXSwibmFtZXMiOlsiQXBpRXJyb3IiLCJFcnJvciIsImNvbnN0cnVjdG9yIiwiY2xhenoiLCJtZXNzYWdlIiwic3RhdHVzIiwibmFtZSIsInByb2Nlc3MiLCJ0aXRsZSIsImNhcHR1cmVTdGFja1RyYWNlIiwiY29kZSIsIl9jb2RlIiwiYXJndW1lbnRzIiwiYXJncyIsIl9hcmdzIiwiTm90Rm91bmRFcnJvciIsIkZvcmJpZGRlbkVycm9yIiwiVW5hdXRob3JpemVkRXJyb3IiLCJWYWxpZGF0aW9uRXJyb3IiLCJkZXRhaWxzIiwiSW50ZXJuYWxFcnJvciIsIkNvbmZsaWN0RXJyb3IiLCJUb29NYW55UmVxdWVzdHNFcnJvciIsIm1ldGFkYXRhIl0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTs7Ozs7OztBQUdPLE1BQU1BLFFBQU4sU0FBdUJDLEtBQXZCLENBQTZCOztBQUVsQzs7Ozs7O0FBTUFDLGNBQVlDLEtBQVosRUFBbUJDLE9BQW5CLEVBQTRCQyxNQUE1QixFQUFvQztBQUNsQyxVQUFNRCxPQUFOO0FBQ0E7Ozs7QUFJQSxTQUFLRSxJQUFMLEdBQVlILE1BQU1HLElBQWxCO0FBQ0E7Ozs7QUFJQSxTQUFLRCxNQUFMLEdBQWNBLE1BQWQ7QUFDQSxRQUFJRSxRQUFRQyxLQUFSLEtBQWtCLFNBQXRCLEVBQWlDO0FBQy9CUCxZQUFNUSxpQkFBTixDQUF3QixJQUF4QixFQUE4Qk4sS0FBOUI7QUFDRDtBQUNGOztBQUVEOzs7O0FBSUEsTUFBSU8sSUFBSixDQUFTQSxJQUFULEVBQWU7QUFDYixTQUFLQyxLQUFMLEdBQWFELElBQWI7QUFDRDs7QUFFRDs7OztBQUlBLE1BQUlBLElBQUosR0FBVztBQUNULFdBQU8sS0FBS0MsS0FBWjtBQUNEOztBQUVEOzs7O0FBSUEsTUFBSUMsU0FBSixDQUFjQyxJQUFkLEVBQW9CO0FBQ2xCLFNBQUtDLEtBQUwsR0FBYUQsSUFBYjtBQUNEOztBQUVEOzs7O0FBSUEsTUFBSUQsU0FBSixHQUFnQjtBQUNkLFdBQU8sS0FBS0UsS0FBWjtBQUNEOztBQXZEaUM7O1FBQXZCZCxRLEdBQUFBLFEsRUEyRGI7Ozs7QUFHTyxNQUFNZSxhQUFOLFNBQTRCZixRQUE1QixDQUFxQzs7QUFFMUM7Ozs7QUFJQUUsY0FBWUUsT0FBWixFQUFxQjtBQUNuQixVQUFNVyxhQUFOLEVBQXFCWCxPQUFyQixFQUE4QixHQUE5QjtBQUNEOztBQVJ5Qzs7UUFBL0JXLGEsR0FBQUEsYSxFQVliOzs7O0FBR08sTUFBTUMsY0FBTixTQUE2QmhCLFFBQTdCLENBQXNDOztBQUUzQzs7OztBQUlBRSxjQUFZRSxPQUFaLEVBQXFCO0FBQ25CLFVBQU1ZLGNBQU4sRUFBc0JaLE9BQXRCLEVBQStCLEdBQS9CO0FBQ0Q7O0FBUjBDOztRQUFoQ1ksYyxHQUFBQSxjLEVBWWI7Ozs7QUFHTyxNQUFNQyxpQkFBTixTQUFnQ2pCLFFBQWhDLENBQXlDOztBQUU5Qzs7OztBQUlBRSxjQUFZRSxPQUFaLEVBQXFCO0FBQ25CLFVBQU1hLGlCQUFOLEVBQXlCYixPQUF6QixFQUFrQyxHQUFsQztBQUNEOztBQVI2Qzs7UUFBbkNhLGlCLEdBQUFBLGlCLEVBWWI7Ozs7QUFHTyxNQUFNQyxlQUFOLFNBQThCbEIsUUFBOUIsQ0FBdUM7O0FBRTVDOzs7OztBQUtBRSxjQUFZRSxPQUFaLEVBQXFCZSxPQUFyQixFQUE4QjtBQUM1QixVQUFNRCxlQUFOLEVBQXVCZCxPQUF2QixFQUFnQyxHQUFoQztBQUNBOzs7O0FBSUEsU0FBS2UsT0FBTCxHQUFlQSxPQUFmO0FBQ0Q7O0FBZDJDOztRQUFqQ0QsZSxHQUFBQSxlLEVBa0JiOzs7O0FBR08sTUFBTUUsYUFBTixTQUE0QnBCLFFBQTVCLENBQXFDOztBQUUxQzs7OztBQUlBRSxjQUFZRSxPQUFaLEVBQXFCO0FBQ25CLFVBQU1nQixhQUFOLEVBQXFCaEIsT0FBckIsRUFBOEIsR0FBOUI7QUFDRDs7QUFSeUM7O1FBQS9CZ0IsYSxHQUFBQSxhLEVBWWI7Ozs7QUFHTyxNQUFNQyxhQUFOLFNBQTRCckIsUUFBNUIsQ0FBcUM7QUFDMUM7Ozs7QUFJQUUsY0FBWUUsT0FBWixFQUFxQjtBQUNuQixVQUFNaUIsYUFBTixFQUFxQmpCLE9BQXJCLEVBQThCLEdBQTlCO0FBQ0Q7QUFQeUM7O1FBQS9CaUIsYSxHQUFBQSxhLEVBVWI7Ozs7Ozs7O0FBUUE7Ozs7QUFHTyxNQUFNQyxvQkFBTixTQUFtQ3RCLFFBQW5DLENBQTRDO0FBQ2pEOzs7OztBQUtBRSxjQUFZRSxPQUFaLEVBQXFCbUIsUUFBckIsRUFBK0I7QUFDN0IsVUFBTUQsb0JBQU4sRUFBNEJsQixPQUE1QixFQUFxQyxHQUFyQztBQUNBLFNBQUttQixRQUFMLEdBQWdCQSxRQUFoQjtBQUNEO0FBVGdEO1FBQXRDRCxvQixHQUFBQSxvQiIsImZpbGUiOiJlcnJvckhhbmRsZXIuanMiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbi8qKlxuICogQmFzZSBjbGFzcyBmb3IgQVBJIGVycm9ycy4gQ29udGFpbnMgaW5kaWNhdGlvbiBvZiBIVFRQIHN0YXR1cy5cbiAqL1xuZXhwb3J0IGNsYXNzIEFwaUVycm9yIGV4dGVuZHMgRXJyb3Ige1xuXG4gIC8qKlxuICAgKiBBcGlFcnJvciBjb25zdHJ1Y3RvclxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjbGF6eiBlcnJvciBuYW1lXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBtZXNzYWdlIGVycm9yIG1lc3NhZ2VcbiAgICogQHBhcmFtIHtudW1iZXJ9IHN0YXR1cyBIVFRQIHN0YXR1c1xuICAgKi9cbiAgY29uc3RydWN0b3IoY2xhenosIG1lc3NhZ2UsIHN0YXR1cykge1xuICAgIHN1cGVyKG1lc3NhZ2UpO1xuICAgIC8qKlxuICAgICAqIEVycm9yIG5hbWVcbiAgICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgICAqL1xuICAgIHRoaXMubmFtZSA9IGNsYXp6Lm5hbWU7XG4gICAgLyoqXG4gICAgICogSFRUUCBzdGF0dXMgY29kZVxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdGhpcy5zdGF0dXMgPSBzdGF0dXM7XG4gICAgaWYgKHByb2Nlc3MudGl0bGUgIT09ICdicm93c2VyJykge1xuICAgICAgRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UodGhpcywgY2xhenopO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIGVycm9yIGNvZGUsIHVzZWQgZm9yIGkxOG5cbiAgICogQHBhcmFtIHtzdHJpbmd9IGNvZGUgZXJyb3IgY29kZSBmb3IgaTE4blxuICAgKi9cbiAgc2V0IGNvZGUoY29kZSkge1xuICAgIHRoaXMuX2NvZGUgPSBjb2RlO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgZXJyb3IgY29kZSB1c2VkIGZvciBpMThuXG4gICAqIEByZXR1cm4ge3N0cmluZ30gZXJyb3IgY29kZVxuICAgKi9cbiAgZ2V0IGNvZGUoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2NvZGU7XG4gIH1cblxuICAvKipcbiAgICogU2V0IG1lc3NhZ2UgYXJndW1lbnRzIGZvciBpMThuXG4gICAqIEBwYXJhbSB7QXJyYXk8T2JqZWN0Pn0gYXJncyBhcmd1bWVudHMgZm9yIGkxOG5cbiAgICovXG4gIHNldCBhcmd1bWVudHMoYXJncykge1xuICAgIHRoaXMuX2FyZ3MgPSBhcmdzO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgbWVzc2FnZSBhcmd1bWVudHMgZm9yIGkxOG5cbiAgICogQHJldHVybiB7QXJyYXk8T2JqZWN0Pn0gbWVzc2FnZSBhcmd1bWVudHMgZm9yIGkxOG5cbiAgICovXG4gIGdldCBhcmd1bWVudHMoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2FyZ3M7XG4gIH1cblxufVxuXG4vKipcbiAqIFRocm93aW5nIHRoaXMgZXJyb3IgcmVzdWx0cyBpbiA0MDQgKE5vdCBGb3VuZCkgSFRUUCByZXNwb25zZSBjb2RlLlxuICovXG5leHBvcnQgY2xhc3MgTm90Rm91bmRFcnJvciBleHRlbmRzIEFwaUVycm9yIHtcblxuICAvKipcbiAgICogUmVwcmVzZW50cyBOb3RGb3VuZEVycm9yLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gbWVzc2FnZSBlcnJvciBtZXNzYWdlXG4gICAqL1xuICBjb25zdHJ1Y3RvcihtZXNzYWdlKSB7XG4gICAgc3VwZXIoTm90Rm91bmRFcnJvciwgbWVzc2FnZSwgNDA0KTtcbiAgfVxuXG59XG5cbi8qKlxuICogVGhyb3dpbmcgdGhpcyBlcnJvciByZXN1bHRzIGluIDQwMyAoRm9yYmlkZGVuKSBIVFRQIHJlc3BvbnNlIGNvZGUuXG4gKi9cbmV4cG9ydCBjbGFzcyBGb3JiaWRkZW5FcnJvciBleHRlbmRzIEFwaUVycm9yIHtcblxuICAvKipcbiAgICogQ29uc3RydWN0cyBmb3JiaWRkZW4gZXJyb3IuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBtZXNzYWdlIGVycm9yIG1lc3NhZ2VcbiAgICovXG4gIGNvbnN0cnVjdG9yKG1lc3NhZ2UpIHtcbiAgICBzdXBlcihGb3JiaWRkZW5FcnJvciwgbWVzc2FnZSwgNDAzKTtcbiAgfVxuXG59XG5cbi8qKlxuICogVGhyb3dpbmcgdGhpcyBlcnJvciByZXN1bHRzIGluIDQwMSAoVW5hdXRob3JpemVkKSBIVFRQIHJlc3BvbnNlIGNvZGUuXG4gKi9cbmV4cG9ydCBjbGFzcyBVbmF1dGhvcml6ZWRFcnJvciBleHRlbmRzIEFwaUVycm9yIHtcblxuICAvKipcbiAgICogQ29uc3RydWN0cyB1bmF1dGhvcml6ZWQgZXJyb3IuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBtZXNzYWdlIGVycm9yIG1lc3NhZ2VcbiAgICovXG4gIGNvbnN0cnVjdG9yKG1lc3NhZ2UpIHtcbiAgICBzdXBlcihVbmF1dGhvcml6ZWRFcnJvciwgbWVzc2FnZSwgNDAxKTtcbiAgfVxuXG59XG5cbi8qKlxuICogUmVwcmVzZW50cyB2YWxpZGF0aW9uIGVycm9yLiBUaHJvd2luZyB0aGlzIGVycm9yIHJlc3VsdHMgaW4gNDAwIChCYWQgUmVxdWVzdCkgSFRUUCByZXNwb25zZSBjb2RlLlxuICovXG5leHBvcnQgY2xhc3MgVmFsaWRhdGlvbkVycm9yIGV4dGVuZHMgQXBpRXJyb3Ige1xuXG4gIC8qKlxuICAgKiBDb25zdHJ1Y3RzIHZhbGlkYXRpb24gZXJyb3IuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBtZXNzYWdlIGVycm9yIG1lc3NhZ2VcbiAgICogQHBhcmFtIHtPYmplY3R9IGRldGFpbHMgZXJyb3IgZGF0YVxuICAgKi9cbiAgY29uc3RydWN0b3IobWVzc2FnZSwgZGV0YWlscykge1xuICAgIHN1cGVyKFZhbGlkYXRpb25FcnJvciwgbWVzc2FnZSwgNDAwKTtcbiAgICAvKipcbiAgICAgKiBWYWxpZGF0aW9uIGVycm9yIGRldGFpbHNcbiAgICAgKiBAdHlwZSB7T2JqZWN0fVxuICAgICAqL1xuICAgIHRoaXMuZGV0YWlscyA9IGRldGFpbHM7XG4gIH1cblxufVxuXG4vKipcbiAqIFJlcHJlc2VudHMgdW5leHBlY3RlZCBlcnJvci4gVGhyb3dpbmcgdGhpcyBlcnJvciByZXN1bHRzIGluIDUwMCAoSW50ZXJuYWwgRXJyb3IpIEhUVFAgcmVzcG9uc2UgY29kZS5cbiAqL1xuZXhwb3J0IGNsYXNzIEludGVybmFsRXJyb3IgZXh0ZW5kcyBBcGlFcnJvciB7XG5cbiAgLyoqXG4gICAqIENvbnN0cnVjdHMgdW5leHBlY3RlZCBlcnJvci5cbiAgICogQHBhcmFtIHtzdHJpbmd9IG1lc3NhZ2UgZXJyb3IgbWVzc2FnZVxuICAgKi9cbiAgY29uc3RydWN0b3IobWVzc2FnZSkge1xuICAgIHN1cGVyKEludGVybmFsRXJyb3IsIG1lc3NhZ2UsIDUwMCk7XG4gIH1cblxufVxuXG4vKipcbiAqIFJlcHJlc2VudHMgY29uZmxpY3QgZXJyb3IuIFRocm93aW5nIHRoaXMgZXJyb3IgcmVzdWx0cyBpbiA0MDkgKENvbmZsaWN0KSBIVFRQIHJlc3BvbnNlIGNvZGUuXG4gKi9cbmV4cG9ydCBjbGFzcyBDb25mbGljdEVycm9yIGV4dGVuZHMgQXBpRXJyb3Ige1xuICAvKipcbiAgICogQ29uc3RydWN0cyBjb25mbGljdCBlcnJvci5cbiAgICogQHBhcmFtIHtzdHJpbmd9IG1lc3NhZ2UgZXJyb3IgbWVzc2FnZVxuICAgKi9cbiAgY29uc3RydWN0b3IobWVzc2FnZSkge1xuICAgIHN1cGVyKENvbmZsaWN0RXJyb3IsIG1lc3NhZ2UsIDQwOSk7XG4gIH1cbn1cblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBUb29NYW55UmVxdWVzdHNFcnJvck1ldGFkYXRhXG4gKiBAcHJvcGVydHkge051bWJlcn0gcGVyaW9kSW5NaW51dGVzIHRocm90dGxpbmcgcGVyaW9kIGluIG1pbnV0ZXNcbiAqIEBwcm9wZXJ0eSB7TnVtYmVyfSByZXF1ZXN0c1BlclBlcmlvZEFsbG93ZWQgYXZhaWxhYmxlIHJlcXVlc3RzIGZvciBwZXJpb2RJbk1pbnV0ZXNcbiAqIEBwcm9wZXJ0eSB7RGF0ZX0gcmVjb21tZW5kZWRSZXRyeVRpbWUgcmVjb21tZW5kZWQgZGF0ZSB0byByZXRyeSByZXF1ZXN0XG4gKiBAcHJvcGVydHkge1N0cmluZ30gdHlwZSBlcnJvciB0eXBlXG4gKi9cblxuLyoqXG4gKiBSZXByZXNlbnRzIHRvbyBtYW55IHJlcXVlc3RzIGVycm9yLiBUaHJvd2luZyB0aGlzIGVycm9yIHJlc3VsdHMgaW4gNDI5IChUb28gTWFueSBSZXF1ZXN0cykgSFRUUCByZXNwb25zZSBjb2RlLlxuICovXG5leHBvcnQgY2xhc3MgVG9vTWFueVJlcXVlc3RzRXJyb3IgZXh0ZW5kcyBBcGlFcnJvciB7XG4gIC8qKlxuICAgKiBDb25zdHJ1Y3RzIHRvbyBtYW55IHJlcXVlc3RzIGVycm9yLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gbWVzc2FnZSBlcnJvciBtZXNzYWdlXG4gICAqIEBwYXJhbSB7VG9vTWFueVJlcXVlc3RzRXJyb3JNZXRhZGF0YX0gbWV0YWRhdGEgZXJyb3IgbWV0YWRhdGFcbiAgICovXG4gIGNvbnN0cnVjdG9yKG1lc3NhZ2UsIG1ldGFkYXRhKSB7XG4gICAgc3VwZXIoVG9vTWFueVJlcXVlc3RzRXJyb3IsIG1lc3NhZ2UsIDQyOSk7XG4gICAgdGhpcy5tZXRhZGF0YSA9IG1ldGFkYXRhO1xuICB9XG59XG4iXX0=