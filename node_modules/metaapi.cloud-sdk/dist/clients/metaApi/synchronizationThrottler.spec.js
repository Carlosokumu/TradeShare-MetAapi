'use strict';

var _promise = require('babel-runtime/core-js/promise');

var _promise2 = _interopRequireDefault(_promise);

var _synchronizationThrottler = require('./synchronizationThrottler');

var _synchronizationThrottler2 = _interopRequireDefault(_synchronizationThrottler);

var _sinon = require('sinon');

var _sinon2 = _interopRequireDefault(_sinon);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/**
 * @test {SynchronizationThrottler}
 */
describe('SynchronizationThrottler', () => {
  let throttler, clock, sandbox, websocketClient, getHashes;

  before(() => {
    sandbox = _sinon2.default.createSandbox();
  });

  beforeEach(() => {
    clock = _sinon2.default.useFakeTimers({
      now: new Date('2020-10-05T10:00:00.000Z'),
      shouldAdvanceTime: true
    });
    websocketClient = {
      rpcRequest: (accountId, request, timeoutInSeconds) => {},
      subscribedAccountIds: () => new Array(11),
      socketInstances: { 'vint-hill': { 0: [{ synchronizationThrottler: { synchronizingAccounts: [] } }] } }
    };
    websocketClient.rpcRequest = sandbox.stub();
    getHashes = () => ({
      positionsMd5: '1111',
      ordersMd5: '2222',
      specificationsMd5: '3333'
    });
    throttler = new _synchronizationThrottler2.default(websocketClient, 0, 0, 'vint-hill');
    throttler.start();
  });

  afterEach(() => {
    clock.restore();
  });

  /**
   * @test {SynchronizationThrottler#scheduleSynchronize}
   */
  it('should immediately send request if free slots exist', async () => {
    await throttler.scheduleSynchronize('accountId', { requestId: 'test' }, getHashes);
    _sinon2.default.assert.match(throttler._synchronizationIds, { test: 1601892000000 });
    throttler.removeSynchronizationId('test');
    _sinon2.default.assert.calledWith(websocketClient.rpcRequest, 'accountId', {
      requestId: 'test',
      positionsMd5: '1111',
      ordersMd5: '2222',
      specificationsMd5: '3333' });
    _sinon2.default.assert.match(throttler._synchronizationIds, {});
  });

  /**
   * @test {SynchronizationThrottler#scheduleSynchronize}
   */
  it('should not remove sync if different instance index', async () => {
    await throttler.scheduleSynchronize('accountId', { requestId: 'test', instanceIndex: 0 }, getHashes);
    await throttler.scheduleSynchronize('accountId', { requestId: 'test1', instanceIndex: 1 }, getHashes);
    _sinon2.default.assert.match(throttler._synchronizationIds, { test: 1601892000000, test1: 1601892000000 });
    throttler.removeSynchronizationId('test', 0);
    _sinon2.default.assert.match(throttler._synchronizationIds, { test1: 1601892000000 });
    _sinon2.default.assert.calledWith(websocketClient.rpcRequest, 'accountId', {
      requestId: 'test',
      positionsMd5: '1111',
      ordersMd5: '2222',
      specificationsMd5: '3333',
      instanceIndex: 0 });
    _sinon2.default.assert.calledWith(websocketClient.rpcRequest, 'accountId', {
      requestId: 'test1',
      positionsMd5: '1111',
      ordersMd5: '2222',
      specificationsMd5: '3333',
      instanceIndex: 1 });
    _sinon2.default.assert.match(throttler._synchronizationIds, {});
  });

  /**
   * @test {SynchronizationThrottler#scheduleSynchronize}
   */
  it('should wait for other sync requests to finish if slots are full', async () => {
    await throttler.scheduleSynchronize('accountId1', { requestId: 'test1' }, getHashes);
    await throttler.scheduleSynchronize('accountId2', { requestId: 'test2' }, getHashes);
    _sinon2.default.assert.calledWith(websocketClient.rpcRequest, 'accountId1', {
      requestId: 'test1',
      positionsMd5: '1111',
      ordersMd5: '2222',
      specificationsMd5: '3333' });
    _sinon2.default.assert.calledWith(websocketClient.rpcRequest, 'accountId2', {
      requestId: 'test2',
      positionsMd5: '1111',
      ordersMd5: '2222',
      specificationsMd5: '3333' });
    throttler.scheduleSynchronize('accountId3', { requestId: 'test3' }, getHashes);
    await new _promise2.default(res => setTimeout(res, 20));
    _sinon2.default.assert.callCount(websocketClient.rpcRequest, 2);
    throttler.removeSynchronizationId('test1');
    await new _promise2.default(res => setTimeout(res, 20));
    _sinon2.default.assert.callCount(websocketClient.rpcRequest, 3);
  });

  /**
   * @test {SynchronizationThrottler#scheduleSynchronize}
   */
  it('should increase slot amount with more subscribed accounts', async () => {
    websocketClient.subscribedAccountIds = () => new Array(21);
    await throttler.scheduleSynchronize('accountId1', { requestId: 'test1' }, getHashes);
    await throttler.scheduleSynchronize('accountId2', { requestId: 'test2' }, getHashes);
    await throttler.scheduleSynchronize('accountId3', { requestId: 'test3' }, getHashes);
    _sinon2.default.assert.calledWith(websocketClient.rpcRequest, 'accountId1', {
      requestId: 'test1',
      positionsMd5: '1111',
      ordersMd5: '2222',
      specificationsMd5: '3333' });
    _sinon2.default.assert.calledWith(websocketClient.rpcRequest, 'accountId2', {
      requestId: 'test2',
      positionsMd5: '1111',
      ordersMd5: '2222',
      specificationsMd5: '3333' });
    _sinon2.default.assert.calledWith(websocketClient.rpcRequest, 'accountId3', {
      requestId: 'test3',
      positionsMd5: '1111',
      ordersMd5: '2222',
      specificationsMd5: '3333' });
    _sinon2.default.assert.callCount(websocketClient.rpcRequest, 3);
  });

  /**
   * @test {SynchronizationThrottler#scheduleSynchronize}
   */
  it('should set hard limit for concurrent synchronizations across throttlers via options', async () => {
    websocketClient.subscribedAccountIds = () => new Array(21);
    throttler = new _synchronizationThrottler2.default(websocketClient, 0, 0, 'vint-hill', { maxConcurrentSynchronizations: 3 });
    websocketClient.socketInstances = { 'vint-hill': { 0: [{ synchronizationThrottler: throttler }, { synchronizationThrottler: { synchronizingAccounts: ['accountId4'] } }] } };
    await throttler.scheduleSynchronize('accountId1', { requestId: 'test1' }, getHashes);
    await throttler.scheduleSynchronize('accountId2', { requestId: 'test2' }, getHashes);
    throttler.scheduleSynchronize('accountId3', { requestId: 'test3' }, getHashes);
    throttler.scheduleSynchronize('accountId4', { requestId: 'test4' }, getHashes);
    await new _promise2.default(res => setTimeout(res, 20));
    _sinon2.default.assert.callCount(websocketClient.rpcRequest, 2);
    throttler.removeSynchronizationId('test1');
    await new _promise2.default(res => setTimeout(res, 20));
    _sinon2.default.assert.callCount(websocketClient.rpcRequest, 3);
  });

  /**
   * @test {SynchronizationThrottler#scheduleSynchronize}
   */
  it('should not take extra slots if sync ids belong to the same account', async () => {
    throttler.scheduleSynchronize('accountId', { requestId: 'test', instanceIndex: 0 }, getHashes);
    throttler.scheduleSynchronize('accountId', { requestId: 'test1', instanceIndex: 1 }, getHashes);
    throttler.scheduleSynchronize('accountId2', { requestId: 'test2' }, getHashes);
    throttler.scheduleSynchronize('accountId3', { requestId: 'test3' }, getHashes);
    await new _promise2.default(res => setTimeout(res, 20));
    _sinon2.default.assert.callCount(websocketClient.rpcRequest, 3);
    _sinon2.default.assert.calledWith(websocketClient.rpcRequest, 'accountId', {
      requestId: 'test',
      positionsMd5: '1111',
      ordersMd5: '2222',
      specificationsMd5: '3333',
      instanceIndex: 0 });
    _sinon2.default.assert.calledWith(websocketClient.rpcRequest, 'accountId', {
      requestId: 'test1',
      positionsMd5: '1111',
      ordersMd5: '2222',
      specificationsMd5: '3333',
      instanceIndex: 1 });
    _sinon2.default.assert.calledWith(websocketClient.rpcRequest, 'accountId2', {
      requestId: 'test2',
      positionsMd5: '1111',
      ordersMd5: '2222',
      specificationsMd5: '3333' });
    _sinon2.default.assert.match(throttler._synchronizationIds, {});
  });

  /**
   * @test {SynchronizationThrottler#_removeOldSyncIdsJob}
   */
  it('should clear expired synchronization slots if no packets for 10 seconds', async () => {
    await throttler.scheduleSynchronize('accountId1', { requestId: 'test1' }, getHashes);
    await throttler.scheduleSynchronize('accountId2', { requestId: 'test2' }, getHashes);
    throttler.scheduleSynchronize('accountId3', { requestId: 'test3' }, getHashes);
    await new _promise2.default(res => setTimeout(res, 20));
    _sinon2.default.assert.callCount(websocketClient.rpcRequest, 2);
    await clock.tickAsync(11000);
    _sinon2.default.assert.callCount(websocketClient.rpcRequest, 3);
  });

  /**
   * @test {SynchronizationThrottler#updateSynchronizationId}
   */
  it('should renew sync on update', async () => {
    await throttler.scheduleSynchronize('accountId1', { requestId: 'test1' }, getHashes);
    await throttler.scheduleSynchronize('accountId2', { requestId: 'test2' }, getHashes);
    throttler.scheduleSynchronize('accountId3', { requestId: 'test3' }, getHashes);
    await new _promise2.default(res => setTimeout(res, 20));
    _sinon2.default.assert.callCount(websocketClient.rpcRequest, 2);
    await clock.tickAsync(11000);
    _sinon2.default.assert.callCount(websocketClient.rpcRequest, 3);
    await clock.tickAsync(11000);
    throttler.updateSynchronizationId('test1');
    throttler.scheduleSynchronize('accountId4', { requestId: 'test4' }, getHashes);
    throttler.scheduleSynchronize('accountId5', { requestId: 'test5' }, getHashes);
    await new _promise2.default(res => setTimeout(res, 20));
    _sinon2.default.assert.callCount(websocketClient.rpcRequest, 4);
  });

  /**
   * @test {SynchronizationThrottler#scheduleSynchronize}
   */
  it('should replace previous syncs', async () => {
    throttler.scheduleSynchronize('accountId1', { requestId: 'test1' }, getHashes);
    throttler.scheduleSynchronize('accountId1', { requestId: 'test2' }, getHashes);
    throttler.scheduleSynchronize('accountId1', { requestId: 'test3' }, getHashes);
    throttler.scheduleSynchronize('accountId2', { requestId: 'test4' }, getHashes);
    throttler.scheduleSynchronize('accountId3', { requestId: 'test5' }, getHashes);
    throttler.scheduleSynchronize('accountId1', { requestId: 'test3', instanceIndex: 0 });
    await new _promise2.default(res => setTimeout(res, 20));
    _sinon2.default.assert.callCount(websocketClient.rpcRequest, 4);
  });

  /**
   * @test {SynchronizationThrottler#onDisconnect}
   */
  it('should clear existing sync ids on disconnect', async () => {
    await throttler.scheduleSynchronize('accountId1', { requestId: 'test1' }, getHashes);
    await throttler.scheduleSynchronize('accountId2', { requestId: 'test2' }, getHashes);
    await new _promise2.default(res => setTimeout(res, 20));
    _sinon2.default.assert.callCount(websocketClient.rpcRequest, 2);
    throttler.onDisconnect();
    throttler.scheduleSynchronize('accountId3', { requestId: 'test3' }, getHashes);
    await new _promise2.default(res => setTimeout(res, 20));
    _sinon2.default.assert.callCount(websocketClient.rpcRequest, 3);
  });

  /**
   * @test {SynchronizationThrottler#_removeFromQueue}
   */
  it('should remove synchronizations from queue', async () => {
    await throttler.scheduleSynchronize('accountId1', { requestId: 'test1' }, getHashes);
    await throttler.scheduleSynchronize('accountId2', { requestId: 'test2' }, getHashes);
    throttler.scheduleSynchronize('accountId3', { requestId: 'test3' }), getHashes;
    throttler.scheduleSynchronize('accountId3', { requestId: 'test4', instanceIndex: 0 }, getHashes);
    throttler.scheduleSynchronize('accountId4', { requestId: 'test5' }, getHashes);
    throttler.scheduleSynchronize('accountId3', { requestId: 'test6' }, getHashes);
    throttler.scheduleSynchronize('accountId4', { requestId: 'test7' }, getHashes);
    throttler.scheduleSynchronize('accountId3', { requestId: 'test8' }, getHashes);
    throttler.scheduleSynchronize('accountId5', { requestId: 'test9' }, getHashes);
    throttler.scheduleSynchronize('accountId3', { requestId: 'test10', instanceIndex: 0 }, getHashes);
    await clock.tickAsync(53000);
    _sinon2.default.assert.callCount(websocketClient.rpcRequest, 6);
    _sinon2.default.assert.calledWith(websocketClient.rpcRequest, 'accountId1', {
      requestId: 'test1',
      positionsMd5: '1111',
      ordersMd5: '2222',
      specificationsMd5: '3333' });
    _sinon2.default.assert.calledWith(websocketClient.rpcRequest, 'accountId2', {
      requestId: 'test2',
      positionsMd5: '1111',
      ordersMd5: '2222',
      specificationsMd5: '3333' });
    _sinon2.default.assert.calledWith(websocketClient.rpcRequest, 'accountId3', {
      requestId: 'test8',
      positionsMd5: '1111',
      ordersMd5: '2222',
      specificationsMd5: '3333' });
    _sinon2.default.assert.calledWith(websocketClient.rpcRequest, 'accountId3', {
      requestId: 'test10',
      positionsMd5: '1111',
      ordersMd5: '2222',
      specificationsMd5: '3333',
      instanceIndex: 0 });
    _sinon2.default.assert.calledWith(websocketClient.rpcRequest, 'accountId4', {
      requestId: 'test7',
      positionsMd5: '1111',
      ordersMd5: '2222',
      specificationsMd5: '3333' });
    _sinon2.default.assert.calledWith(websocketClient.rpcRequest, 'accountId5', {
      requestId: 'test9',
      positionsMd5: '1111',
      ordersMd5: '2222',
      specificationsMd5: '3333' });
  });

  /**
   * @test {SynchronizationThrottler#_removeOldSyncIdsJob}
   */
  it('should remove expired synchronizations from queue', async () => {
    await throttler.scheduleSynchronize('accountId1', { requestId: 'test1' }, getHashes);
    await throttler.scheduleSynchronize('accountId2', { requestId: 'test2' }, getHashes);
    throttler.scheduleSynchronize('accountId3', { requestId: 'test3' }, getHashes).catch(() => {});
    throttler.scheduleSynchronize('accountId4', { requestId: 'test4' }, getHashes).catch(() => {});
    for (let i = 0; i < 20; i++) {
      await clock.tickAsync(8000);
      throttler.updateSynchronizationId('test1');
      throttler.updateSynchronizationId('test2');
    }
    throttler.scheduleSynchronize('accountId5', { requestId: 'test5' }, getHashes);
    for (let i = 0; i < 20; i++) {
      await clock.tickAsync(8000);
      throttler.updateSynchronizationId('test1');
      throttler.updateSynchronizationId('test2');
    }
    await clock.tickAsync(33000);
    _sinon2.default.assert.callCount(websocketClient.rpcRequest, 3);
    _sinon2.default.assert.calledWith(websocketClient.rpcRequest, 'accountId1', {
      requestId: 'test1',
      positionsMd5: '1111',
      ordersMd5: '2222',
      specificationsMd5: '3333' });
    _sinon2.default.assert.calledWith(websocketClient.rpcRequest, 'accountId2', {
      requestId: 'test2',
      positionsMd5: '1111',
      ordersMd5: '2222',
      specificationsMd5: '3333' });
    _sinon2.default.assert.calledWith(websocketClient.rpcRequest, 'accountId5', {
      requestId: 'test5',
      positionsMd5: '1111',
      ordersMd5: '2222',
      specificationsMd5: '3333' });
  });

  /**
   * @test {SynchronizationThrottler#scheduleSynchronize}
   */
  it('should not get queue stuck due to app synchronizations limit', async () => {
    throttler._client.socketInstances = { 'vint-hill': { 0: [{ synchronizationThrottler: { synchronizingAccounts: ['accountId21', 'accountId22', 'accountId23', 'accountId24', 'accountId25', 'accountId26', 'accountId27', 'accountId28', 'accountId29', 'accountId210', 'accountId211', 'accountId212', 'accountId213', 'accountId214', 'accountId215'] } }, { synchronizationThrottler: throttler }] } };
    throttler.scheduleSynchronize('accountId1', { requestId: 'test1' }, getHashes);
    throttler.scheduleSynchronize('accountId2', { requestId: 'test2' }, getHashes);
    throttler.scheduleSynchronize('accountId3', { requestId: 'test3' }, getHashes);
    await clock.tickAsync(5000);
    _sinon2.default.assert.notCalled(websocketClient.rpcRequest);
    throttler._client.socketInstances['vint-hill'][0][0].synchronizationThrottler.synchronizingAccounts = throttler._client.socketInstances['vint-hill'][0][0].synchronizationThrottler.synchronizingAccounts.slice(1);
    await clock.tickAsync(5000);
    _sinon2.default.assert.callCount(websocketClient.rpcRequest, 1);
    throttler._client.socketInstances['vint-hill'][0][0].synchronizationThrottler.synchronizingAccounts = throttler._client.socketInstances['vint-hill'][0][0].synchronizationThrottler.synchronizingAccounts.slice(1);
    await clock.tickAsync(5000);
    _sinon2.default.assert.callCount(websocketClient.rpcRequest, 2);
  });

  /**
   * @test {SynchronizationThrottler#removeSynchronizationId}
   */
  it('should not skip queue items when synchronization id is removed', async () => {
    throttler.scheduleSynchronize('accountId1', { requestId: 'test1' }, getHashes);
    throttler.scheduleSynchronize('accountId2', { requestId: 'test2' }, getHashes);
    throttler.scheduleSynchronize('accountId3', { requestId: 'test3' }, getHashes);
    throttler.scheduleSynchronize('accountId4', { requestId: 'test4' }, getHashes);
    throttler.scheduleSynchronize('accountId5', { requestId: 'test5' }, getHashes);
    await clock.tickAsync(2000);
    throttler.removeSynchronizationId('test3');
    await clock.tickAsync(2000);
    throttler.removeSynchronizationId('test1');
    throttler.removeSynchronizationId('test2');
    await clock.tickAsync(2000);
    _sinon2.default.assert.callCount(websocketClient.rpcRequest, 4);
  });

  /**
   * @test {SynchronizationThrottler#removeIdByParameters}
   */
  it('should remove id by parameters', async () => {
    await throttler.scheduleSynchronize('accountId1', { requestId: 'test1' }, getHashes);
    await throttler.scheduleSynchronize('accountId2', { requestId: 'test2', instanceIndex: 0, host: 'ps-mpa-0' }, getHashes);
    throttler.scheduleSynchronize('accountId3', { requestId: 'test3' }, getHashes);
    throttler.scheduleSynchronize('accountId2', { requestId: 'test4', instanceIndex: 1, host: 'ps-mpa-1' }, getHashes);
    throttler.scheduleSynchronize('accountId2', { requestId: 'test5', instanceIndex: 0, host: 'ps-mpa-2' }, getHashes);
    throttler.scheduleSynchronize('accountId4', { requestId: 'test6' });
    await new _promise2.default(res => setTimeout(res, 50));
    throttler.scheduleSynchronize('accountId2', { requestId: 'test7', instanceIndex: 0, host: 'ps-mpa-3' }, getHashes);
    await new _promise2.default(res => setTimeout(res, 50));
    throttler.removeIdByParameters('accountId2', 0, 'ps-mpa-0');
    throttler.removeIdByParameters('accountId2', 0, 'ps-mpa-3');
    throttler.removeIdByParameters('accountId2', 1, 'ps-mpa-1');
    throttler.removeSynchronizationId('test1');
    await new _promise2.default(res => setTimeout(res, 50));
    _sinon2.default.assert.calledWith(websocketClient.rpcRequest, 'accountId3', {
      requestId: 'test3',
      positionsMd5: '1111',
      ordersMd5: '2222',
      specificationsMd5: '3333' });
    _sinon2.default.assert.calledWith(websocketClient.rpcRequest, 'accountId2', {
      requestId: 'test5',
      positionsMd5: '1111',
      ordersMd5: '2222',
      specificationsMd5: '3333',
      instanceIndex: 0,
      host: 'ps-mpa-2' });
    _sinon2.default.assert.callCount(websocketClient.rpcRequest, 4);
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL2xpYi9jbGllbnRzL21ldGFBcGkvc3luY2hyb25pemF0aW9uVGhyb3R0bGVyLnNwZWMuZXM2Il0sIm5hbWVzIjpbImRlc2NyaWJlIiwidGhyb3R0bGVyIiwiY2xvY2siLCJzYW5kYm94Iiwid2Vic29ja2V0Q2xpZW50IiwiZ2V0SGFzaGVzIiwiYmVmb3JlIiwic2lub24iLCJjcmVhdGVTYW5kYm94IiwiYmVmb3JlRWFjaCIsInVzZUZha2VUaW1lcnMiLCJub3ciLCJEYXRlIiwic2hvdWxkQWR2YW5jZVRpbWUiLCJycGNSZXF1ZXN0IiwiYWNjb3VudElkIiwicmVxdWVzdCIsInRpbWVvdXRJblNlY29uZHMiLCJzdWJzY3JpYmVkQWNjb3VudElkcyIsIkFycmF5Iiwic29ja2V0SW5zdGFuY2VzIiwic3luY2hyb25pemF0aW9uVGhyb3R0bGVyIiwic3luY2hyb25pemluZ0FjY291bnRzIiwic3R1YiIsInBvc2l0aW9uc01kNSIsIm9yZGVyc01kNSIsInNwZWNpZmljYXRpb25zTWQ1IiwiU3luY2hyb25pemF0aW9uVGhyb3R0bGVyIiwic3RhcnQiLCJhZnRlckVhY2giLCJyZXN0b3JlIiwiaXQiLCJzY2hlZHVsZVN5bmNocm9uaXplIiwicmVxdWVzdElkIiwiYXNzZXJ0IiwibWF0Y2giLCJfc3luY2hyb25pemF0aW9uSWRzIiwidGVzdCIsInJlbW92ZVN5bmNocm9uaXphdGlvbklkIiwiY2FsbGVkV2l0aCIsImluc3RhbmNlSW5kZXgiLCJ0ZXN0MSIsInJlcyIsInNldFRpbWVvdXQiLCJjYWxsQ291bnQiLCJtYXhDb25jdXJyZW50U3luY2hyb25pemF0aW9ucyIsInRpY2tBc3luYyIsInVwZGF0ZVN5bmNocm9uaXphdGlvbklkIiwib25EaXNjb25uZWN0IiwiY2F0Y2giLCJpIiwiX2NsaWVudCIsIm5vdENhbGxlZCIsInNsaWNlIiwiaG9zdCIsInJlbW92ZUlkQnlQYXJhbWV0ZXJzIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQTs7OztBQUNBOzs7Ozs7QUFFQTs7O0FBR0FBLFNBQVMsMEJBQVQsRUFBcUMsTUFBTTtBQUN6QyxNQUFJQyxTQUFKLEVBQWVDLEtBQWYsRUFBc0JDLE9BQXRCLEVBQStCQyxlQUEvQixFQUFnREMsU0FBaEQ7O0FBRUFDLFNBQU8sTUFBTTtBQUNYSCxjQUFVSSxnQkFBTUMsYUFBTixFQUFWO0FBQ0QsR0FGRDs7QUFJQUMsYUFBVyxNQUFNO0FBQ2ZQLFlBQVFLLGdCQUFNRyxhQUFOLENBQW9CO0FBQzFCQyxXQUFLLElBQUlDLElBQUosQ0FBUywwQkFBVCxDQURxQjtBQUUxQkMseUJBQW1CO0FBRk8sS0FBcEIsQ0FBUjtBQUlBVCxzQkFBa0I7QUFDaEJVLGtCQUFZLENBQUNDLFNBQUQsRUFBWUMsT0FBWixFQUFxQkMsZ0JBQXJCLEtBQTBDLENBQUUsQ0FEeEM7QUFFaEJDLDRCQUFzQixNQUFNLElBQUlDLEtBQUosQ0FBVSxFQUFWLENBRlo7QUFHaEJDLHVCQUFpQixFQUFDLGFBQWEsRUFBQyxHQUFHLENBQUMsRUFBQ0MsMEJBQTBCLEVBQUNDLHVCQUF1QixFQUF4QixFQUEzQixFQUFELENBQUosRUFBZDtBQUhELEtBQWxCO0FBS0FsQixvQkFBZ0JVLFVBQWhCLEdBQTZCWCxRQUFRb0IsSUFBUixFQUE3QjtBQUNBbEIsZ0JBQVksT0FBTztBQUNqQm1CLG9CQUFjLE1BREc7QUFFakJDLGlCQUFXLE1BRk07QUFHakJDLHlCQUFtQjtBQUhGLEtBQVAsQ0FBWjtBQUtBekIsZ0JBQVksSUFBSTBCLGtDQUFKLENBQTZCdkIsZUFBN0IsRUFBOEMsQ0FBOUMsRUFBaUQsQ0FBakQsRUFBb0QsV0FBcEQsQ0FBWjtBQUNBSCxjQUFVMkIsS0FBVjtBQUNELEdBbEJEOztBQW9CQUMsWUFBVSxNQUFNO0FBQ2QzQixVQUFNNEIsT0FBTjtBQUNELEdBRkQ7O0FBSUE7OztBQUdBQyxLQUFHLHFEQUFILEVBQTBELFlBQVk7QUFDcEUsVUFBTTlCLFVBQVUrQixtQkFBVixDQUE4QixXQUE5QixFQUEyQyxFQUFDQyxXQUFXLE1BQVosRUFBM0MsRUFBZ0U1QixTQUFoRSxDQUFOO0FBQ0FFLG9CQUFNMkIsTUFBTixDQUFhQyxLQUFiLENBQW1CbEMsVUFBVW1DLG1CQUE3QixFQUFrRCxFQUFDQyxNQUFNLGFBQVAsRUFBbEQ7QUFDQXBDLGNBQVVxQyx1QkFBVixDQUFrQyxNQUFsQztBQUNBL0Isb0JBQU0yQixNQUFOLENBQWFLLFVBQWIsQ0FBd0JuQyxnQkFBZ0JVLFVBQXhDLEVBQW9ELFdBQXBELEVBQWlFO0FBQy9EbUIsaUJBQVcsTUFEb0Q7QUFFL0RULG9CQUFjLE1BRmlEO0FBRy9EQyxpQkFBVyxNQUhvRDtBQUkvREMseUJBQW1CLE1BSjRDLEVBQWpFO0FBS0FuQixvQkFBTTJCLE1BQU4sQ0FBYUMsS0FBYixDQUFtQmxDLFVBQVVtQyxtQkFBN0IsRUFBa0QsRUFBbEQ7QUFDRCxHQVZEOztBQVlBOzs7QUFHQUwsS0FBRyxvREFBSCxFQUF5RCxZQUFZO0FBQ25FLFVBQU05QixVQUFVK0IsbUJBQVYsQ0FBOEIsV0FBOUIsRUFBMkMsRUFBQ0MsV0FBVyxNQUFaLEVBQW9CTyxlQUFlLENBQW5DLEVBQTNDLEVBQWtGbkMsU0FBbEYsQ0FBTjtBQUNBLFVBQU1KLFVBQVUrQixtQkFBVixDQUE4QixXQUE5QixFQUEyQyxFQUFDQyxXQUFXLE9BQVosRUFBcUJPLGVBQWUsQ0FBcEMsRUFBM0MsRUFBbUZuQyxTQUFuRixDQUFOO0FBQ0FFLG9CQUFNMkIsTUFBTixDQUFhQyxLQUFiLENBQW1CbEMsVUFBVW1DLG1CQUE3QixFQUFrRCxFQUFDQyxNQUFNLGFBQVAsRUFBc0JJLE9BQU8sYUFBN0IsRUFBbEQ7QUFDQXhDLGNBQVVxQyx1QkFBVixDQUFrQyxNQUFsQyxFQUEwQyxDQUExQztBQUNBL0Isb0JBQU0yQixNQUFOLENBQWFDLEtBQWIsQ0FBbUJsQyxVQUFVbUMsbUJBQTdCLEVBQWtELEVBQUNLLE9BQU8sYUFBUixFQUFsRDtBQUNBbEMsb0JBQU0yQixNQUFOLENBQWFLLFVBQWIsQ0FBd0JuQyxnQkFBZ0JVLFVBQXhDLEVBQW9ELFdBQXBELEVBQWlFO0FBQy9EbUIsaUJBQVcsTUFEb0Q7QUFFL0RULG9CQUFjLE1BRmlEO0FBRy9EQyxpQkFBVyxNQUhvRDtBQUkvREMseUJBQW1CLE1BSjRDO0FBSy9EYyxxQkFBZSxDQUxnRCxFQUFqRTtBQU1BakMsb0JBQU0yQixNQUFOLENBQWFLLFVBQWIsQ0FBd0JuQyxnQkFBZ0JVLFVBQXhDLEVBQW9ELFdBQXBELEVBQWlFO0FBQy9EbUIsaUJBQVcsT0FEb0Q7QUFFL0RULG9CQUFjLE1BRmlEO0FBRy9EQyxpQkFBVyxNQUhvRDtBQUkvREMseUJBQW1CLE1BSjRDO0FBSy9EYyxxQkFBZSxDQUxnRCxFQUFqRTtBQU1BakMsb0JBQU0yQixNQUFOLENBQWFDLEtBQWIsQ0FBbUJsQyxVQUFVbUMsbUJBQTdCLEVBQWtELEVBQWxEO0FBQ0QsR0FuQkQ7O0FBcUJBOzs7QUFHQUwsS0FBRyxpRUFBSCxFQUFzRSxZQUFZO0FBQ2hGLFVBQU05QixVQUFVK0IsbUJBQVYsQ0FBOEIsWUFBOUIsRUFBNEMsRUFBQ0MsV0FBVyxPQUFaLEVBQTVDLEVBQWtFNUIsU0FBbEUsQ0FBTjtBQUNBLFVBQU1KLFVBQVUrQixtQkFBVixDQUE4QixZQUE5QixFQUE0QyxFQUFDQyxXQUFXLE9BQVosRUFBNUMsRUFBa0U1QixTQUFsRSxDQUFOO0FBQ0FFLG9CQUFNMkIsTUFBTixDQUFhSyxVQUFiLENBQXdCbkMsZ0JBQWdCVSxVQUF4QyxFQUFvRCxZQUFwRCxFQUFrRTtBQUNoRW1CLGlCQUFXLE9BRHFEO0FBRWhFVCxvQkFBYyxNQUZrRDtBQUdoRUMsaUJBQVcsTUFIcUQ7QUFJaEVDLHlCQUFtQixNQUo2QyxFQUFsRTtBQUtBbkIsb0JBQU0yQixNQUFOLENBQWFLLFVBQWIsQ0FBd0JuQyxnQkFBZ0JVLFVBQXhDLEVBQW9ELFlBQXBELEVBQWtFO0FBQ2hFbUIsaUJBQVcsT0FEcUQ7QUFFaEVULG9CQUFjLE1BRmtEO0FBR2hFQyxpQkFBVyxNQUhxRDtBQUloRUMseUJBQW1CLE1BSjZDLEVBQWxFO0FBS0F6QixjQUFVK0IsbUJBQVYsQ0FBOEIsWUFBOUIsRUFBNEMsRUFBQ0MsV0FBVyxPQUFaLEVBQTVDLEVBQWtFNUIsU0FBbEU7QUFDQSxVQUFNLHNCQUFZcUMsT0FBT0MsV0FBV0QsR0FBWCxFQUFnQixFQUFoQixDQUFuQixDQUFOO0FBQ0FuQyxvQkFBTTJCLE1BQU4sQ0FBYVUsU0FBYixDQUF1QnhDLGdCQUFnQlUsVUFBdkMsRUFBbUQsQ0FBbkQ7QUFDQWIsY0FBVXFDLHVCQUFWLENBQWtDLE9BQWxDO0FBQ0EsVUFBTSxzQkFBWUksT0FBT0MsV0FBV0QsR0FBWCxFQUFnQixFQUFoQixDQUFuQixDQUFOO0FBQ0FuQyxvQkFBTTJCLE1BQU4sQ0FBYVUsU0FBYixDQUF1QnhDLGdCQUFnQlUsVUFBdkMsRUFBbUQsQ0FBbkQ7QUFDRCxHQW5CRDs7QUFxQkE7OztBQUdBaUIsS0FBRywyREFBSCxFQUFnRSxZQUFZO0FBQzFFM0Isb0JBQWdCYyxvQkFBaEIsR0FBdUMsTUFBTSxJQUFJQyxLQUFKLENBQVUsRUFBVixDQUE3QztBQUNBLFVBQU1sQixVQUFVK0IsbUJBQVYsQ0FBOEIsWUFBOUIsRUFBNEMsRUFBQ0MsV0FBVyxPQUFaLEVBQTVDLEVBQWtFNUIsU0FBbEUsQ0FBTjtBQUNBLFVBQU1KLFVBQVUrQixtQkFBVixDQUE4QixZQUE5QixFQUE0QyxFQUFDQyxXQUFXLE9BQVosRUFBNUMsRUFBa0U1QixTQUFsRSxDQUFOO0FBQ0EsVUFBTUosVUFBVStCLG1CQUFWLENBQThCLFlBQTlCLEVBQTRDLEVBQUNDLFdBQVcsT0FBWixFQUE1QyxFQUFrRTVCLFNBQWxFLENBQU47QUFDQUUsb0JBQU0yQixNQUFOLENBQWFLLFVBQWIsQ0FBd0JuQyxnQkFBZ0JVLFVBQXhDLEVBQW9ELFlBQXBELEVBQWtFO0FBQ2hFbUIsaUJBQVcsT0FEcUQ7QUFFaEVULG9CQUFjLE1BRmtEO0FBR2hFQyxpQkFBVyxNQUhxRDtBQUloRUMseUJBQW1CLE1BSjZDLEVBQWxFO0FBS0FuQixvQkFBTTJCLE1BQU4sQ0FBYUssVUFBYixDQUF3Qm5DLGdCQUFnQlUsVUFBeEMsRUFBb0QsWUFBcEQsRUFBa0U7QUFDaEVtQixpQkFBVyxPQURxRDtBQUVoRVQsb0JBQWMsTUFGa0Q7QUFHaEVDLGlCQUFXLE1BSHFEO0FBSWhFQyx5QkFBbUIsTUFKNkMsRUFBbEU7QUFLQW5CLG9CQUFNMkIsTUFBTixDQUFhSyxVQUFiLENBQXdCbkMsZ0JBQWdCVSxVQUF4QyxFQUFvRCxZQUFwRCxFQUFrRTtBQUNoRW1CLGlCQUFXLE9BRHFEO0FBRWhFVCxvQkFBYyxNQUZrRDtBQUdoRUMsaUJBQVcsTUFIcUQ7QUFJaEVDLHlCQUFtQixNQUo2QyxFQUFsRTtBQUtBbkIsb0JBQU0yQixNQUFOLENBQWFVLFNBQWIsQ0FBdUJ4QyxnQkFBZ0JVLFVBQXZDLEVBQW1ELENBQW5EO0FBQ0QsR0FyQkQ7O0FBdUJBOzs7QUFHQWlCLEtBQUcscUZBQUgsRUFBMEYsWUFBWTtBQUNwRzNCLG9CQUFnQmMsb0JBQWhCLEdBQXVDLE1BQU0sSUFBSUMsS0FBSixDQUFVLEVBQVYsQ0FBN0M7QUFDQWxCLGdCQUFZLElBQUkwQixrQ0FBSixDQUE2QnZCLGVBQTdCLEVBQThDLENBQTlDLEVBQWlELENBQWpELEVBQW9ELFdBQXBELEVBQWlFLEVBQUN5QywrQkFBK0IsQ0FBaEMsRUFBakUsQ0FBWjtBQUNBekMsb0JBQWdCZ0IsZUFBaEIsR0FBa0MsRUFBQyxhQUFhLEVBQUMsR0FBRyxDQUFDLEVBQUNDLDBCQUEwQnBCLFNBQTNCLEVBQUQsRUFDbEQsRUFBQ29CLDBCQUEwQixFQUFDQyx1QkFBdUIsQ0FBQyxZQUFELENBQXhCLEVBQTNCLEVBRGtELENBQUosRUFBZCxFQUFsQztBQUVBLFVBQU1yQixVQUFVK0IsbUJBQVYsQ0FBOEIsWUFBOUIsRUFBNEMsRUFBQ0MsV0FBVyxPQUFaLEVBQTVDLEVBQWtFNUIsU0FBbEUsQ0FBTjtBQUNBLFVBQU1KLFVBQVUrQixtQkFBVixDQUE4QixZQUE5QixFQUE0QyxFQUFDQyxXQUFXLE9BQVosRUFBNUMsRUFBa0U1QixTQUFsRSxDQUFOO0FBQ0FKLGNBQVUrQixtQkFBVixDQUE4QixZQUE5QixFQUE0QyxFQUFDQyxXQUFXLE9BQVosRUFBNUMsRUFBa0U1QixTQUFsRTtBQUNBSixjQUFVK0IsbUJBQVYsQ0FBOEIsWUFBOUIsRUFBNEMsRUFBQ0MsV0FBVyxPQUFaLEVBQTVDLEVBQWtFNUIsU0FBbEU7QUFDQSxVQUFNLHNCQUFZcUMsT0FBT0MsV0FBV0QsR0FBWCxFQUFnQixFQUFoQixDQUFuQixDQUFOO0FBQ0FuQyxvQkFBTTJCLE1BQU4sQ0FBYVUsU0FBYixDQUF1QnhDLGdCQUFnQlUsVUFBdkMsRUFBbUQsQ0FBbkQ7QUFDQWIsY0FBVXFDLHVCQUFWLENBQWtDLE9BQWxDO0FBQ0EsVUFBTSxzQkFBWUksT0FBT0MsV0FBV0QsR0FBWCxFQUFnQixFQUFoQixDQUFuQixDQUFOO0FBQ0FuQyxvQkFBTTJCLE1BQU4sQ0FBYVUsU0FBYixDQUF1QnhDLGdCQUFnQlUsVUFBdkMsRUFBbUQsQ0FBbkQ7QUFDRCxHQWREOztBQWdCQTs7O0FBR0FpQixLQUFHLG9FQUFILEVBQXlFLFlBQVk7QUFDbkY5QixjQUFVK0IsbUJBQVYsQ0FBOEIsV0FBOUIsRUFBMkMsRUFBQ0MsV0FBVyxNQUFaLEVBQW9CTyxlQUFlLENBQW5DLEVBQTNDLEVBQWtGbkMsU0FBbEY7QUFDQUosY0FBVStCLG1CQUFWLENBQThCLFdBQTlCLEVBQTJDLEVBQUNDLFdBQVcsT0FBWixFQUFxQk8sZUFBZSxDQUFwQyxFQUEzQyxFQUFtRm5DLFNBQW5GO0FBQ0FKLGNBQVUrQixtQkFBVixDQUE4QixZQUE5QixFQUE0QyxFQUFDQyxXQUFXLE9BQVosRUFBNUMsRUFBa0U1QixTQUFsRTtBQUNBSixjQUFVK0IsbUJBQVYsQ0FBOEIsWUFBOUIsRUFBNEMsRUFBQ0MsV0FBVyxPQUFaLEVBQTVDLEVBQWtFNUIsU0FBbEU7QUFDQSxVQUFNLHNCQUFZcUMsT0FBT0MsV0FBV0QsR0FBWCxFQUFnQixFQUFoQixDQUFuQixDQUFOO0FBQ0FuQyxvQkFBTTJCLE1BQU4sQ0FBYVUsU0FBYixDQUF1QnhDLGdCQUFnQlUsVUFBdkMsRUFBbUQsQ0FBbkQ7QUFDQVAsb0JBQU0yQixNQUFOLENBQWFLLFVBQWIsQ0FBd0JuQyxnQkFBZ0JVLFVBQXhDLEVBQW9ELFdBQXBELEVBQWlFO0FBQy9EbUIsaUJBQVcsTUFEb0Q7QUFFL0RULG9CQUFjLE1BRmlEO0FBRy9EQyxpQkFBVyxNQUhvRDtBQUkvREMseUJBQW1CLE1BSjRDO0FBSy9EYyxxQkFBZSxDQUxnRCxFQUFqRTtBQU1BakMsb0JBQU0yQixNQUFOLENBQWFLLFVBQWIsQ0FBd0JuQyxnQkFBZ0JVLFVBQXhDLEVBQW9ELFdBQXBELEVBQWlFO0FBQy9EbUIsaUJBQVcsT0FEb0Q7QUFFL0RULG9CQUFjLE1BRmlEO0FBRy9EQyxpQkFBVyxNQUhvRDtBQUkvREMseUJBQW1CLE1BSjRDO0FBSy9EYyxxQkFBZSxDQUxnRCxFQUFqRTtBQU1BakMsb0JBQU0yQixNQUFOLENBQWFLLFVBQWIsQ0FBd0JuQyxnQkFBZ0JVLFVBQXhDLEVBQW9ELFlBQXBELEVBQWtFO0FBQ2hFbUIsaUJBQVcsT0FEcUQ7QUFFaEVULG9CQUFjLE1BRmtEO0FBR2hFQyxpQkFBVyxNQUhxRDtBQUloRUMseUJBQW1CLE1BSjZDLEVBQWxFO0FBS0FuQixvQkFBTTJCLE1BQU4sQ0FBYUMsS0FBYixDQUFtQmxDLFVBQVVtQyxtQkFBN0IsRUFBa0QsRUFBbEQ7QUFDRCxHQXpCRDs7QUEyQkE7OztBQUdBTCxLQUFHLHlFQUFILEVBQThFLFlBQVk7QUFDeEYsVUFBTTlCLFVBQVUrQixtQkFBVixDQUE4QixZQUE5QixFQUE0QyxFQUFDQyxXQUFXLE9BQVosRUFBNUMsRUFBa0U1QixTQUFsRSxDQUFOO0FBQ0EsVUFBTUosVUFBVStCLG1CQUFWLENBQThCLFlBQTlCLEVBQTRDLEVBQUNDLFdBQVcsT0FBWixFQUE1QyxFQUFrRTVCLFNBQWxFLENBQU47QUFDQUosY0FBVStCLG1CQUFWLENBQThCLFlBQTlCLEVBQTRDLEVBQUNDLFdBQVcsT0FBWixFQUE1QyxFQUFrRTVCLFNBQWxFO0FBQ0EsVUFBTSxzQkFBWXFDLE9BQU9DLFdBQVdELEdBQVgsRUFBZ0IsRUFBaEIsQ0FBbkIsQ0FBTjtBQUNBbkMsb0JBQU0yQixNQUFOLENBQWFVLFNBQWIsQ0FBdUJ4QyxnQkFBZ0JVLFVBQXZDLEVBQW1ELENBQW5EO0FBQ0EsVUFBTVosTUFBTTRDLFNBQU4sQ0FBZ0IsS0FBaEIsQ0FBTjtBQUNBdkMsb0JBQU0yQixNQUFOLENBQWFVLFNBQWIsQ0FBdUJ4QyxnQkFBZ0JVLFVBQXZDLEVBQW1ELENBQW5EO0FBQ0QsR0FSRDs7QUFVQTs7O0FBR0FpQixLQUFHLDZCQUFILEVBQWtDLFlBQVk7QUFDNUMsVUFBTTlCLFVBQVUrQixtQkFBVixDQUE4QixZQUE5QixFQUE0QyxFQUFDQyxXQUFXLE9BQVosRUFBNUMsRUFBa0U1QixTQUFsRSxDQUFOO0FBQ0EsVUFBTUosVUFBVStCLG1CQUFWLENBQThCLFlBQTlCLEVBQTRDLEVBQUNDLFdBQVcsT0FBWixFQUE1QyxFQUFrRTVCLFNBQWxFLENBQU47QUFDQUosY0FBVStCLG1CQUFWLENBQThCLFlBQTlCLEVBQTRDLEVBQUNDLFdBQVcsT0FBWixFQUE1QyxFQUFrRTVCLFNBQWxFO0FBQ0EsVUFBTSxzQkFBWXFDLE9BQU9DLFdBQVdELEdBQVgsRUFBZ0IsRUFBaEIsQ0FBbkIsQ0FBTjtBQUNBbkMsb0JBQU0yQixNQUFOLENBQWFVLFNBQWIsQ0FBdUJ4QyxnQkFBZ0JVLFVBQXZDLEVBQW1ELENBQW5EO0FBQ0EsVUFBTVosTUFBTTRDLFNBQU4sQ0FBZ0IsS0FBaEIsQ0FBTjtBQUNBdkMsb0JBQU0yQixNQUFOLENBQWFVLFNBQWIsQ0FBdUJ4QyxnQkFBZ0JVLFVBQXZDLEVBQW1ELENBQW5EO0FBQ0EsVUFBTVosTUFBTTRDLFNBQU4sQ0FBZ0IsS0FBaEIsQ0FBTjtBQUNBN0MsY0FBVThDLHVCQUFWLENBQWtDLE9BQWxDO0FBQ0E5QyxjQUFVK0IsbUJBQVYsQ0FBOEIsWUFBOUIsRUFBNEMsRUFBQ0MsV0FBVyxPQUFaLEVBQTVDLEVBQWtFNUIsU0FBbEU7QUFDQUosY0FBVStCLG1CQUFWLENBQThCLFlBQTlCLEVBQTRDLEVBQUNDLFdBQVcsT0FBWixFQUE1QyxFQUFrRTVCLFNBQWxFO0FBQ0EsVUFBTSxzQkFBWXFDLE9BQU9DLFdBQVdELEdBQVgsRUFBZ0IsRUFBaEIsQ0FBbkIsQ0FBTjtBQUNBbkMsb0JBQU0yQixNQUFOLENBQWFVLFNBQWIsQ0FBdUJ4QyxnQkFBZ0JVLFVBQXZDLEVBQW1ELENBQW5EO0FBQ0QsR0FkRDs7QUFnQkE7OztBQUdBaUIsS0FBRywrQkFBSCxFQUFvQyxZQUFZO0FBQzlDOUIsY0FBVStCLG1CQUFWLENBQThCLFlBQTlCLEVBQTRDLEVBQUNDLFdBQVcsT0FBWixFQUE1QyxFQUFrRTVCLFNBQWxFO0FBQ0FKLGNBQVUrQixtQkFBVixDQUE4QixZQUE5QixFQUE0QyxFQUFDQyxXQUFXLE9BQVosRUFBNUMsRUFBa0U1QixTQUFsRTtBQUNBSixjQUFVK0IsbUJBQVYsQ0FBOEIsWUFBOUIsRUFBNEMsRUFBQ0MsV0FBVyxPQUFaLEVBQTVDLEVBQWtFNUIsU0FBbEU7QUFDQUosY0FBVStCLG1CQUFWLENBQThCLFlBQTlCLEVBQTRDLEVBQUNDLFdBQVcsT0FBWixFQUE1QyxFQUFrRTVCLFNBQWxFO0FBQ0FKLGNBQVUrQixtQkFBVixDQUE4QixZQUE5QixFQUE0QyxFQUFDQyxXQUFXLE9BQVosRUFBNUMsRUFBa0U1QixTQUFsRTtBQUNBSixjQUFVK0IsbUJBQVYsQ0FBOEIsWUFBOUIsRUFBNEMsRUFBQ0MsV0FBVyxPQUFaLEVBQXFCTyxlQUFlLENBQXBDLEVBQTVDO0FBQ0EsVUFBTSxzQkFBWUUsT0FBT0MsV0FBV0QsR0FBWCxFQUFnQixFQUFoQixDQUFuQixDQUFOO0FBQ0FuQyxvQkFBTTJCLE1BQU4sQ0FBYVUsU0FBYixDQUF1QnhDLGdCQUFnQlUsVUFBdkMsRUFBbUQsQ0FBbkQ7QUFDRCxHQVREOztBQVdBOzs7QUFHQWlCLEtBQUcsOENBQUgsRUFBbUQsWUFBWTtBQUM3RCxVQUFNOUIsVUFBVStCLG1CQUFWLENBQThCLFlBQTlCLEVBQTRDLEVBQUNDLFdBQVcsT0FBWixFQUE1QyxFQUFrRTVCLFNBQWxFLENBQU47QUFDQSxVQUFNSixVQUFVK0IsbUJBQVYsQ0FBOEIsWUFBOUIsRUFBNEMsRUFBQ0MsV0FBVyxPQUFaLEVBQTVDLEVBQWtFNUIsU0FBbEUsQ0FBTjtBQUNBLFVBQU0sc0JBQVlxQyxPQUFPQyxXQUFXRCxHQUFYLEVBQWdCLEVBQWhCLENBQW5CLENBQU47QUFDQW5DLG9CQUFNMkIsTUFBTixDQUFhVSxTQUFiLENBQXVCeEMsZ0JBQWdCVSxVQUF2QyxFQUFtRCxDQUFuRDtBQUNBYixjQUFVK0MsWUFBVjtBQUNBL0MsY0FBVStCLG1CQUFWLENBQThCLFlBQTlCLEVBQTRDLEVBQUNDLFdBQVcsT0FBWixFQUE1QyxFQUFrRTVCLFNBQWxFO0FBQ0EsVUFBTSxzQkFBWXFDLE9BQU9DLFdBQVdELEdBQVgsRUFBZ0IsRUFBaEIsQ0FBbkIsQ0FBTjtBQUNBbkMsb0JBQU0yQixNQUFOLENBQWFVLFNBQWIsQ0FBdUJ4QyxnQkFBZ0JVLFVBQXZDLEVBQW1ELENBQW5EO0FBQ0QsR0FURDs7QUFXQTs7O0FBR0FpQixLQUFHLDJDQUFILEVBQWdELFlBQVk7QUFDMUQsVUFBTTlCLFVBQVUrQixtQkFBVixDQUE4QixZQUE5QixFQUE0QyxFQUFDQyxXQUFXLE9BQVosRUFBNUMsRUFBa0U1QixTQUFsRSxDQUFOO0FBQ0EsVUFBTUosVUFBVStCLG1CQUFWLENBQThCLFlBQTlCLEVBQTRDLEVBQUNDLFdBQVcsT0FBWixFQUE1QyxFQUFrRTVCLFNBQWxFLENBQU47QUFDQUosY0FBVStCLG1CQUFWLENBQThCLFlBQTlCLEVBQTRDLEVBQUNDLFdBQVcsT0FBWixFQUE1QyxHQUFtRTVCLFNBQW5FO0FBQ0FKLGNBQVUrQixtQkFBVixDQUE4QixZQUE5QixFQUE0QyxFQUFDQyxXQUFXLE9BQVosRUFBcUJPLGVBQWUsQ0FBcEMsRUFBNUMsRUFBb0ZuQyxTQUFwRjtBQUNBSixjQUFVK0IsbUJBQVYsQ0FBOEIsWUFBOUIsRUFBNEMsRUFBQ0MsV0FBVyxPQUFaLEVBQTVDLEVBQWtFNUIsU0FBbEU7QUFDQUosY0FBVStCLG1CQUFWLENBQThCLFlBQTlCLEVBQTRDLEVBQUNDLFdBQVcsT0FBWixFQUE1QyxFQUFrRTVCLFNBQWxFO0FBQ0FKLGNBQVUrQixtQkFBVixDQUE4QixZQUE5QixFQUE0QyxFQUFDQyxXQUFXLE9BQVosRUFBNUMsRUFBa0U1QixTQUFsRTtBQUNBSixjQUFVK0IsbUJBQVYsQ0FBOEIsWUFBOUIsRUFBNEMsRUFBQ0MsV0FBVyxPQUFaLEVBQTVDLEVBQWtFNUIsU0FBbEU7QUFDQUosY0FBVStCLG1CQUFWLENBQThCLFlBQTlCLEVBQTRDLEVBQUNDLFdBQVcsT0FBWixFQUE1QyxFQUFrRTVCLFNBQWxFO0FBQ0FKLGNBQVUrQixtQkFBVixDQUE4QixZQUE5QixFQUE0QyxFQUFDQyxXQUFXLFFBQVosRUFBc0JPLGVBQWUsQ0FBckMsRUFBNUMsRUFBcUZuQyxTQUFyRjtBQUNBLFVBQU1ILE1BQU00QyxTQUFOLENBQWdCLEtBQWhCLENBQU47QUFDQXZDLG9CQUFNMkIsTUFBTixDQUFhVSxTQUFiLENBQXVCeEMsZ0JBQWdCVSxVQUF2QyxFQUFtRCxDQUFuRDtBQUNBUCxvQkFBTTJCLE1BQU4sQ0FBYUssVUFBYixDQUF3Qm5DLGdCQUFnQlUsVUFBeEMsRUFBb0QsWUFBcEQsRUFBa0U7QUFDaEVtQixpQkFBVyxPQURxRDtBQUVoRVQsb0JBQWMsTUFGa0Q7QUFHaEVDLGlCQUFXLE1BSHFEO0FBSWhFQyx5QkFBbUIsTUFKNkMsRUFBbEU7QUFLQW5CLG9CQUFNMkIsTUFBTixDQUFhSyxVQUFiLENBQXdCbkMsZ0JBQWdCVSxVQUF4QyxFQUFvRCxZQUFwRCxFQUFrRTtBQUNoRW1CLGlCQUFXLE9BRHFEO0FBRWhFVCxvQkFBYyxNQUZrRDtBQUdoRUMsaUJBQVcsTUFIcUQ7QUFJaEVDLHlCQUFtQixNQUo2QyxFQUFsRTtBQUtBbkIsb0JBQU0yQixNQUFOLENBQWFLLFVBQWIsQ0FBd0JuQyxnQkFBZ0JVLFVBQXhDLEVBQW9ELFlBQXBELEVBQWtFO0FBQ2hFbUIsaUJBQVcsT0FEcUQ7QUFFaEVULG9CQUFjLE1BRmtEO0FBR2hFQyxpQkFBVyxNQUhxRDtBQUloRUMseUJBQW1CLE1BSjZDLEVBQWxFO0FBS0FuQixvQkFBTTJCLE1BQU4sQ0FBYUssVUFBYixDQUF3Qm5DLGdCQUFnQlUsVUFBeEMsRUFBb0QsWUFBcEQsRUFBa0U7QUFDaEVtQixpQkFBVyxRQURxRDtBQUVoRVQsb0JBQWMsTUFGa0Q7QUFHaEVDLGlCQUFXLE1BSHFEO0FBSWhFQyx5QkFBbUIsTUFKNkM7QUFLaEVjLHFCQUFlLENBTGlELEVBQWxFO0FBTUFqQyxvQkFBTTJCLE1BQU4sQ0FBYUssVUFBYixDQUF3Qm5DLGdCQUFnQlUsVUFBeEMsRUFBb0QsWUFBcEQsRUFBa0U7QUFDaEVtQixpQkFBVyxPQURxRDtBQUVoRVQsb0JBQWMsTUFGa0Q7QUFHaEVDLGlCQUFXLE1BSHFEO0FBSWhFQyx5QkFBbUIsTUFKNkMsRUFBbEU7QUFLQW5CLG9CQUFNMkIsTUFBTixDQUFhSyxVQUFiLENBQXdCbkMsZ0JBQWdCVSxVQUF4QyxFQUFvRCxZQUFwRCxFQUFrRTtBQUNoRW1CLGlCQUFXLE9BRHFEO0FBRWhFVCxvQkFBYyxNQUZrRDtBQUdoRUMsaUJBQVcsTUFIcUQ7QUFJaEVDLHlCQUFtQixNQUo2QyxFQUFsRTtBQUtELEdBNUNEOztBQThDQTs7O0FBR0FLLEtBQUcsbURBQUgsRUFBd0QsWUFBWTtBQUNsRSxVQUFNOUIsVUFBVStCLG1CQUFWLENBQThCLFlBQTlCLEVBQTRDLEVBQUNDLFdBQVcsT0FBWixFQUE1QyxFQUFrRTVCLFNBQWxFLENBQU47QUFDQSxVQUFNSixVQUFVK0IsbUJBQVYsQ0FBOEIsWUFBOUIsRUFBNEMsRUFBQ0MsV0FBVyxPQUFaLEVBQTVDLEVBQWtFNUIsU0FBbEUsQ0FBTjtBQUNBSixjQUFVK0IsbUJBQVYsQ0FBOEIsWUFBOUIsRUFBNEMsRUFBQ0MsV0FBVyxPQUFaLEVBQTVDLEVBQWtFNUIsU0FBbEUsRUFBNkU0QyxLQUE3RSxDQUFtRixNQUFNLENBQUUsQ0FBM0Y7QUFDQWhELGNBQVUrQixtQkFBVixDQUE4QixZQUE5QixFQUE0QyxFQUFDQyxXQUFXLE9BQVosRUFBNUMsRUFBa0U1QixTQUFsRSxFQUE2RTRDLEtBQTdFLENBQW1GLE1BQU0sQ0FBRSxDQUEzRjtBQUNBLFNBQUssSUFBSUMsSUFBSSxDQUFiLEVBQWdCQSxJQUFJLEVBQXBCLEVBQXdCQSxHQUF4QixFQUE2QjtBQUMzQixZQUFNaEQsTUFBTTRDLFNBQU4sQ0FBZ0IsSUFBaEIsQ0FBTjtBQUNBN0MsZ0JBQVU4Qyx1QkFBVixDQUFrQyxPQUFsQztBQUNBOUMsZ0JBQVU4Qyx1QkFBVixDQUFrQyxPQUFsQztBQUNEO0FBQ0Q5QyxjQUFVK0IsbUJBQVYsQ0FBOEIsWUFBOUIsRUFBNEMsRUFBQ0MsV0FBVyxPQUFaLEVBQTVDLEVBQWtFNUIsU0FBbEU7QUFDQSxTQUFLLElBQUk2QyxJQUFJLENBQWIsRUFBZ0JBLElBQUksRUFBcEIsRUFBd0JBLEdBQXhCLEVBQTZCO0FBQzNCLFlBQU1oRCxNQUFNNEMsU0FBTixDQUFnQixJQUFoQixDQUFOO0FBQ0E3QyxnQkFBVThDLHVCQUFWLENBQWtDLE9BQWxDO0FBQ0E5QyxnQkFBVThDLHVCQUFWLENBQWtDLE9BQWxDO0FBQ0Q7QUFDRCxVQUFNN0MsTUFBTTRDLFNBQU4sQ0FBZ0IsS0FBaEIsQ0FBTjtBQUNBdkMsb0JBQU0yQixNQUFOLENBQWFVLFNBQWIsQ0FBdUJ4QyxnQkFBZ0JVLFVBQXZDLEVBQW1ELENBQW5EO0FBQ0FQLG9CQUFNMkIsTUFBTixDQUFhSyxVQUFiLENBQXdCbkMsZ0JBQWdCVSxVQUF4QyxFQUFvRCxZQUFwRCxFQUFrRTtBQUNoRW1CLGlCQUFXLE9BRHFEO0FBRWhFVCxvQkFBYyxNQUZrRDtBQUdoRUMsaUJBQVcsTUFIcUQ7QUFJaEVDLHlCQUFtQixNQUo2QyxFQUFsRTtBQUtBbkIsb0JBQU0yQixNQUFOLENBQWFLLFVBQWIsQ0FBd0JuQyxnQkFBZ0JVLFVBQXhDLEVBQW9ELFlBQXBELEVBQWtFO0FBQ2hFbUIsaUJBQVcsT0FEcUQ7QUFFaEVULG9CQUFjLE1BRmtEO0FBR2hFQyxpQkFBVyxNQUhxRDtBQUloRUMseUJBQW1CLE1BSjZDLEVBQWxFO0FBS0FuQixvQkFBTTJCLE1BQU4sQ0FBYUssVUFBYixDQUF3Qm5DLGdCQUFnQlUsVUFBeEMsRUFBb0QsWUFBcEQsRUFBa0U7QUFDaEVtQixpQkFBVyxPQURxRDtBQUVoRVQsb0JBQWMsTUFGa0Q7QUFHaEVDLGlCQUFXLE1BSHFEO0FBSWhFQyx5QkFBbUIsTUFKNkMsRUFBbEU7QUFLRCxHQWpDRDs7QUFtQ0E7OztBQUdBSyxLQUFHLDhEQUFILEVBQW1FLFlBQVk7QUFDN0U5QixjQUFVa0QsT0FBVixDQUFrQi9CLGVBQWxCLEdBQW9DLEVBQUMsYUFBYSxFQUFDLEdBQUcsQ0FBQyxFQUFDQywwQkFBMEIsRUFBQ0MsdUJBQXVCLENBQ3hHLGFBRHdHLEVBQ3pGLGFBRHlGLEVBQzFFLGFBRDBFLEVBQzNELGFBRDJELEVBQzVDLGFBRDRDLEVBQzdCLGFBRDZCLEVBRXhHLGFBRndHLEVBRXpGLGFBRnlGLEVBRTFFLGFBRjBFLEVBRTNELGNBRjJELEVBRTNDLGNBRjJDLEVBRTNCLGNBRjJCLEVBR3hHLGNBSHdHLEVBR3hGLGNBSHdGLEVBR3hFLGNBSHdFLENBQXhCLEVBQTNCLEVBQUQsRUFHRCxFQUFDRCwwQkFBMEJwQixTQUEzQixFQUhDLENBQUosRUFBZCxFQUFwQztBQUlBQSxjQUFVK0IsbUJBQVYsQ0FBOEIsWUFBOUIsRUFBNEMsRUFBQ0MsV0FBVyxPQUFaLEVBQTVDLEVBQWtFNUIsU0FBbEU7QUFDQUosY0FBVStCLG1CQUFWLENBQThCLFlBQTlCLEVBQTRDLEVBQUNDLFdBQVcsT0FBWixFQUE1QyxFQUFrRTVCLFNBQWxFO0FBQ0FKLGNBQVUrQixtQkFBVixDQUE4QixZQUE5QixFQUE0QyxFQUFDQyxXQUFXLE9BQVosRUFBNUMsRUFBa0U1QixTQUFsRTtBQUNBLFVBQU1ILE1BQU00QyxTQUFOLENBQWdCLElBQWhCLENBQU47QUFDQXZDLG9CQUFNMkIsTUFBTixDQUFha0IsU0FBYixDQUF1QmhELGdCQUFnQlUsVUFBdkM7QUFDQWIsY0FBVWtELE9BQVYsQ0FBa0IvQixlQUFsQixDQUFrQyxXQUFsQyxFQUErQyxDQUEvQyxFQUFrRCxDQUFsRCxFQUFxREMsd0JBQXJELENBQThFQyxxQkFBOUUsR0FDRXJCLFVBQVVrRCxPQUFWLENBQWtCL0IsZUFBbEIsQ0FBa0MsV0FBbEMsRUFBK0MsQ0FBL0MsRUFBa0QsQ0FBbEQsRUFBcURDLHdCQUFyRCxDQUE4RUMscUJBQTlFLENBQW9HK0IsS0FBcEcsQ0FBMEcsQ0FBMUcsQ0FERjtBQUVBLFVBQU1uRCxNQUFNNEMsU0FBTixDQUFnQixJQUFoQixDQUFOO0FBQ0F2QyxvQkFBTTJCLE1BQU4sQ0FBYVUsU0FBYixDQUF1QnhDLGdCQUFnQlUsVUFBdkMsRUFBbUQsQ0FBbkQ7QUFDQWIsY0FBVWtELE9BQVYsQ0FBa0IvQixlQUFsQixDQUFrQyxXQUFsQyxFQUErQyxDQUEvQyxFQUFrRCxDQUFsRCxFQUFxREMsd0JBQXJELENBQThFQyxxQkFBOUUsR0FDRXJCLFVBQVVrRCxPQUFWLENBQWtCL0IsZUFBbEIsQ0FBa0MsV0FBbEMsRUFBK0MsQ0FBL0MsRUFBa0QsQ0FBbEQsRUFBcURDLHdCQUFyRCxDQUE4RUMscUJBQTlFLENBQW9HK0IsS0FBcEcsQ0FBMEcsQ0FBMUcsQ0FERjtBQUVBLFVBQU1uRCxNQUFNNEMsU0FBTixDQUFnQixJQUFoQixDQUFOO0FBQ0F2QyxvQkFBTTJCLE1BQU4sQ0FBYVUsU0FBYixDQUF1QnhDLGdCQUFnQlUsVUFBdkMsRUFBbUQsQ0FBbkQ7QUFDRCxHQWxCRDs7QUFvQkE7OztBQUdBaUIsS0FBRyxnRUFBSCxFQUFxRSxZQUFZO0FBQy9FOUIsY0FBVStCLG1CQUFWLENBQThCLFlBQTlCLEVBQTRDLEVBQUNDLFdBQVcsT0FBWixFQUE1QyxFQUFrRTVCLFNBQWxFO0FBQ0FKLGNBQVUrQixtQkFBVixDQUE4QixZQUE5QixFQUE0QyxFQUFDQyxXQUFXLE9BQVosRUFBNUMsRUFBa0U1QixTQUFsRTtBQUNBSixjQUFVK0IsbUJBQVYsQ0FBOEIsWUFBOUIsRUFBNEMsRUFBQ0MsV0FBVyxPQUFaLEVBQTVDLEVBQWtFNUIsU0FBbEU7QUFDQUosY0FBVStCLG1CQUFWLENBQThCLFlBQTlCLEVBQTRDLEVBQUNDLFdBQVcsT0FBWixFQUE1QyxFQUFrRTVCLFNBQWxFO0FBQ0FKLGNBQVUrQixtQkFBVixDQUE4QixZQUE5QixFQUE0QyxFQUFDQyxXQUFXLE9BQVosRUFBNUMsRUFBa0U1QixTQUFsRTtBQUNBLFVBQU1ILE1BQU00QyxTQUFOLENBQWdCLElBQWhCLENBQU47QUFDQTdDLGNBQVVxQyx1QkFBVixDQUFrQyxPQUFsQztBQUNBLFVBQU1wQyxNQUFNNEMsU0FBTixDQUFnQixJQUFoQixDQUFOO0FBQ0E3QyxjQUFVcUMsdUJBQVYsQ0FBa0MsT0FBbEM7QUFDQXJDLGNBQVVxQyx1QkFBVixDQUFrQyxPQUFsQztBQUNBLFVBQU1wQyxNQUFNNEMsU0FBTixDQUFnQixJQUFoQixDQUFOO0FBQ0F2QyxvQkFBTTJCLE1BQU4sQ0FBYVUsU0FBYixDQUF1QnhDLGdCQUFnQlUsVUFBdkMsRUFBbUQsQ0FBbkQ7QUFDRCxHQWJEOztBQWVBOzs7QUFHQWlCLEtBQUcsZ0NBQUgsRUFBcUMsWUFBWTtBQUMvQyxVQUFNOUIsVUFBVStCLG1CQUFWLENBQThCLFlBQTlCLEVBQTRDLEVBQUNDLFdBQVcsT0FBWixFQUE1QyxFQUFrRTVCLFNBQWxFLENBQU47QUFDQSxVQUFNSixVQUFVK0IsbUJBQVYsQ0FBOEIsWUFBOUIsRUFBNEMsRUFBQ0MsV0FBVyxPQUFaLEVBQXFCTyxlQUFlLENBQXBDLEVBQXVDYyxNQUFNLFVBQTdDLEVBQTVDLEVBQ0pqRCxTQURJLENBQU47QUFFQUosY0FBVStCLG1CQUFWLENBQThCLFlBQTlCLEVBQTRDLEVBQUNDLFdBQVcsT0FBWixFQUE1QyxFQUFrRTVCLFNBQWxFO0FBQ0FKLGNBQVUrQixtQkFBVixDQUE4QixZQUE5QixFQUE0QyxFQUFDQyxXQUFXLE9BQVosRUFBcUJPLGVBQWUsQ0FBcEMsRUFBdUNjLE1BQU0sVUFBN0MsRUFBNUMsRUFBc0dqRCxTQUF0RztBQUNBSixjQUFVK0IsbUJBQVYsQ0FBOEIsWUFBOUIsRUFBNEMsRUFBQ0MsV0FBVyxPQUFaLEVBQXFCTyxlQUFlLENBQXBDLEVBQXVDYyxNQUFNLFVBQTdDLEVBQTVDLEVBQXNHakQsU0FBdEc7QUFDQUosY0FBVStCLG1CQUFWLENBQThCLFlBQTlCLEVBQTRDLEVBQUNDLFdBQVcsT0FBWixFQUE1QztBQUNBLFVBQU0sc0JBQVlTLE9BQU9DLFdBQVdELEdBQVgsRUFBZ0IsRUFBaEIsQ0FBbkIsQ0FBTjtBQUNBekMsY0FBVStCLG1CQUFWLENBQThCLFlBQTlCLEVBQTRDLEVBQUNDLFdBQVcsT0FBWixFQUFxQk8sZUFBZSxDQUFwQyxFQUF1Q2MsTUFBTSxVQUE3QyxFQUE1QyxFQUFzR2pELFNBQXRHO0FBQ0EsVUFBTSxzQkFBWXFDLE9BQU9DLFdBQVdELEdBQVgsRUFBZ0IsRUFBaEIsQ0FBbkIsQ0FBTjtBQUNBekMsY0FBVXNELG9CQUFWLENBQStCLFlBQS9CLEVBQTZDLENBQTdDLEVBQWdELFVBQWhEO0FBQ0F0RCxjQUFVc0Qsb0JBQVYsQ0FBK0IsWUFBL0IsRUFBNkMsQ0FBN0MsRUFBZ0QsVUFBaEQ7QUFDQXRELGNBQVVzRCxvQkFBVixDQUErQixZQUEvQixFQUE2QyxDQUE3QyxFQUFnRCxVQUFoRDtBQUNBdEQsY0FBVXFDLHVCQUFWLENBQWtDLE9BQWxDO0FBQ0EsVUFBTSxzQkFBWUksT0FBT0MsV0FBV0QsR0FBWCxFQUFnQixFQUFoQixDQUFuQixDQUFOO0FBQ0FuQyxvQkFBTTJCLE1BQU4sQ0FBYUssVUFBYixDQUF3Qm5DLGdCQUFnQlUsVUFBeEMsRUFBb0QsWUFBcEQsRUFBa0U7QUFDaEVtQixpQkFBVyxPQURxRDtBQUVoRVQsb0JBQWMsTUFGa0Q7QUFHaEVDLGlCQUFXLE1BSHFEO0FBSWhFQyx5QkFBbUIsTUFKNkMsRUFBbEU7QUFLQW5CLG9CQUFNMkIsTUFBTixDQUFhSyxVQUFiLENBQXdCbkMsZ0JBQWdCVSxVQUF4QyxFQUFvRCxZQUFwRCxFQUFrRTtBQUNoRW1CLGlCQUFXLE9BRHFEO0FBRWhFVCxvQkFBYyxNQUZrRDtBQUdoRUMsaUJBQVcsTUFIcUQ7QUFJaEVDLHlCQUFtQixNQUo2QztBQUtoRWMscUJBQWUsQ0FMaUQ7QUFNaEVjLFlBQU0sVUFOMEQsRUFBbEU7QUFPQS9DLG9CQUFNMkIsTUFBTixDQUFhVSxTQUFiLENBQXVCeEMsZ0JBQWdCVSxVQUF2QyxFQUFtRCxDQUFuRDtBQUNELEdBN0JEO0FBK0JELENBdllEIiwiZmlsZSI6InN5bmNocm9uaXphdGlvblRocm90dGxlci5zcGVjLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFN5bmNocm9uaXphdGlvblRocm90dGxlciBmcm9tICcuL3N5bmNocm9uaXphdGlvblRocm90dGxlcic7XG5pbXBvcnQgc2lub24gZnJvbSAnc2lub24nO1xuXG4vKipcbiAqIEB0ZXN0IHtTeW5jaHJvbml6YXRpb25UaHJvdHRsZXJ9XG4gKi9cbmRlc2NyaWJlKCdTeW5jaHJvbml6YXRpb25UaHJvdHRsZXInLCAoKSA9PiB7XG4gIGxldCB0aHJvdHRsZXIsIGNsb2NrLCBzYW5kYm94LCB3ZWJzb2NrZXRDbGllbnQsIGdldEhhc2hlcztcblxuICBiZWZvcmUoKCkgPT4ge1xuICAgIHNhbmRib3ggPSBzaW5vbi5jcmVhdGVTYW5kYm94KCk7XG4gIH0pO1xuXG4gIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgIGNsb2NrID0gc2lub24udXNlRmFrZVRpbWVycyh7XG4gICAgICBub3c6IG5ldyBEYXRlKCcyMDIwLTEwLTA1VDEwOjAwOjAwLjAwMFonKSxcbiAgICAgIHNob3VsZEFkdmFuY2VUaW1lOiB0cnVlXG4gICAgfSk7XG4gICAgd2Vic29ja2V0Q2xpZW50ID0ge1xuICAgICAgcnBjUmVxdWVzdDogKGFjY291bnRJZCwgcmVxdWVzdCwgdGltZW91dEluU2Vjb25kcykgPT4ge30sXG4gICAgICBzdWJzY3JpYmVkQWNjb3VudElkczogKCkgPT4gbmV3IEFycmF5KDExKSxcbiAgICAgIHNvY2tldEluc3RhbmNlczogeyd2aW50LWhpbGwnOiB7MDogW3tzeW5jaHJvbml6YXRpb25UaHJvdHRsZXI6IHtzeW5jaHJvbml6aW5nQWNjb3VudHM6IFtdfX1dfX0sXG4gICAgfTsgIFxuICAgIHdlYnNvY2tldENsaWVudC5ycGNSZXF1ZXN0ID0gc2FuZGJveC5zdHViKCk7XG4gICAgZ2V0SGFzaGVzID0gKCkgPT4gKHtcbiAgICAgIHBvc2l0aW9uc01kNTogJzExMTEnLFxuICAgICAgb3JkZXJzTWQ1OiAnMjIyMicsXG4gICAgICBzcGVjaWZpY2F0aW9uc01kNTogJzMzMzMnXG4gICAgfSk7XG4gICAgdGhyb3R0bGVyID0gbmV3IFN5bmNocm9uaXphdGlvblRocm90dGxlcih3ZWJzb2NrZXRDbGllbnQsIDAsIDAsICd2aW50LWhpbGwnKTtcbiAgICB0aHJvdHRsZXIuc3RhcnQoKTtcbiAgfSk7XG5cbiAgYWZ0ZXJFYWNoKCgpID0+IHtcbiAgICBjbG9jay5yZXN0b3JlKCk7XG4gIH0pO1xuICAgIFxuICAvKipcbiAgICogQHRlc3Qge1N5bmNocm9uaXphdGlvblRocm90dGxlciNzY2hlZHVsZVN5bmNocm9uaXplfVxuICAgKi9cbiAgaXQoJ3Nob3VsZCBpbW1lZGlhdGVseSBzZW5kIHJlcXVlc3QgaWYgZnJlZSBzbG90cyBleGlzdCcsIGFzeW5jICgpID0+IHtcbiAgICBhd2FpdCB0aHJvdHRsZXIuc2NoZWR1bGVTeW5jaHJvbml6ZSgnYWNjb3VudElkJywge3JlcXVlc3RJZDogJ3Rlc3QnfSwgZ2V0SGFzaGVzKTtcbiAgICBzaW5vbi5hc3NlcnQubWF0Y2godGhyb3R0bGVyLl9zeW5jaHJvbml6YXRpb25JZHMsIHt0ZXN0OiAxNjAxODkyMDAwMDAwfSk7XG4gICAgdGhyb3R0bGVyLnJlbW92ZVN5bmNocm9uaXphdGlvbklkKCd0ZXN0Jyk7XG4gICAgc2lub24uYXNzZXJ0LmNhbGxlZFdpdGgod2Vic29ja2V0Q2xpZW50LnJwY1JlcXVlc3QsICdhY2NvdW50SWQnLCB7XG4gICAgICByZXF1ZXN0SWQ6ICd0ZXN0JyxcbiAgICAgIHBvc2l0aW9uc01kNTogJzExMTEnLFxuICAgICAgb3JkZXJzTWQ1OiAnMjIyMicsXG4gICAgICBzcGVjaWZpY2F0aW9uc01kNTogJzMzMzMnfSk7XG4gICAgc2lub24uYXNzZXJ0Lm1hdGNoKHRocm90dGxlci5fc3luY2hyb25pemF0aW9uSWRzLCB7fSk7XG4gIH0pO1xuXG4gIC8qKlxuICAgKiBAdGVzdCB7U3luY2hyb25pemF0aW9uVGhyb3R0bGVyI3NjaGVkdWxlU3luY2hyb25pemV9XG4gICAqL1xuICBpdCgnc2hvdWxkIG5vdCByZW1vdmUgc3luYyBpZiBkaWZmZXJlbnQgaW5zdGFuY2UgaW5kZXgnLCBhc3luYyAoKSA9PiB7XG4gICAgYXdhaXQgdGhyb3R0bGVyLnNjaGVkdWxlU3luY2hyb25pemUoJ2FjY291bnRJZCcsIHtyZXF1ZXN0SWQ6ICd0ZXN0JywgaW5zdGFuY2VJbmRleDogMH0sIGdldEhhc2hlcyk7XG4gICAgYXdhaXQgdGhyb3R0bGVyLnNjaGVkdWxlU3luY2hyb25pemUoJ2FjY291bnRJZCcsIHtyZXF1ZXN0SWQ6ICd0ZXN0MScsIGluc3RhbmNlSW5kZXg6IDF9LCBnZXRIYXNoZXMpO1xuICAgIHNpbm9uLmFzc2VydC5tYXRjaCh0aHJvdHRsZXIuX3N5bmNocm9uaXphdGlvbklkcywge3Rlc3Q6IDE2MDE4OTIwMDAwMDAsIHRlc3QxOiAxNjAxODkyMDAwMDAwfSk7XG4gICAgdGhyb3R0bGVyLnJlbW92ZVN5bmNocm9uaXphdGlvbklkKCd0ZXN0JywgMCk7XG4gICAgc2lub24uYXNzZXJ0Lm1hdGNoKHRocm90dGxlci5fc3luY2hyb25pemF0aW9uSWRzLCB7dGVzdDE6IDE2MDE4OTIwMDAwMDB9KTtcbiAgICBzaW5vbi5hc3NlcnQuY2FsbGVkV2l0aCh3ZWJzb2NrZXRDbGllbnQucnBjUmVxdWVzdCwgJ2FjY291bnRJZCcsIHtcbiAgICAgIHJlcXVlc3RJZDogJ3Rlc3QnLCBcbiAgICAgIHBvc2l0aW9uc01kNTogJzExMTEnLFxuICAgICAgb3JkZXJzTWQ1OiAnMjIyMicsXG4gICAgICBzcGVjaWZpY2F0aW9uc01kNTogJzMzMzMnLCBcbiAgICAgIGluc3RhbmNlSW5kZXg6IDB9KTtcbiAgICBzaW5vbi5hc3NlcnQuY2FsbGVkV2l0aCh3ZWJzb2NrZXRDbGllbnQucnBjUmVxdWVzdCwgJ2FjY291bnRJZCcsIHtcbiAgICAgIHJlcXVlc3RJZDogJ3Rlc3QxJyxcbiAgICAgIHBvc2l0aW9uc01kNTogJzExMTEnLFxuICAgICAgb3JkZXJzTWQ1OiAnMjIyMicsXG4gICAgICBzcGVjaWZpY2F0aW9uc01kNTogJzMzMzMnLCBcbiAgICAgIGluc3RhbmNlSW5kZXg6IDF9KTtcbiAgICBzaW5vbi5hc3NlcnQubWF0Y2godGhyb3R0bGVyLl9zeW5jaHJvbml6YXRpb25JZHMsIHt9KTtcbiAgfSk7XG5cbiAgLyoqXG4gICAqIEB0ZXN0IHtTeW5jaHJvbml6YXRpb25UaHJvdHRsZXIjc2NoZWR1bGVTeW5jaHJvbml6ZX1cbiAgICovXG4gIGl0KCdzaG91bGQgd2FpdCBmb3Igb3RoZXIgc3luYyByZXF1ZXN0cyB0byBmaW5pc2ggaWYgc2xvdHMgYXJlIGZ1bGwnLCBhc3luYyAoKSA9PiB7XG4gICAgYXdhaXQgdGhyb3R0bGVyLnNjaGVkdWxlU3luY2hyb25pemUoJ2FjY291bnRJZDEnLCB7cmVxdWVzdElkOiAndGVzdDEnfSwgZ2V0SGFzaGVzKTtcbiAgICBhd2FpdCB0aHJvdHRsZXIuc2NoZWR1bGVTeW5jaHJvbml6ZSgnYWNjb3VudElkMicsIHtyZXF1ZXN0SWQ6ICd0ZXN0Mid9LCBnZXRIYXNoZXMpO1xuICAgIHNpbm9uLmFzc2VydC5jYWxsZWRXaXRoKHdlYnNvY2tldENsaWVudC5ycGNSZXF1ZXN0LCAnYWNjb3VudElkMScsIHtcbiAgICAgIHJlcXVlc3RJZDogJ3Rlc3QxJyxcbiAgICAgIHBvc2l0aW9uc01kNTogJzExMTEnLFxuICAgICAgb3JkZXJzTWQ1OiAnMjIyMicsXG4gICAgICBzcGVjaWZpY2F0aW9uc01kNTogJzMzMzMnfSk7XG4gICAgc2lub24uYXNzZXJ0LmNhbGxlZFdpdGgod2Vic29ja2V0Q2xpZW50LnJwY1JlcXVlc3QsICdhY2NvdW50SWQyJywge1xuICAgICAgcmVxdWVzdElkOiAndGVzdDInLFxuICAgICAgcG9zaXRpb25zTWQ1OiAnMTExMScsXG4gICAgICBvcmRlcnNNZDU6ICcyMjIyJyxcbiAgICAgIHNwZWNpZmljYXRpb25zTWQ1OiAnMzMzMycsfSk7XG4gICAgdGhyb3R0bGVyLnNjaGVkdWxlU3luY2hyb25pemUoJ2FjY291bnRJZDMnLCB7cmVxdWVzdElkOiAndGVzdDMnfSwgZ2V0SGFzaGVzKTtcbiAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXMgPT4gc2V0VGltZW91dChyZXMsIDIwKSk7XG4gICAgc2lub24uYXNzZXJ0LmNhbGxDb3VudCh3ZWJzb2NrZXRDbGllbnQucnBjUmVxdWVzdCwgMik7XG4gICAgdGhyb3R0bGVyLnJlbW92ZVN5bmNocm9uaXphdGlvbklkKCd0ZXN0MScpO1xuICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlcyA9PiBzZXRUaW1lb3V0KHJlcywgMjApKTtcbiAgICBzaW5vbi5hc3NlcnQuY2FsbENvdW50KHdlYnNvY2tldENsaWVudC5ycGNSZXF1ZXN0LCAzKTtcbiAgfSk7XG5cbiAgLyoqXG4gICAqIEB0ZXN0IHtTeW5jaHJvbml6YXRpb25UaHJvdHRsZXIjc2NoZWR1bGVTeW5jaHJvbml6ZX1cbiAgICovXG4gIGl0KCdzaG91bGQgaW5jcmVhc2Ugc2xvdCBhbW91bnQgd2l0aCBtb3JlIHN1YnNjcmliZWQgYWNjb3VudHMnLCBhc3luYyAoKSA9PiB7XG4gICAgd2Vic29ja2V0Q2xpZW50LnN1YnNjcmliZWRBY2NvdW50SWRzID0gKCkgPT4gbmV3IEFycmF5KDIxKTtcbiAgICBhd2FpdCB0aHJvdHRsZXIuc2NoZWR1bGVTeW5jaHJvbml6ZSgnYWNjb3VudElkMScsIHtyZXF1ZXN0SWQ6ICd0ZXN0MSd9LCBnZXRIYXNoZXMpO1xuICAgIGF3YWl0IHRocm90dGxlci5zY2hlZHVsZVN5bmNocm9uaXplKCdhY2NvdW50SWQyJywge3JlcXVlc3RJZDogJ3Rlc3QyJ30sIGdldEhhc2hlcyk7XG4gICAgYXdhaXQgdGhyb3R0bGVyLnNjaGVkdWxlU3luY2hyb25pemUoJ2FjY291bnRJZDMnLCB7cmVxdWVzdElkOiAndGVzdDMnfSwgZ2V0SGFzaGVzKTtcbiAgICBzaW5vbi5hc3NlcnQuY2FsbGVkV2l0aCh3ZWJzb2NrZXRDbGllbnQucnBjUmVxdWVzdCwgJ2FjY291bnRJZDEnLCB7XG4gICAgICByZXF1ZXN0SWQ6ICd0ZXN0MScsXG4gICAgICBwb3NpdGlvbnNNZDU6ICcxMTExJyxcbiAgICAgIG9yZGVyc01kNTogJzIyMjInLFxuICAgICAgc3BlY2lmaWNhdGlvbnNNZDU6ICczMzMzJ30pO1xuICAgIHNpbm9uLmFzc2VydC5jYWxsZWRXaXRoKHdlYnNvY2tldENsaWVudC5ycGNSZXF1ZXN0LCAnYWNjb3VudElkMicsIHtcbiAgICAgIHJlcXVlc3RJZDogJ3Rlc3QyJyxcbiAgICAgIHBvc2l0aW9uc01kNTogJzExMTEnLFxuICAgICAgb3JkZXJzTWQ1OiAnMjIyMicsXG4gICAgICBzcGVjaWZpY2F0aW9uc01kNTogJzMzMzMnfSk7XG4gICAgc2lub24uYXNzZXJ0LmNhbGxlZFdpdGgod2Vic29ja2V0Q2xpZW50LnJwY1JlcXVlc3QsICdhY2NvdW50SWQzJywge1xuICAgICAgcmVxdWVzdElkOiAndGVzdDMnLFxuICAgICAgcG9zaXRpb25zTWQ1OiAnMTExMScsXG4gICAgICBvcmRlcnNNZDU6ICcyMjIyJyxcbiAgICAgIHNwZWNpZmljYXRpb25zTWQ1OiAnMzMzMyd9KTtcbiAgICBzaW5vbi5hc3NlcnQuY2FsbENvdW50KHdlYnNvY2tldENsaWVudC5ycGNSZXF1ZXN0LCAzKTtcbiAgfSk7XG5cbiAgLyoqXG4gICAqIEB0ZXN0IHtTeW5jaHJvbml6YXRpb25UaHJvdHRsZXIjc2NoZWR1bGVTeW5jaHJvbml6ZX1cbiAgICovXG4gIGl0KCdzaG91bGQgc2V0IGhhcmQgbGltaXQgZm9yIGNvbmN1cnJlbnQgc3luY2hyb25pemF0aW9ucyBhY3Jvc3MgdGhyb3R0bGVycyB2aWEgb3B0aW9ucycsIGFzeW5jICgpID0+IHtcbiAgICB3ZWJzb2NrZXRDbGllbnQuc3Vic2NyaWJlZEFjY291bnRJZHMgPSAoKSA9PiBuZXcgQXJyYXkoMjEpO1xuICAgIHRocm90dGxlciA9IG5ldyBTeW5jaHJvbml6YXRpb25UaHJvdHRsZXIod2Vic29ja2V0Q2xpZW50LCAwLCAwLCAndmludC1oaWxsJywge21heENvbmN1cnJlbnRTeW5jaHJvbml6YXRpb25zOiAzfSk7XG4gICAgd2Vic29ja2V0Q2xpZW50LnNvY2tldEluc3RhbmNlcyA9IHsndmludC1oaWxsJzogezA6IFt7c3luY2hyb25pemF0aW9uVGhyb3R0bGVyOiB0aHJvdHRsZXJ9LFxuICAgICAge3N5bmNocm9uaXphdGlvblRocm90dGxlcjoge3N5bmNocm9uaXppbmdBY2NvdW50czogWydhY2NvdW50SWQ0J119fV19fTtcbiAgICBhd2FpdCB0aHJvdHRsZXIuc2NoZWR1bGVTeW5jaHJvbml6ZSgnYWNjb3VudElkMScsIHtyZXF1ZXN0SWQ6ICd0ZXN0MSd9LCBnZXRIYXNoZXMpO1xuICAgIGF3YWl0IHRocm90dGxlci5zY2hlZHVsZVN5bmNocm9uaXplKCdhY2NvdW50SWQyJywge3JlcXVlc3RJZDogJ3Rlc3QyJ30sIGdldEhhc2hlcyk7XG4gICAgdGhyb3R0bGVyLnNjaGVkdWxlU3luY2hyb25pemUoJ2FjY291bnRJZDMnLCB7cmVxdWVzdElkOiAndGVzdDMnfSwgZ2V0SGFzaGVzKTtcbiAgICB0aHJvdHRsZXIuc2NoZWR1bGVTeW5jaHJvbml6ZSgnYWNjb3VudElkNCcsIHtyZXF1ZXN0SWQ6ICd0ZXN0NCd9LCBnZXRIYXNoZXMpO1xuICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlcyA9PiBzZXRUaW1lb3V0KHJlcywgMjApKTtcbiAgICBzaW5vbi5hc3NlcnQuY2FsbENvdW50KHdlYnNvY2tldENsaWVudC5ycGNSZXF1ZXN0LCAyKTtcbiAgICB0aHJvdHRsZXIucmVtb3ZlU3luY2hyb25pemF0aW9uSWQoJ3Rlc3QxJyk7XG4gICAgYXdhaXQgbmV3IFByb21pc2UocmVzID0+IHNldFRpbWVvdXQocmVzLCAyMCkpO1xuICAgIHNpbm9uLmFzc2VydC5jYWxsQ291bnQod2Vic29ja2V0Q2xpZW50LnJwY1JlcXVlc3QsIDMpO1xuICB9KTtcblxuICAvKipcbiAgICogQHRlc3Qge1N5bmNocm9uaXphdGlvblRocm90dGxlciNzY2hlZHVsZVN5bmNocm9uaXplfVxuICAgKi9cbiAgaXQoJ3Nob3VsZCBub3QgdGFrZSBleHRyYSBzbG90cyBpZiBzeW5jIGlkcyBiZWxvbmcgdG8gdGhlIHNhbWUgYWNjb3VudCcsIGFzeW5jICgpID0+IHtcbiAgICB0aHJvdHRsZXIuc2NoZWR1bGVTeW5jaHJvbml6ZSgnYWNjb3VudElkJywge3JlcXVlc3RJZDogJ3Rlc3QnLCBpbnN0YW5jZUluZGV4OiAwfSwgZ2V0SGFzaGVzKTtcbiAgICB0aHJvdHRsZXIuc2NoZWR1bGVTeW5jaHJvbml6ZSgnYWNjb3VudElkJywge3JlcXVlc3RJZDogJ3Rlc3QxJywgaW5zdGFuY2VJbmRleDogMX0sIGdldEhhc2hlcyk7XG4gICAgdGhyb3R0bGVyLnNjaGVkdWxlU3luY2hyb25pemUoJ2FjY291bnRJZDInLCB7cmVxdWVzdElkOiAndGVzdDInfSwgZ2V0SGFzaGVzKTtcbiAgICB0aHJvdHRsZXIuc2NoZWR1bGVTeW5jaHJvbml6ZSgnYWNjb3VudElkMycsIHtyZXF1ZXN0SWQ6ICd0ZXN0Myd9LCBnZXRIYXNoZXMpO1xuICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlcyA9PiBzZXRUaW1lb3V0KHJlcywgMjApKTtcbiAgICBzaW5vbi5hc3NlcnQuY2FsbENvdW50KHdlYnNvY2tldENsaWVudC5ycGNSZXF1ZXN0LCAzKTtcbiAgICBzaW5vbi5hc3NlcnQuY2FsbGVkV2l0aCh3ZWJzb2NrZXRDbGllbnQucnBjUmVxdWVzdCwgJ2FjY291bnRJZCcsIHtcbiAgICAgIHJlcXVlc3RJZDogJ3Rlc3QnLFxuICAgICAgcG9zaXRpb25zTWQ1OiAnMTExMScsXG4gICAgICBvcmRlcnNNZDU6ICcyMjIyJyxcbiAgICAgIHNwZWNpZmljYXRpb25zTWQ1OiAnMzMzMycsXG4gICAgICBpbnN0YW5jZUluZGV4OiAwfSk7XG4gICAgc2lub24uYXNzZXJ0LmNhbGxlZFdpdGgod2Vic29ja2V0Q2xpZW50LnJwY1JlcXVlc3QsICdhY2NvdW50SWQnLCB7XG4gICAgICByZXF1ZXN0SWQ6ICd0ZXN0MScsXG4gICAgICBwb3NpdGlvbnNNZDU6ICcxMTExJyxcbiAgICAgIG9yZGVyc01kNTogJzIyMjInLFxuICAgICAgc3BlY2lmaWNhdGlvbnNNZDU6ICczMzMzJyxcbiAgICAgIGluc3RhbmNlSW5kZXg6IDF9KTtcbiAgICBzaW5vbi5hc3NlcnQuY2FsbGVkV2l0aCh3ZWJzb2NrZXRDbGllbnQucnBjUmVxdWVzdCwgJ2FjY291bnRJZDInLCB7XG4gICAgICByZXF1ZXN0SWQ6ICd0ZXN0MicsXG4gICAgICBwb3NpdGlvbnNNZDU6ICcxMTExJyxcbiAgICAgIG9yZGVyc01kNTogJzIyMjInLFxuICAgICAgc3BlY2lmaWNhdGlvbnNNZDU6ICczMzMzJ30pO1xuICAgIHNpbm9uLmFzc2VydC5tYXRjaCh0aHJvdHRsZXIuX3N5bmNocm9uaXphdGlvbklkcywge30pO1xuICB9KTtcblxuICAvKipcbiAgICogQHRlc3Qge1N5bmNocm9uaXphdGlvblRocm90dGxlciNfcmVtb3ZlT2xkU3luY0lkc0pvYn1cbiAgICovXG4gIGl0KCdzaG91bGQgY2xlYXIgZXhwaXJlZCBzeW5jaHJvbml6YXRpb24gc2xvdHMgaWYgbm8gcGFja2V0cyBmb3IgMTAgc2Vjb25kcycsIGFzeW5jICgpID0+IHtcbiAgICBhd2FpdCB0aHJvdHRsZXIuc2NoZWR1bGVTeW5jaHJvbml6ZSgnYWNjb3VudElkMScsIHtyZXF1ZXN0SWQ6ICd0ZXN0MSd9LCBnZXRIYXNoZXMpO1xuICAgIGF3YWl0IHRocm90dGxlci5zY2hlZHVsZVN5bmNocm9uaXplKCdhY2NvdW50SWQyJywge3JlcXVlc3RJZDogJ3Rlc3QyJ30sIGdldEhhc2hlcyk7XG4gICAgdGhyb3R0bGVyLnNjaGVkdWxlU3luY2hyb25pemUoJ2FjY291bnRJZDMnLCB7cmVxdWVzdElkOiAndGVzdDMnfSwgZ2V0SGFzaGVzKTtcbiAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXMgPT4gc2V0VGltZW91dChyZXMsIDIwKSk7XG4gICAgc2lub24uYXNzZXJ0LmNhbGxDb3VudCh3ZWJzb2NrZXRDbGllbnQucnBjUmVxdWVzdCwgMik7XG4gICAgYXdhaXQgY2xvY2sudGlja0FzeW5jKDExMDAwKTtcbiAgICBzaW5vbi5hc3NlcnQuY2FsbENvdW50KHdlYnNvY2tldENsaWVudC5ycGNSZXF1ZXN0LCAzKTtcbiAgfSk7XG5cbiAgLyoqXG4gICAqIEB0ZXN0IHtTeW5jaHJvbml6YXRpb25UaHJvdHRsZXIjdXBkYXRlU3luY2hyb25pemF0aW9uSWR9XG4gICAqL1xuICBpdCgnc2hvdWxkIHJlbmV3IHN5bmMgb24gdXBkYXRlJywgYXN5bmMgKCkgPT4ge1xuICAgIGF3YWl0IHRocm90dGxlci5zY2hlZHVsZVN5bmNocm9uaXplKCdhY2NvdW50SWQxJywge3JlcXVlc3RJZDogJ3Rlc3QxJ30sIGdldEhhc2hlcyk7XG4gICAgYXdhaXQgdGhyb3R0bGVyLnNjaGVkdWxlU3luY2hyb25pemUoJ2FjY291bnRJZDInLCB7cmVxdWVzdElkOiAndGVzdDInfSwgZ2V0SGFzaGVzKTtcbiAgICB0aHJvdHRsZXIuc2NoZWR1bGVTeW5jaHJvbml6ZSgnYWNjb3VudElkMycsIHtyZXF1ZXN0SWQ6ICd0ZXN0Myd9LCBnZXRIYXNoZXMpO1xuICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlcyA9PiBzZXRUaW1lb3V0KHJlcywgMjApKTtcbiAgICBzaW5vbi5hc3NlcnQuY2FsbENvdW50KHdlYnNvY2tldENsaWVudC5ycGNSZXF1ZXN0LCAyKTtcbiAgICBhd2FpdCBjbG9jay50aWNrQXN5bmMoMTEwMDApO1xuICAgIHNpbm9uLmFzc2VydC5jYWxsQ291bnQod2Vic29ja2V0Q2xpZW50LnJwY1JlcXVlc3QsIDMpO1xuICAgIGF3YWl0IGNsb2NrLnRpY2tBc3luYygxMTAwMCk7XG4gICAgdGhyb3R0bGVyLnVwZGF0ZVN5bmNocm9uaXphdGlvbklkKCd0ZXN0MScpO1xuICAgIHRocm90dGxlci5zY2hlZHVsZVN5bmNocm9uaXplKCdhY2NvdW50SWQ0Jywge3JlcXVlc3RJZDogJ3Rlc3Q0J30sIGdldEhhc2hlcyk7XG4gICAgdGhyb3R0bGVyLnNjaGVkdWxlU3luY2hyb25pemUoJ2FjY291bnRJZDUnLCB7cmVxdWVzdElkOiAndGVzdDUnfSwgZ2V0SGFzaGVzKTtcbiAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXMgPT4gc2V0VGltZW91dChyZXMsIDIwKSk7XG4gICAgc2lub24uYXNzZXJ0LmNhbGxDb3VudCh3ZWJzb2NrZXRDbGllbnQucnBjUmVxdWVzdCwgNCk7XG4gIH0pO1xuXG4gIC8qKlxuICAgKiBAdGVzdCB7U3luY2hyb25pemF0aW9uVGhyb3R0bGVyI3NjaGVkdWxlU3luY2hyb25pemV9XG4gICAqL1xuICBpdCgnc2hvdWxkIHJlcGxhY2UgcHJldmlvdXMgc3luY3MnLCBhc3luYyAoKSA9PiB7XG4gICAgdGhyb3R0bGVyLnNjaGVkdWxlU3luY2hyb25pemUoJ2FjY291bnRJZDEnLCB7cmVxdWVzdElkOiAndGVzdDEnfSwgZ2V0SGFzaGVzKTtcbiAgICB0aHJvdHRsZXIuc2NoZWR1bGVTeW5jaHJvbml6ZSgnYWNjb3VudElkMScsIHtyZXF1ZXN0SWQ6ICd0ZXN0Mid9LCBnZXRIYXNoZXMpO1xuICAgIHRocm90dGxlci5zY2hlZHVsZVN5bmNocm9uaXplKCdhY2NvdW50SWQxJywge3JlcXVlc3RJZDogJ3Rlc3QzJ30sIGdldEhhc2hlcyk7XG4gICAgdGhyb3R0bGVyLnNjaGVkdWxlU3luY2hyb25pemUoJ2FjY291bnRJZDInLCB7cmVxdWVzdElkOiAndGVzdDQnfSwgZ2V0SGFzaGVzKTtcbiAgICB0aHJvdHRsZXIuc2NoZWR1bGVTeW5jaHJvbml6ZSgnYWNjb3VudElkMycsIHtyZXF1ZXN0SWQ6ICd0ZXN0NSd9LCBnZXRIYXNoZXMpO1xuICAgIHRocm90dGxlci5zY2hlZHVsZVN5bmNocm9uaXplKCdhY2NvdW50SWQxJywge3JlcXVlc3RJZDogJ3Rlc3QzJywgaW5zdGFuY2VJbmRleDogMH0pO1xuICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlcyA9PiBzZXRUaW1lb3V0KHJlcywgMjApKTtcbiAgICBzaW5vbi5hc3NlcnQuY2FsbENvdW50KHdlYnNvY2tldENsaWVudC5ycGNSZXF1ZXN0LCA0KTtcbiAgfSk7XG5cbiAgLyoqXG4gICAqIEB0ZXN0IHtTeW5jaHJvbml6YXRpb25UaHJvdHRsZXIjb25EaXNjb25uZWN0fVxuICAgKi9cbiAgaXQoJ3Nob3VsZCBjbGVhciBleGlzdGluZyBzeW5jIGlkcyBvbiBkaXNjb25uZWN0JywgYXN5bmMgKCkgPT4ge1xuICAgIGF3YWl0IHRocm90dGxlci5zY2hlZHVsZVN5bmNocm9uaXplKCdhY2NvdW50SWQxJywge3JlcXVlc3RJZDogJ3Rlc3QxJ30sIGdldEhhc2hlcyk7XG4gICAgYXdhaXQgdGhyb3R0bGVyLnNjaGVkdWxlU3luY2hyb25pemUoJ2FjY291bnRJZDInLCB7cmVxdWVzdElkOiAndGVzdDInfSwgZ2V0SGFzaGVzKTtcbiAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXMgPT4gc2V0VGltZW91dChyZXMsIDIwKSk7XG4gICAgc2lub24uYXNzZXJ0LmNhbGxDb3VudCh3ZWJzb2NrZXRDbGllbnQucnBjUmVxdWVzdCwgMik7XG4gICAgdGhyb3R0bGVyLm9uRGlzY29ubmVjdCgpO1xuICAgIHRocm90dGxlci5zY2hlZHVsZVN5bmNocm9uaXplKCdhY2NvdW50SWQzJywge3JlcXVlc3RJZDogJ3Rlc3QzJ30sIGdldEhhc2hlcyk7XG4gICAgYXdhaXQgbmV3IFByb21pc2UocmVzID0+IHNldFRpbWVvdXQocmVzLCAyMCkpO1xuICAgIHNpbm9uLmFzc2VydC5jYWxsQ291bnQod2Vic29ja2V0Q2xpZW50LnJwY1JlcXVlc3QsIDMpO1xuICB9KTtcblxuICAvKipcbiAgICogQHRlc3Qge1N5bmNocm9uaXphdGlvblRocm90dGxlciNfcmVtb3ZlRnJvbVF1ZXVlfVxuICAgKi9cbiAgaXQoJ3Nob3VsZCByZW1vdmUgc3luY2hyb25pemF0aW9ucyBmcm9tIHF1ZXVlJywgYXN5bmMgKCkgPT4ge1xuICAgIGF3YWl0IHRocm90dGxlci5zY2hlZHVsZVN5bmNocm9uaXplKCdhY2NvdW50SWQxJywge3JlcXVlc3RJZDogJ3Rlc3QxJ30sIGdldEhhc2hlcyk7XG4gICAgYXdhaXQgdGhyb3R0bGVyLnNjaGVkdWxlU3luY2hyb25pemUoJ2FjY291bnRJZDInLCB7cmVxdWVzdElkOiAndGVzdDInfSwgZ2V0SGFzaGVzKTtcbiAgICB0aHJvdHRsZXIuc2NoZWR1bGVTeW5jaHJvbml6ZSgnYWNjb3VudElkMycsIHtyZXF1ZXN0SWQ6ICd0ZXN0Myd9KSwgZ2V0SGFzaGVzO1xuICAgIHRocm90dGxlci5zY2hlZHVsZVN5bmNocm9uaXplKCdhY2NvdW50SWQzJywge3JlcXVlc3RJZDogJ3Rlc3Q0JywgaW5zdGFuY2VJbmRleDogMH0sIGdldEhhc2hlcyk7XG4gICAgdGhyb3R0bGVyLnNjaGVkdWxlU3luY2hyb25pemUoJ2FjY291bnRJZDQnLCB7cmVxdWVzdElkOiAndGVzdDUnfSwgZ2V0SGFzaGVzKTtcbiAgICB0aHJvdHRsZXIuc2NoZWR1bGVTeW5jaHJvbml6ZSgnYWNjb3VudElkMycsIHtyZXF1ZXN0SWQ6ICd0ZXN0Nid9LCBnZXRIYXNoZXMpO1xuICAgIHRocm90dGxlci5zY2hlZHVsZVN5bmNocm9uaXplKCdhY2NvdW50SWQ0Jywge3JlcXVlc3RJZDogJ3Rlc3Q3J30sIGdldEhhc2hlcyk7XG4gICAgdGhyb3R0bGVyLnNjaGVkdWxlU3luY2hyb25pemUoJ2FjY291bnRJZDMnLCB7cmVxdWVzdElkOiAndGVzdDgnfSwgZ2V0SGFzaGVzKTtcbiAgICB0aHJvdHRsZXIuc2NoZWR1bGVTeW5jaHJvbml6ZSgnYWNjb3VudElkNScsIHtyZXF1ZXN0SWQ6ICd0ZXN0OSd9LCBnZXRIYXNoZXMpO1xuICAgIHRocm90dGxlci5zY2hlZHVsZVN5bmNocm9uaXplKCdhY2NvdW50SWQzJywge3JlcXVlc3RJZDogJ3Rlc3QxMCcsIGluc3RhbmNlSW5kZXg6IDB9LCBnZXRIYXNoZXMpO1xuICAgIGF3YWl0IGNsb2NrLnRpY2tBc3luYyg1MzAwMCk7XG4gICAgc2lub24uYXNzZXJ0LmNhbGxDb3VudCh3ZWJzb2NrZXRDbGllbnQucnBjUmVxdWVzdCwgNik7XG4gICAgc2lub24uYXNzZXJ0LmNhbGxlZFdpdGgod2Vic29ja2V0Q2xpZW50LnJwY1JlcXVlc3QsICdhY2NvdW50SWQxJywge1xuICAgICAgcmVxdWVzdElkOiAndGVzdDEnLFxuICAgICAgcG9zaXRpb25zTWQ1OiAnMTExMScsXG4gICAgICBvcmRlcnNNZDU6ICcyMjIyJyxcbiAgICAgIHNwZWNpZmljYXRpb25zTWQ1OiAnMzMzMyd9KTtcbiAgICBzaW5vbi5hc3NlcnQuY2FsbGVkV2l0aCh3ZWJzb2NrZXRDbGllbnQucnBjUmVxdWVzdCwgJ2FjY291bnRJZDInLCB7XG4gICAgICByZXF1ZXN0SWQ6ICd0ZXN0MicsXG4gICAgICBwb3NpdGlvbnNNZDU6ICcxMTExJyxcbiAgICAgIG9yZGVyc01kNTogJzIyMjInLFxuICAgICAgc3BlY2lmaWNhdGlvbnNNZDU6ICczMzMzJ30pO1xuICAgIHNpbm9uLmFzc2VydC5jYWxsZWRXaXRoKHdlYnNvY2tldENsaWVudC5ycGNSZXF1ZXN0LCAnYWNjb3VudElkMycsIHtcbiAgICAgIHJlcXVlc3RJZDogJ3Rlc3Q4JyxcbiAgICAgIHBvc2l0aW9uc01kNTogJzExMTEnLFxuICAgICAgb3JkZXJzTWQ1OiAnMjIyMicsXG4gICAgICBzcGVjaWZpY2F0aW9uc01kNTogJzMzMzMnfSk7XG4gICAgc2lub24uYXNzZXJ0LmNhbGxlZFdpdGgod2Vic29ja2V0Q2xpZW50LnJwY1JlcXVlc3QsICdhY2NvdW50SWQzJywge1xuICAgICAgcmVxdWVzdElkOiAndGVzdDEwJyxcbiAgICAgIHBvc2l0aW9uc01kNTogJzExMTEnLFxuICAgICAgb3JkZXJzTWQ1OiAnMjIyMicsXG4gICAgICBzcGVjaWZpY2F0aW9uc01kNTogJzMzMzMnLFxuICAgICAgaW5zdGFuY2VJbmRleDogMH0pO1xuICAgIHNpbm9uLmFzc2VydC5jYWxsZWRXaXRoKHdlYnNvY2tldENsaWVudC5ycGNSZXF1ZXN0LCAnYWNjb3VudElkNCcsIHtcbiAgICAgIHJlcXVlc3RJZDogJ3Rlc3Q3JyxcbiAgICAgIHBvc2l0aW9uc01kNTogJzExMTEnLFxuICAgICAgb3JkZXJzTWQ1OiAnMjIyMicsXG4gICAgICBzcGVjaWZpY2F0aW9uc01kNTogJzMzMzMnfSk7XG4gICAgc2lub24uYXNzZXJ0LmNhbGxlZFdpdGgod2Vic29ja2V0Q2xpZW50LnJwY1JlcXVlc3QsICdhY2NvdW50SWQ1Jywge1xuICAgICAgcmVxdWVzdElkOiAndGVzdDknLFxuICAgICAgcG9zaXRpb25zTWQ1OiAnMTExMScsXG4gICAgICBvcmRlcnNNZDU6ICcyMjIyJyxcbiAgICAgIHNwZWNpZmljYXRpb25zTWQ1OiAnMzMzMyd9KTtcbiAgfSk7XG5cbiAgLyoqXG4gICAqIEB0ZXN0IHtTeW5jaHJvbml6YXRpb25UaHJvdHRsZXIjX3JlbW92ZU9sZFN5bmNJZHNKb2J9XG4gICAqL1xuICBpdCgnc2hvdWxkIHJlbW92ZSBleHBpcmVkIHN5bmNocm9uaXphdGlvbnMgZnJvbSBxdWV1ZScsIGFzeW5jICgpID0+IHtcbiAgICBhd2FpdCB0aHJvdHRsZXIuc2NoZWR1bGVTeW5jaHJvbml6ZSgnYWNjb3VudElkMScsIHtyZXF1ZXN0SWQ6ICd0ZXN0MSd9LCBnZXRIYXNoZXMpO1xuICAgIGF3YWl0IHRocm90dGxlci5zY2hlZHVsZVN5bmNocm9uaXplKCdhY2NvdW50SWQyJywge3JlcXVlc3RJZDogJ3Rlc3QyJ30sIGdldEhhc2hlcyk7XG4gICAgdGhyb3R0bGVyLnNjaGVkdWxlU3luY2hyb25pemUoJ2FjY291bnRJZDMnLCB7cmVxdWVzdElkOiAndGVzdDMnfSwgZ2V0SGFzaGVzKS5jYXRjaCgoKSA9PiB7fSk7XG4gICAgdGhyb3R0bGVyLnNjaGVkdWxlU3luY2hyb25pemUoJ2FjY291bnRJZDQnLCB7cmVxdWVzdElkOiAndGVzdDQnfSwgZ2V0SGFzaGVzKS5jYXRjaCgoKSA9PiB7fSk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCAyMDsgaSsrKSB7XG4gICAgICBhd2FpdCBjbG9jay50aWNrQXN5bmMoODAwMCk7XG4gICAgICB0aHJvdHRsZXIudXBkYXRlU3luY2hyb25pemF0aW9uSWQoJ3Rlc3QxJyk7XG4gICAgICB0aHJvdHRsZXIudXBkYXRlU3luY2hyb25pemF0aW9uSWQoJ3Rlc3QyJyk7XG4gICAgfVxuICAgIHRocm90dGxlci5zY2hlZHVsZVN5bmNocm9uaXplKCdhY2NvdW50SWQ1Jywge3JlcXVlc3RJZDogJ3Rlc3Q1J30sIGdldEhhc2hlcyk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCAyMDsgaSsrKSB7XG4gICAgICBhd2FpdCBjbG9jay50aWNrQXN5bmMoODAwMCk7XG4gICAgICB0aHJvdHRsZXIudXBkYXRlU3luY2hyb25pemF0aW9uSWQoJ3Rlc3QxJyk7XG4gICAgICB0aHJvdHRsZXIudXBkYXRlU3luY2hyb25pemF0aW9uSWQoJ3Rlc3QyJyk7XG4gICAgfVxuICAgIGF3YWl0IGNsb2NrLnRpY2tBc3luYygzMzAwMCk7XG4gICAgc2lub24uYXNzZXJ0LmNhbGxDb3VudCh3ZWJzb2NrZXRDbGllbnQucnBjUmVxdWVzdCwgMyk7XG4gICAgc2lub24uYXNzZXJ0LmNhbGxlZFdpdGgod2Vic29ja2V0Q2xpZW50LnJwY1JlcXVlc3QsICdhY2NvdW50SWQxJywge1xuICAgICAgcmVxdWVzdElkOiAndGVzdDEnLFxuICAgICAgcG9zaXRpb25zTWQ1OiAnMTExMScsXG4gICAgICBvcmRlcnNNZDU6ICcyMjIyJyxcbiAgICAgIHNwZWNpZmljYXRpb25zTWQ1OiAnMzMzMyd9KTtcbiAgICBzaW5vbi5hc3NlcnQuY2FsbGVkV2l0aCh3ZWJzb2NrZXRDbGllbnQucnBjUmVxdWVzdCwgJ2FjY291bnRJZDInLCB7XG4gICAgICByZXF1ZXN0SWQ6ICd0ZXN0MicsXG4gICAgICBwb3NpdGlvbnNNZDU6ICcxMTExJyxcbiAgICAgIG9yZGVyc01kNTogJzIyMjInLFxuICAgICAgc3BlY2lmaWNhdGlvbnNNZDU6ICczMzMzJ30pO1xuICAgIHNpbm9uLmFzc2VydC5jYWxsZWRXaXRoKHdlYnNvY2tldENsaWVudC5ycGNSZXF1ZXN0LCAnYWNjb3VudElkNScsIHtcbiAgICAgIHJlcXVlc3RJZDogJ3Rlc3Q1JyxcbiAgICAgIHBvc2l0aW9uc01kNTogJzExMTEnLFxuICAgICAgb3JkZXJzTWQ1OiAnMjIyMicsXG4gICAgICBzcGVjaWZpY2F0aW9uc01kNTogJzMzMzMnfSk7XG4gIH0pO1xuXG4gIC8qKlxuICAgKiBAdGVzdCB7U3luY2hyb25pemF0aW9uVGhyb3R0bGVyI3NjaGVkdWxlU3luY2hyb25pemV9XG4gICAqL1xuICBpdCgnc2hvdWxkIG5vdCBnZXQgcXVldWUgc3R1Y2sgZHVlIHRvIGFwcCBzeW5jaHJvbml6YXRpb25zIGxpbWl0JywgYXN5bmMgKCkgPT4ge1xuICAgIHRocm90dGxlci5fY2xpZW50LnNvY2tldEluc3RhbmNlcyA9IHsndmludC1oaWxsJzogezA6IFt7c3luY2hyb25pemF0aW9uVGhyb3R0bGVyOiB7c3luY2hyb25pemluZ0FjY291bnRzOiBbXG4gICAgICAnYWNjb3VudElkMjEnLCAnYWNjb3VudElkMjInLCAnYWNjb3VudElkMjMnLCAnYWNjb3VudElkMjQnLCAnYWNjb3VudElkMjUnLCAnYWNjb3VudElkMjYnLFxuICAgICAgJ2FjY291bnRJZDI3JywgJ2FjY291bnRJZDI4JywgJ2FjY291bnRJZDI5JywgJ2FjY291bnRJZDIxMCcsICdhY2NvdW50SWQyMTEnLCAnYWNjb3VudElkMjEyJywgXG4gICAgICAnYWNjb3VudElkMjEzJywgJ2FjY291bnRJZDIxNCcsICdhY2NvdW50SWQyMTUnXX19LCB7c3luY2hyb25pemF0aW9uVGhyb3R0bGVyOiB0aHJvdHRsZXJ9XX19O1xuICAgIHRocm90dGxlci5zY2hlZHVsZVN5bmNocm9uaXplKCdhY2NvdW50SWQxJywge3JlcXVlc3RJZDogJ3Rlc3QxJ30sIGdldEhhc2hlcyk7XG4gICAgdGhyb3R0bGVyLnNjaGVkdWxlU3luY2hyb25pemUoJ2FjY291bnRJZDInLCB7cmVxdWVzdElkOiAndGVzdDInfSwgZ2V0SGFzaGVzKTtcbiAgICB0aHJvdHRsZXIuc2NoZWR1bGVTeW5jaHJvbml6ZSgnYWNjb3VudElkMycsIHtyZXF1ZXN0SWQ6ICd0ZXN0Myd9LCBnZXRIYXNoZXMpO1xuICAgIGF3YWl0IGNsb2NrLnRpY2tBc3luYyg1MDAwKTtcbiAgICBzaW5vbi5hc3NlcnQubm90Q2FsbGVkKHdlYnNvY2tldENsaWVudC5ycGNSZXF1ZXN0KTtcbiAgICB0aHJvdHRsZXIuX2NsaWVudC5zb2NrZXRJbnN0YW5jZXNbJ3ZpbnQtaGlsbCddWzBdWzBdLnN5bmNocm9uaXphdGlvblRocm90dGxlci5zeW5jaHJvbml6aW5nQWNjb3VudHMgPSBcbiAgICAgIHRocm90dGxlci5fY2xpZW50LnNvY2tldEluc3RhbmNlc1sndmludC1oaWxsJ11bMF1bMF0uc3luY2hyb25pemF0aW9uVGhyb3R0bGVyLnN5bmNocm9uaXppbmdBY2NvdW50cy5zbGljZSgxKTtcbiAgICBhd2FpdCBjbG9jay50aWNrQXN5bmMoNTAwMCk7XG4gICAgc2lub24uYXNzZXJ0LmNhbGxDb3VudCh3ZWJzb2NrZXRDbGllbnQucnBjUmVxdWVzdCwgMSk7XG4gICAgdGhyb3R0bGVyLl9jbGllbnQuc29ja2V0SW5zdGFuY2VzWyd2aW50LWhpbGwnXVswXVswXS5zeW5jaHJvbml6YXRpb25UaHJvdHRsZXIuc3luY2hyb25pemluZ0FjY291bnRzID0gXG4gICAgICB0aHJvdHRsZXIuX2NsaWVudC5zb2NrZXRJbnN0YW5jZXNbJ3ZpbnQtaGlsbCddWzBdWzBdLnN5bmNocm9uaXphdGlvblRocm90dGxlci5zeW5jaHJvbml6aW5nQWNjb3VudHMuc2xpY2UoMSk7XG4gICAgYXdhaXQgY2xvY2sudGlja0FzeW5jKDUwMDApO1xuICAgIHNpbm9uLmFzc2VydC5jYWxsQ291bnQod2Vic29ja2V0Q2xpZW50LnJwY1JlcXVlc3QsIDIpO1xuICB9KTtcblxuICAvKipcbiAgICogQHRlc3Qge1N5bmNocm9uaXphdGlvblRocm90dGxlciNyZW1vdmVTeW5jaHJvbml6YXRpb25JZH1cbiAgICovXG4gIGl0KCdzaG91bGQgbm90IHNraXAgcXVldWUgaXRlbXMgd2hlbiBzeW5jaHJvbml6YXRpb24gaWQgaXMgcmVtb3ZlZCcsIGFzeW5jICgpID0+IHtcbiAgICB0aHJvdHRsZXIuc2NoZWR1bGVTeW5jaHJvbml6ZSgnYWNjb3VudElkMScsIHtyZXF1ZXN0SWQ6ICd0ZXN0MSd9LCBnZXRIYXNoZXMpO1xuICAgIHRocm90dGxlci5zY2hlZHVsZVN5bmNocm9uaXplKCdhY2NvdW50SWQyJywge3JlcXVlc3RJZDogJ3Rlc3QyJ30sIGdldEhhc2hlcyk7XG4gICAgdGhyb3R0bGVyLnNjaGVkdWxlU3luY2hyb25pemUoJ2FjY291bnRJZDMnLCB7cmVxdWVzdElkOiAndGVzdDMnfSwgZ2V0SGFzaGVzKTtcbiAgICB0aHJvdHRsZXIuc2NoZWR1bGVTeW5jaHJvbml6ZSgnYWNjb3VudElkNCcsIHtyZXF1ZXN0SWQ6ICd0ZXN0NCd9LCBnZXRIYXNoZXMpO1xuICAgIHRocm90dGxlci5zY2hlZHVsZVN5bmNocm9uaXplKCdhY2NvdW50SWQ1Jywge3JlcXVlc3RJZDogJ3Rlc3Q1J30sIGdldEhhc2hlcyk7XG4gICAgYXdhaXQgY2xvY2sudGlja0FzeW5jKDIwMDApO1xuICAgIHRocm90dGxlci5yZW1vdmVTeW5jaHJvbml6YXRpb25JZCgndGVzdDMnKTtcbiAgICBhd2FpdCBjbG9jay50aWNrQXN5bmMoMjAwMCk7XG4gICAgdGhyb3R0bGVyLnJlbW92ZVN5bmNocm9uaXphdGlvbklkKCd0ZXN0MScpO1xuICAgIHRocm90dGxlci5yZW1vdmVTeW5jaHJvbml6YXRpb25JZCgndGVzdDInKTtcbiAgICBhd2FpdCBjbG9jay50aWNrQXN5bmMoMjAwMCk7XG4gICAgc2lub24uYXNzZXJ0LmNhbGxDb3VudCh3ZWJzb2NrZXRDbGllbnQucnBjUmVxdWVzdCwgNCk7XG4gIH0pO1xuXG4gIC8qKlxuICAgKiBAdGVzdCB7U3luY2hyb25pemF0aW9uVGhyb3R0bGVyI3JlbW92ZUlkQnlQYXJhbWV0ZXJzfVxuICAgKi9cbiAgaXQoJ3Nob3VsZCByZW1vdmUgaWQgYnkgcGFyYW1ldGVycycsIGFzeW5jICgpID0+IHtcbiAgICBhd2FpdCB0aHJvdHRsZXIuc2NoZWR1bGVTeW5jaHJvbml6ZSgnYWNjb3VudElkMScsIHtyZXF1ZXN0SWQ6ICd0ZXN0MSd9LCBnZXRIYXNoZXMpO1xuICAgIGF3YWl0IHRocm90dGxlci5zY2hlZHVsZVN5bmNocm9uaXplKCdhY2NvdW50SWQyJywge3JlcXVlc3RJZDogJ3Rlc3QyJywgaW5zdGFuY2VJbmRleDogMCwgaG9zdDogJ3BzLW1wYS0wJ30sIFxuICAgICAgZ2V0SGFzaGVzKTtcbiAgICB0aHJvdHRsZXIuc2NoZWR1bGVTeW5jaHJvbml6ZSgnYWNjb3VudElkMycsIHtyZXF1ZXN0SWQ6ICd0ZXN0Myd9LCBnZXRIYXNoZXMpO1xuICAgIHRocm90dGxlci5zY2hlZHVsZVN5bmNocm9uaXplKCdhY2NvdW50SWQyJywge3JlcXVlc3RJZDogJ3Rlc3Q0JywgaW5zdGFuY2VJbmRleDogMSwgaG9zdDogJ3BzLW1wYS0xJ30sIGdldEhhc2hlcyk7XG4gICAgdGhyb3R0bGVyLnNjaGVkdWxlU3luY2hyb25pemUoJ2FjY291bnRJZDInLCB7cmVxdWVzdElkOiAndGVzdDUnLCBpbnN0YW5jZUluZGV4OiAwLCBob3N0OiAncHMtbXBhLTInfSwgZ2V0SGFzaGVzKTtcbiAgICB0aHJvdHRsZXIuc2NoZWR1bGVTeW5jaHJvbml6ZSgnYWNjb3VudElkNCcsIHtyZXF1ZXN0SWQ6ICd0ZXN0Nid9KTtcbiAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXMgPT4gc2V0VGltZW91dChyZXMsIDUwKSk7XG4gICAgdGhyb3R0bGVyLnNjaGVkdWxlU3luY2hyb25pemUoJ2FjY291bnRJZDInLCB7cmVxdWVzdElkOiAndGVzdDcnLCBpbnN0YW5jZUluZGV4OiAwLCBob3N0OiAncHMtbXBhLTMnfSwgZ2V0SGFzaGVzKTtcbiAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXMgPT4gc2V0VGltZW91dChyZXMsIDUwKSk7XG4gICAgdGhyb3R0bGVyLnJlbW92ZUlkQnlQYXJhbWV0ZXJzKCdhY2NvdW50SWQyJywgMCwgJ3BzLW1wYS0wJyk7XG4gICAgdGhyb3R0bGVyLnJlbW92ZUlkQnlQYXJhbWV0ZXJzKCdhY2NvdW50SWQyJywgMCwgJ3BzLW1wYS0zJyk7XG4gICAgdGhyb3R0bGVyLnJlbW92ZUlkQnlQYXJhbWV0ZXJzKCdhY2NvdW50SWQyJywgMSwgJ3BzLW1wYS0xJyk7XG4gICAgdGhyb3R0bGVyLnJlbW92ZVN5bmNocm9uaXphdGlvbklkKCd0ZXN0MScpO1xuICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlcyA9PiBzZXRUaW1lb3V0KHJlcywgNTApKTtcbiAgICBzaW5vbi5hc3NlcnQuY2FsbGVkV2l0aCh3ZWJzb2NrZXRDbGllbnQucnBjUmVxdWVzdCwgJ2FjY291bnRJZDMnLCB7XG4gICAgICByZXF1ZXN0SWQ6ICd0ZXN0MycsXG4gICAgICBwb3NpdGlvbnNNZDU6ICcxMTExJyxcbiAgICAgIG9yZGVyc01kNTogJzIyMjInLFxuICAgICAgc3BlY2lmaWNhdGlvbnNNZDU6ICczMzMzJ30pO1xuICAgIHNpbm9uLmFzc2VydC5jYWxsZWRXaXRoKHdlYnNvY2tldENsaWVudC5ycGNSZXF1ZXN0LCAnYWNjb3VudElkMicsIHtcbiAgICAgIHJlcXVlc3RJZDogJ3Rlc3Q1JyxcbiAgICAgIHBvc2l0aW9uc01kNTogJzExMTEnLFxuICAgICAgb3JkZXJzTWQ1OiAnMjIyMicsXG4gICAgICBzcGVjaWZpY2F0aW9uc01kNTogJzMzMzMnLFxuICAgICAgaW5zdGFuY2VJbmRleDogMCxcbiAgICAgIGhvc3Q6ICdwcy1tcGEtMid9KTtcbiAgICBzaW5vbi5hc3NlcnQuY2FsbENvdW50KHdlYnNvY2tldENsaWVudC5ycGNSZXF1ZXN0LCA0KTtcbiAgfSk7XG5cbn0pOyJdfQ==