'use strict';

var _keys = require('babel-runtime/core-js/object/keys');

var _keys2 = _interopRequireDefault(_keys);

var _values = require('babel-runtime/core-js/object/values');

var _values2 = _interopRequireDefault(_values);

var _create = require('babel-runtime/core-js/object/create');

var _create2 = _interopRequireDefault(_create);

var _promise = require('babel-runtime/core-js/promise');

var _promise2 = _interopRequireDefault(_promise);

var _should = require('should');

var _should2 = _interopRequireDefault(_should);

var _sinon = require('sinon');

var _sinon2 = _interopRequireDefault(_sinon);

var _socket = require('socket.io');

var _socket2 = _interopRequireDefault(_socket);

var _metaApi = require('../metaApi/metaApi');

var _metaApi2 = _interopRequireDefault(_metaApi);

var _synchronizationListener = require('../clients/metaApi/synchronizationListener');

var _synchronizationListener2 = _interopRequireDefault(_synchronizationListener);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

const accountInformation = {
  broker: 'True ECN Trading Ltd',
  currency: 'USD',
  server: 'ICMarketsSC-Demo',
  balance: 7319.9,
  equity: 7306.649913200001,
  margin: 184.1,
  freeMargin: 7120.22,
  leverage: 100,
  marginLevel: 3967.58283542
};
const errors = [{
  'id': 1,
  'error': 'TooManyRequestsError',
  'message': 'One user can connect to one server no more than 300 accounts. Current number of connected ' + 'accounts 300. For more information see https://metaapi.cloud/docs/client/rateLimiting/',
  'metadata': {
    'maxAccountsPerUserPerServer': 300,
    'accountsCount': 300,
    'recommendedRetryTime': new Date(Date.now() + 20000),
    'type': 'LIMIT_ACCOUNT_SUBSCRIPTIONS_PER_USER_PER_SERVER'
  }
}, {
  'id': 1,
  'error': 'TooManyRequestsError',
  'message': 'You have used all your account subscriptions quota. You have 50 account subscriptions available ' + 'and have used 50 subscriptions. Please deploy more accounts to get more subscriptions. For more ' + 'information see https://metaapi.cloud/docs/client/rateLimiting/',
  'metadata': {
    'maxAccountsPerUser': 50,
    'accountsCount': 50,
    'recommendedRetryTime': new Date(Date.now() + 20000),
    'type': 'LIMIT_ACCOUNT_SUBSCRIPTIONS_PER_USER'
  }
}, {
  'id': 1,
  'error': 'TooManyRequestsError',
  'message': 'You can not subscribe to more accounts on this connection because server is out of capacity. ' + 'Please establish a new connection with a different client-id header value to switch to a ' + 'different server. For more information see https://metaapi.cloud/docs/client/rateLimiting/',
  'metadata': {
    'changeClientIdHeader': true,
    'recommendedRetryTime': new Date(Date.now() + 20000),
    'type': 'LIMIT_ACCOUNT_SUBSCRIPTIONS_PER_SERVER'
  }
}];

let server, server1;

class FakeServer {
  constructor() {
    this.io;
    this.socket;
    this.statusTasks = {};
  }

  async authenticate(socket, data, host = 'ps-mpa-0') {
    socket.emit('synchronization', { type: 'authenticated', accountId: data.accountId,
      instanceIndex: 0, replicas: 1, host });
  }

  deleteStatusTask(accountId) {
    if (this.statusTasks[accountId]) {
      clearInterval(this.statusTasks[accountId]);
      delete this.statusTasks[accountId];
    }
  }

  async emitStatus(socket, accountId, host = 'ps-mpa-0') {
    const packet = { connected: true, authenticated: true, instanceIndex: 0, type: 'status',
      healthStatus: { rpcApiHealthy: true }, replicas: 1, host,
      connectionId: accountId, accountId: accountId };
    socket.emit('synchronization', packet);
  }

  async respondAccountInformation(socket, data) {
    await socket.emit('response', { type: 'response', accountId: data.accountId, requestId: data.requestId,
      accountInformation });
  }

  async syncAccount(socket, data, host = 'ps-mpa-0') {
    socket.emit('synchronization', { type: 'synchronizationStarted', accountId: data.accountId, instanceIndex: 0,
      synchronizationId: data.requestId, host });
    await new _promise2.default(res => setTimeout(res, 50));
    socket.emit('synchronization', { type: 'accountInformation', accountId: data.accountId, accountInformation,
      instanceIndex: 0, host });
    socket.emit('synchronization', { type: 'specifications', accountId: data.accountId, specifications: [], instanceIndex: 0, host });
    socket.emit('synchronization', { type: 'positions', accountId: data.accountId, synchronizationId: data.requestId,
      positions: [], instanceIndex: 0, host });
    socket.emit('synchronization', { type: 'orders', accountId: data.accountId, synchronizationId: data.requestId,
      orders: [], instanceIndex: 0, host });
    await new _promise2.default(res => setTimeout(res, 50));
    socket.emit('synchronization', { type: 'orderSynchronizationFinished', accountId: data.accountId,
      synchronizationId: data.requestId, instanceIndex: 0, host });
    await new _promise2.default(res => setTimeout(res, 50));
    socket.emit('synchronization', { type: 'dealSynchronizationFinished', accountId: data.accountId,
      synchronizationId: data.requestId, instanceIndex: 0, host });
  }

  async respond(socket, data) {
    await socket.emit('response', { type: 'response', accountId: data.accountId, requestId: data.requestId });
  }

  async emitError(socket, data, errorIndex, retryAfterSeconds) {
    const error = errors[errorIndex];
    error.metadata.recommendedRetryTime = new Date(Date.now() + retryAfterSeconds * 1000);
    error.requestId = data.requestId;
    await socket.emit('processingError', error);
  }

  enableSync(socket) {
    socket.removeAllListeners('request');
    socket.on('request', async data => {
      if (data.instanceIndex === 1) {
        await this.respond(socket, data);
      } else {
        if (data.type === 'subscribe') {
          await new _promise2.default(res => setTimeout(res, 200));
          await this.respond(socket, data);
          this.statusTasks[data.accountId] = setInterval(() => this.emitStatus(socket, data.accountId), 100);
          await new _promise2.default(res => setTimeout(res, 50));
          await this.authenticate(socket, data);
        } else if (data.type === 'synchronize') {
          await this.respond(socket, data);
          await new _promise2.default(res => setTimeout(res, 50));
          await this.syncAccount(socket, data);
        } else if (data.type === 'waitSynchronized' || data.type === 'refreshMarketDataSubscriptions') {
          await this.respond(socket, data);
        } else if (data.type === 'getAccountInformation') {
          await this.respondAccountInformation(socket, data);
        } else if (data.type === 'unsubscribe') {
          this.deleteStatusTask(data.accountId);
          await this.respond(socket, data);
        }
      }
    });
  }

  disableSync() {
    server.removeAllListeners('request');
    server.on('request', async data => {
      await this.respond(server, data);
    });
    server1.removeAllListeners('request');
    server1.on('request', async data => {
      await this.respond(server1, data);
    });
  }

  async start(port = 6785) {
    this.io = new _socket2.default(port, { path: '/ws', pingTimeout: 1000000 });
    this.io.on('connect', socket => {
      if (server) {
        server1 = socket;
      } else {
        server = socket;
      }
      socket.emit('response', { type: 'response' });
      this.enableSync(socket);
    });
  }

}

const sequentialProcessing = [true];
sequentialProcessing.forEach(param => {
  describe('Synchronization stability test', () => {

    let fakeServer;
    let connection;
    let clock;
    let sandbox;
    let api;

    before(() => {
      sandbox = _sinon2.default.createSandbox();
      const mockMath = (0, _create2.default)(global.Math);
      mockMath.random = () => 0.2;
      global.Math = mockMath;
    });

    beforeEach(async () => {
      clock = _sinon2.default.useFakeTimers({ shouldAdvanceTime: true, now: new Date('2020-04-02T00:00:00.000Z').getTime() });
      api = new _metaApi2.default('token', { application: 'application', domain: 'project-stock.agiliumlabs.cloud',
        useSharedClientApi: true, requestTimeout: 3, retryOpts: {
          retries: 3, minDelayInSeconds: 0.1, maxDelayInSeconds: 0.5, subscribeCooldownInSeconds: 6 },
        eventProcessing: { sequentialProcessing: param } });
      api.metatraderAccountApi._metatraderAccountClient.getAccount = accountId => ({
        _id: accountId,
        login: '50194988',
        name: 'mt5a',
        region: 'vint-hill',
        reliability: 'regular',
        server: 'ICMarketsSC-Demo',
        provisioningProfileId: 'f9ce1f12-e720-4b9a-9477-c2d4cb25f076',
        magic: 123456,
        application: 'MetaApi',
        connectionStatus: 'DISCONNECTED',
        state: 'DEPLOYED',
        type: 'cloud',
        accessToken: '2RUnoH1ldGbnEneCoqRTgI4QO1XOmVzbH5EVoQsA'
      });
      api._metaApiWebsocketClient.url = 'http://localhost:6785';
      sandbox.stub(api._connectionRegistry._clientApiClient, 'getHashingIgnoredFieldLists').resolves({
        'g1': {
          'specification': ['description'],
          'position': ['time'],
          'order': ['time']
        },
        'g2': {
          'specification': ['pipSize'],
          'position': ['comment'],
          'order': ['comment']
        }
      });
      fakeServer = new FakeServer();
      await fakeServer.start();
    });

    afterEach(async () => {
      (0, _values2.default)(fakeServer.statusTasks).forEach(task => clearInterval(task));
      connection._websocketClient._subscriptionManager.cancelAccount('accountId');
      connection._websocketClient.close();
      let resolve;
      let promise = new _promise2.default(res => resolve = res);
      fakeServer.io.close(() => {
        resolve();
      });
      await promise;
      sandbox.restore();
      clock.restore();
      await new _promise2.default(res => setTimeout(res, 50));
      server = null;
      server1 = null;
    });

    it('should synchronize account', async () => {
      const account = await api.metatraderAccountApi.getAccount('accountId');
      connection = account.getStreamingConnection();
      await connection.connect();
      clock.tickAsync(5000);
      await connection.waitSynchronized({ timeoutInSeconds: 10 });
      const response = connection.terminalState.accountInformation;
      _sinon2.default.assert.match(response, accountInformation);
      (connection.synchronized && connection.terminalState.connected && connection.terminalState.connectedToBroker).should.equal(true);
    }).timeout(10000);

    it('should reconnect on server socket crash', async () => {
      const account = await api.metatraderAccountApi.getAccount('accountId');
      connection = account.getStreamingConnection();
      await connection.connect();
      clock.tickAsync(5000);
      await connection.waitSynchronized({ timeoutInSeconds: 10 });
      server.disconnect();
      await new _promise2.default(res => setTimeout(res, 50));
      await clock.tickAsync(10000);
      const response = connection.terminalState.accountInformation;
      _sinon2.default.assert.match(response, accountInformation);
      (connection.synchronized && connection.terminalState.connected && connection.terminalState.connectedToBroker).should.equal(true);
    }).timeout(10000);

    it('should set state to disconnected on timeout', async () => {
      const account = await api.metatraderAccountApi.getAccount('accountId');
      connection = account.getStreamingConnection();
      await connection.connect();
      clock.tickAsync(5000);
      await connection.waitSynchronized({ timeoutInSeconds: 10 });
      fakeServer.deleteStatusTask('accountId');
      fakeServer.io.on('connect', socket => {
        socket.disconnect();
      });
      server.disconnect();
      await clock.tickAsync(61000);
      await new _promise2.default(res => setTimeout(res, 50));
      connection.synchronized.should.equal(false);
      connection.terminalState.connected.should.equal(false);
      connection.terminalState.connectedToBroker.should.equal(false);
    }).timeout(10000);

    it('should resubscribe on timeout', async () => {
      const account = await api.metatraderAccountApi.getAccount('accountId');
      connection = account.getStreamingConnection();
      await connection.connect();
      clock.tickAsync(5000);
      await connection.waitSynchronized({ timeoutInSeconds: 10 });
      fakeServer.deleteStatusTask('accountId');
      await clock.tickAsync(61000);
      await new _promise2.default(res => setTimeout(res, 50));
      const response = connection.terminalState.accountInformation;
      _sinon2.default.assert.match(response, accountInformation);
      (connection.synchronized && connection.terminalState.connected && connection.terminalState.connectedToBroker).should.equal(true);
    }).timeout(10000);

    it('should synchronize if subscribe response arrives after synchronization', async () => {
      fakeServer.io.removeAllListeners('connect');
      fakeServer.io.on('connect', socket => {
        server = socket;
        socket.emit('response', { type: 'response' });
        socket.removeAllListeners('request');
        socket.on('request', async data => {
          if (data.instanceIndex === 1) {
            await fakeServer.respond(socket, data);
            return;
          }
          if (data.type === 'subscribe') {
            await new _promise2.default(res => setTimeout(res, 200));
            fakeServer.statusTasks.accountId = setInterval(() => fakeServer.emitStatus(socket, data.accountId), 100);
            await fakeServer.authenticate(socket, data);
            await new _promise2.default(res => setTimeout(res, 400));
            await fakeServer.respond(socket, data);
          } else if (data.type === 'synchronize') {
            await fakeServer.respond(socket, data);
            await fakeServer.syncAccount(socket, data);
          } else if (data.type === 'waitSynchronized' || data.type === 'refreshMarketDataSubscriptions') {
            await fakeServer.respond(socket, data);
          } else if (data.type === 'getAccountInformation') {
            await fakeServer.respondAccountInformation(socket, data);
          }
        });
      });
      const account = await api.metatraderAccountApi.getAccount('accountId');
      connection = account.getStreamingConnection();
      await connection.connect();
      clock.tickAsync(5000);
      await connection.waitSynchronized({ timeoutInSeconds: 10 });
      const response = connection.terminalState.accountInformation;
      _sinon2.default.assert.match(response, accountInformation);
      (connection.synchronized && connection.terminalState.connected && connection.terminalState.connectedToBroker).should.equal(true);
    }).timeout(10000);

    it('should wait until account is redeployed after disconnect', async () => {
      const account = await api.metatraderAccountApi.getAccount('accountId');
      connection = account.getStreamingConnection();
      await connection.connect();
      clock.tickAsync(5000);
      await connection.waitSynchronized({ timeoutInSeconds: 10 });
      fakeServer.deleteStatusTask('accountId');
      fakeServer.disableSync();
      await server.emit('synchronization', { type: 'disconnected', accountId: 'accountId',
        host: 'ps-mpa-0', instanceIndex: 0 });
      await clock.tickAsync(20000);
      connection.synchronized.should.equal(false);
      connection.terminalState.connected.should.equal(false);
      connection.terminalState.connectedToBroker.should.equal(false);
      await clock.tickAsync(200000);
      fakeServer.enableSync(server);
      await clock.tickAsync(20000);
      connection.synchronized.should.equal(false);
      connection.terminalState.connected.should.equal(false);
      connection.terminalState.connectedToBroker.should.equal(false);
      await clock.tickAsync(200000);
      (connection.synchronized && connection.terminalState.connected && connection.terminalState.connectedToBroker).should.equal(true);
    }).timeout(10000);

    it('should resubscribe immediately after disconnect on status packet', async () => {
      const account = await api.metatraderAccountApi.getAccount('accountId');
      connection = account.getStreamingConnection();
      await connection.connect();
      clock.tickAsync(5000);
      await connection.waitSynchronized({ timeoutInSeconds: 10 });
      fakeServer.deleteStatusTask('accountId');
      fakeServer.disableSync();
      await server.emit('synchronization', { type: 'disconnected', accountId: 'accountId',
        host: 'ps-mpa-0', instanceIndex: 0 });
      await clock.tickAsync(20000);
      connection.synchronized.should.equal(false);
      connection.terminalState.connected.should.equal(false);
      connection.terminalState.connectedToBroker.should.equal(false);
      await clock.tickAsync(200000);
      fakeServer.enableSync(server);
      await fakeServer.emitStatus(server, 'accountId');
      await clock.tickAsync(20000);
      (connection.synchronized && connection.terminalState.connected && connection.terminalState.connectedToBroker).should.equal(true);
    }).timeout(10000);

    it('should reconnect after server restarts', async () => {
      const account = await api.metatraderAccountApi.getAccount('accountId');
      connection = account.getStreamingConnection();
      await connection.connect();
      await new _promise2.default(res => setTimeout(res, 50));
      clock.tickAsync(5000);
      await connection.waitSynchronized({ timeoutInSeconds: 10 });
      for (let i = 0; i < 5; i++) {
        fakeServer.deleteStatusTask('accountId');
        fakeServer.io.close();
        await clock.tickAsync(200000);
        await new _promise2.default(res => setTimeout(res, 50));
        clock.tickAsync(2000);
        await fakeServer.start();
        await new _promise2.default(res => setTimeout(res, 50));
        await clock.tickAsync(1000);
      }
      await clock.tickAsync(20000);
      await new _promise2.default(res => setTimeout(res, 100));
      await clock.tickAsync(20000);
      const response = connection.terminalState.accountInformation;
      _sinon2.default.assert.match(response, accountInformation);
      connection.synchronized.should.equal(true);
      connection.terminalState.connected.should.equal(true);
      connection.terminalState.connectedToBroker.should.equal(true);
    }).timeout(20000);

    it('should synchronize if connecting while server is rebooting', async () => {
      fakeServer.io.close();
      await fakeServer.start(9000);
      const account = await api.metatraderAccountApi.getAccount('accountId');
      connection = account.getStreamingConnection();
      await connection.connect();
      setTimeout(() => {
        fakeServer.io.close();
        fakeServer.start();
      }, 3000);
      await new _promise2.default(res => setTimeout(res, 50));
      clock.tickAsync(7000);
      await connection.waitSynchronized({ timeoutInSeconds: 10 });
      const response = connection.terminalState.accountInformation;
      _sinon2.default.assert.match(response, accountInformation);
      (connection.synchronized && connection.terminalState.connected && connection.terminalState.connectedToBroker).should.equal(true);
    }).timeout(10000);

    it('should resubscribe other accounts after one of connections is closed', async () => {
      const account = await api.metatraderAccountApi.getAccount('accountId');
      connection = account.getStreamingConnection();
      await connection.connect();
      clock.tickAsync(5000);
      await connection.waitSynchronized({ timeoutInSeconds: 10 });
      const account2 = await api.metatraderAccountApi.getAccount('accountId2');
      const connection2 = account2.getStreamingConnection();
      await connection2.connect();
      clock.tickAsync(5000);
      await connection2.waitSynchronized({ timeoutInSeconds: 10 });
      const account3 = await api.metatraderAccountApi.getAccount('accountId3');
      const connection3 = account3.getStreamingConnection();
      await connection3.connect();
      clock.tickAsync(1000);
      await connection3.waitSynchronized({ timeoutInSeconds: 10 });
      await connection.close();
      fakeServer.deleteStatusTask('accountId2');
      fakeServer.deleteStatusTask('accountId3');
      fakeServer.disableSync();
      server.disconnect();
      await clock.tickAsync(2000);
      await new _promise2.default(res => setTimeout(res, 50));
      fakeServer.enableSync(server);
      server.disconnect();
      await clock.tickAsync(8000);
      await new _promise2.default(res => setTimeout(res, 50));
      connection.synchronized.should.equal(false);
      connection2.synchronized.should.equal(true);
      connection2.terminalState.connected.should.equal(true);
      connection2.terminalState.connectedToBroker.should.equal(true);
      connection3.synchronized.should.equal(true);
      connection3.terminalState.connected.should.equal(true);
      connection3.terminalState.connectedToBroker.should.equal(true);
    }).timeout(10000);

    it('should limit subscriptions during per user 429 error', async () => {
      const subscribedAccounts = {};
      fakeServer.io.removeAllListeners('connect');
      fakeServer.io.on('connect', socket => {
        server = socket;
        socket.emit('response', { type: 'response' });
        socket.removeAllListeners('request');
        // eslint-disable-next-line complexity
        socket.on('request', async data => {
          if (data.instanceIndex === 1) {
            await fakeServer.respond(socket, data);
            return;
          }
          if (data.type === 'subscribe') {
            if ((0, _keys2.default)(subscribedAccounts).length < 2) {
              subscribedAccounts[data.accountId] = true;
              await new _promise2.default(res => setTimeout(res, 200));
              await fakeServer.respond(socket, data);
              fakeServer.statusTasks.accountId = setInterval(() => fakeServer.emitStatus(socket, data.accountId), 100);
              await new _promise2.default(res => setTimeout(res, 50));
              await fakeServer.authenticate(socket, data);
            } else {
              await fakeServer.emitError(socket, data, 1, 2);
            }
          } else if (data.type === 'synchronize') {
            await fakeServer.respond(socket, data);
            await fakeServer.syncAccount(socket, data);
          } else if (data.type === 'waitSynchronized' || data.type === 'refreshMarketDataSubscriptions') {
            await fakeServer.respond(socket, data);
          } else if (data.type === 'getAccountInformation') {
            await fakeServer.respondAccountInformation(socket, data);
          } else if (data.type === 'unsubscribe') {
            delete subscribedAccounts[data.accountId];
            await fakeServer.respond(socket, data);
          }
        });
      });
      const account = await api.metatraderAccountApi.getAccount('accountId');
      connection = account.getStreamingConnection();
      await connection.connect();
      await new _promise2.default(res => setTimeout(res, 50));
      clock.tickAsync(5000);
      await connection.waitSynchronized({ timeoutInSeconds: 5 });
      const account2 = await api.metatraderAccountApi.getAccount('accountId2');
      const connection2 = account2.getStreamingConnection();
      await connection2.connect();
      await new _promise2.default(res => setTimeout(res, 50));
      clock.tickAsync(5000);
      await connection2.waitSynchronized({ timeoutInSeconds: 5 });
      const account3 = await api.metatraderAccountApi.getAccount('accountId3');
      const connection3 = account3.getStreamingConnection();
      await connection3.connect();
      try {
        await new _promise2.default(res => setTimeout(res, 50));
        clock.tickAsync(5000);
        await connection3.waitSynchronized({ timeoutInSeconds: 5 });
        throw new Error('TimeoutError expected');
      } catch (err) {
        err.name.should.equal('TimeoutError');
      }
      await connection2.close();
      await clock.tickAsync(2000);
      _sinon2.default.assert.match(connection3.synchronized, true);
    }).timeout(10000);

    it('should wait for retry time after per user 429 error', async () => {
      let requestTimestamp = 0;
      const subscribedAccounts = {};

      fakeServer.io.removeAllListeners('connect');
      fakeServer.io.on('connect', socket => {
        server = socket;
        socket.emit('response', { type: 'response' });
        socket.removeAllListeners('request');
        //eslint-disable-next-line complexity
        socket.on('request', async data => {
          if (data.instanceIndex === 1) {
            await fakeServer.respond(socket, data);
            return;
          }
          if (data.type === 'subscribe') {
            if ((0, _keys2.default)(subscribedAccounts).length < 2 || requestTimestamp !== 0 && Date.now() - 2 * 1000 > requestTimestamp) {
              subscribedAccounts[data.accountId] = true;
              await new _promise2.default(res => setTimeout(res, 200));
              await fakeServer.respond(socket, data);
              fakeServer.statusTasks.accountId = setInterval(() => fakeServer.emitStatus(socket, data.accountId), 100);
              await new _promise2.default(res => setTimeout(res, 50));
              await fakeServer.authenticate(socket, data);
            } else {
              requestTimestamp = Date.now();
              await fakeServer.emitError(socket, data, 1, 3);
            }
          } else if (data.type === 'synchronize') {
            await fakeServer.respond(socket, data);
            await fakeServer.syncAccount(socket, data);
          } else if (data.type === 'waitSynchronized' || data.type === 'refreshMarketDataSubscriptions') {
            await fakeServer.respond(socket, data);
          } else if (data.type === 'getAccountInformation') {
            await fakeServer.respondAccountInformation(socket, data);
          } else if (data.type === 'unsubscribe') {
            delete subscribedAccounts[data.accountId];
            await fakeServer.respond(socket, data);
          }
        });
      });
      const account = await api.metatraderAccountApi.getAccount('accountId');
      connection = account.getStreamingConnection();
      await connection.connect();
      await new _promise2.default(res => setTimeout(res, 50));
      clock.tickAsync(1500);
      await connection.waitSynchronized({ timeoutInSeconds: 3 });
      const account2 = await api.metatraderAccountApi.getAccount('accountId2');
      const connection2 = account2.getStreamingConnection();
      await connection2.connect();
      await new _promise2.default(res => setTimeout(res, 50));
      clock.tickAsync(1500);
      await connection2.waitSynchronized({ timeoutInSeconds: 3 });
      const account3 = await api.metatraderAccountApi.getAccount('accountId3');
      const connection3 = account3.getStreamingConnection();
      await connection3.connect();
      try {
        await new _promise2.default(res => setTimeout(res, 50));
        clock.tickAsync(3000);
        await connection3.waitSynchronized({ timeoutInSeconds: 3 });
        throw new Error('TimeoutError expected');
      } catch (err) {
        err.name.should.equal('TimeoutError');
      }
      await clock.tickAsync(1500);
      _sinon2.default.assert.match(connection3.synchronized, false);
      await clock.tickAsync(2500);
      await new _promise2.default(res => setTimeout(res, 200));
      _sinon2.default.assert.match(connection3.synchronized, true);
    }).timeout(10000);

    it('should wait for retry time after per server 429 error', async () => {
      let requestTimestamp = 0;
      const sidByAccounts = {};

      fakeServer.io.removeAllListeners('connect');
      fakeServer.io.on('connect', socket => {
        server = socket;
        socket.emit('response', { type: 'response' });
        socket.removeAllListeners('request');
        //eslint-disable-next-line complexity
        socket.on('request', async data => {
          if (data.instanceIndex === 1) {
            await fakeServer.respond(socket, data);
            return;
          }
          const sid = socket.id;
          if (data.type === 'subscribe') {
            if ((0, _values2.default)(sidByAccounts).filter(accountSID => accountSID === sid).length >= 2 && (requestTimestamp === 0 || Date.now() - 5 * 1000 < requestTimestamp)) {
              requestTimestamp = Date.now();
              await fakeServer.emitError(socket, data, 2, 5);
            } else {
              sidByAccounts[data.accountId] = sid;
              await new _promise2.default(res => setTimeout(res, 200));
              await fakeServer.respond(socket, data);
              fakeServer.statusTasks.accountId = setInterval(() => fakeServer.emitStatus(socket, data.accountId), 100);
              await new _promise2.default(res => setTimeout(res, 50));
              await fakeServer.authenticate(socket, data);
            }
          } else if (data.type === 'synchronize') {
            await fakeServer.respond(socket, data);
            await fakeServer.syncAccount(socket, data);
          } else if (data.type === 'waitSynchronized' || data.type === 'refreshMarketDataSubscriptions') {
            await fakeServer.respond(socket, data);
          } else if (data.type === 'getAccountInformation') {
            await fakeServer.respondAccountInformation(socket, data);
          }
        });
      });
      const account = await api.metatraderAccountApi.getAccount('accountId');
      connection = account.getStreamingConnection();
      await connection.connect();
      await connection.waitSynchronized({ timeoutInSeconds: 3 });
      const account2 = await api.metatraderAccountApi.getAccount('accountId2');
      const connection2 = account2.getStreamingConnection();
      await connection2.connect();
      await connection2.waitSynchronized({ timeoutInSeconds: 3 });
      const account3 = await api.metatraderAccountApi.getAccount('accountId3');
      const connection3 = account3.getStreamingConnection();
      await connection3.connect();
      connection3.waitSynchronized({ timeoutInSeconds: 5 });
      await clock.tickAsync(5000);
      sidByAccounts.accountId.should.equal(sidByAccounts.accountId2);
      sidByAccounts.accountId2.should.not.equal(sidByAccounts.accountId3);
      await clock.tickAsync(5000);
      const account4 = await api.metatraderAccountApi.getAccount('accountId4');
      const connection4 = account4.getStreamingConnection();
      await connection4.connect();
      await new _promise2.default(res => setTimeout(res, 50));
      clock.tickAsync(5000);
      await connection4.waitSynchronized({ timeoutInSeconds: 3 });
      sidByAccounts.accountId.should.equal(sidByAccounts.accountId4);
    }).timeout(10000);

    it('should reconnect after per server 429 error if connection has no subscribed accounts', async () => {
      const sids = [];

      fakeServer.io.removeAllListeners('connect');
      fakeServer.io.on('connect', socket => {
        server = socket;
        socket.emit('response', { type: 'response' });
        socket.removeAllListeners('request');
        //eslint-disable-next-line complexity
        socket.on('request', async data => {
          if (data.instanceIndex === 1) {
            await fakeServer.respond(socket, data);
            return;
          }
          const sid = socket.id;
          if (data.type === 'subscribe') {
            sids.push(sid);
            if (sids.length === 1) {
              await fakeServer.emitError(socket, data, 2, 2);
            } else {
              await new _promise2.default(res => setTimeout(res, 200));
              await fakeServer.respond(socket, data);
              fakeServer.statusTasks.accountId = setInterval(() => fakeServer.emitStatus(socket, data.accountId), 100);
              await new _promise2.default(res => setTimeout(res, 50));
              await fakeServer.authenticate(socket, data);
            }
          } else if (data.type === 'synchronize') {
            await fakeServer.respond(socket, data);
            await fakeServer.syncAccount(socket, data);
          } else if (data.type === 'waitSynchronized' || data.type === 'refreshMarketDataSubscriptions') {
            await fakeServer.respond(socket, data);
          } else if (data.type === 'getAccountInformation') {
            await fakeServer.respondAccountInformation(socket, data);
          }
        });
      });
      const account = await api.metatraderAccountApi.getAccount('accountId');
      connection = account.getStreamingConnection();
      await connection.connect();
      await new _promise2.default(res => setTimeout(res, 50));
      clock.tickAsync(5000);
      await connection.waitSynchronized({ timeoutInSeconds: 5 });
      sids[0].should.not.equal(sids[1]);
    }).timeout(10000);

    it('should free a subscribe slot on unsubscribe after per server 429 error', async () => {
      const sidByAccounts = {};

      fakeServer.io.removeAllListeners('connect');
      fakeServer.io.on('connect', socket => {
        server = socket;
        socket.emit('response', { type: 'response' });
        socket.removeAllListeners('request');
        //eslint-disable-next-line complexity
        socket.on('request', async data => {
          if (data.instanceIndex === 1) {
            await fakeServer.respond(socket, data);
            return;
          }
          const sid = socket.id;
          if (data.type === 'subscribe') {
            if ((0, _values2.default)(sidByAccounts).filter(accountSID => accountSID === sid).length >= 2) {
              await fakeServer.emitError(socket, data, 2, 200);
            } else {
              sidByAccounts[data.accountId] = sid;
              await new _promise2.default(res => setTimeout(res, 200));
              await fakeServer.respond(socket, data);
              fakeServer.statusTasks.accountId = setInterval(() => fakeServer.emitStatus(socket, data.accountId), 100);
              await new _promise2.default(res => setTimeout(res, 50));
              await fakeServer.authenticate(socket, data);
            }
          } else if (data.type === 'synchronize') {
            await fakeServer.respond(socket, data);
            await fakeServer.syncAccount(socket, data);
          } else if (data.type === 'waitSynchronized' || data.type === 'refreshMarketDataSubscriptions') {
            await fakeServer.respond(socket, data);
          } else if (data.type === 'getAccountInformation') {
            await fakeServer.respondAccountInformation(socket, data);
          } else if (data.type === 'unsubscribe') {
            delete sidByAccounts[data.accountId];
            await fakeServer.respond(socket, data);
          }
        });
      });
      const account = await api.metatraderAccountApi.getAccount('accountId');
      connection = account.getStreamingConnection();
      await connection.connect();
      await connection.waitSynchronized({ timeoutInSeconds: 3 });
      const account2 = await api.metatraderAccountApi.getAccount('accountId2');
      const connection2 = account2.getStreamingConnection();
      await connection2.connect();
      await connection2.waitSynchronized({ timeoutInSeconds: 3 });
      const account3 = await api.metatraderAccountApi.getAccount('accountId3');
      const connection3 = account3.getStreamingConnection();
      await connection3.connect();
      connection3.waitSynchronized({ timeoutInSeconds: 5 });
      await clock.tickAsync(5000);
      sidByAccounts.accountId.should.equal(sidByAccounts.accountId2);
      sidByAccounts.accountId2.should.not.equal(sidByAccounts.accountId3);
      await connection2.close();
      const account4 = await api.metatraderAccountApi.getAccount('accountId4');
      const connection4 = account4.getStreamingConnection();
      await connection4.connect();
      await new _promise2.default(res => setTimeout(res, 50));
      clock.tickAsync(5000);
      await connection4.waitSynchronized({ timeoutInSeconds: 3 });
      sidByAccounts.accountId.should.equal(sidByAccounts.accountId4);
    }).timeout(10000);

    it('should wait for retry time after per server per user 429 error', async () => {
      let requestTimestamp = 0;
      const sidByAccounts = {};

      fakeServer.io.removeAllListeners('connect');
      fakeServer.io.on('connect', socket => {
        server = socket;
        socket.emit('response', { type: 'response' });
        socket.removeAllListeners('request');
        //eslint-disable-next-line complexity
        socket.on('request', async data => {
          if (data.instanceIndex === 1) {
            await fakeServer.respond(socket, data);
            return;
          }
          const sid = socket.id;
          if (data.type === 'subscribe') {
            if ((0, _values2.default)(sidByAccounts).filter(accountSID => accountSID === sid).length >= 2 && (requestTimestamp === 0 || Date.now() - 2 * 1000 < requestTimestamp)) {
              requestTimestamp = Date.now();
              await fakeServer.emitError(socket, data, 0, 2);
            } else {
              sidByAccounts[data.accountId] = sid;
              await new _promise2.default(res => setTimeout(res, 200));
              await fakeServer.respond(socket, data);
              fakeServer.statusTasks.accountId = setInterval(() => fakeServer.emitStatus(socket, data.accountId), 100);
              await new _promise2.default(res => setTimeout(res, 50));
              await fakeServer.authenticate(socket, data);
            }
          } else if (data.type === 'synchronize') {
            await fakeServer.respond(socket, data);
            await fakeServer.syncAccount(socket, data);
          } else if (data.type === 'waitSynchronized' || data.type === 'refreshMarketDataSubscriptions') {
            await fakeServer.respond(socket, data);
          } else if (data.type === 'getAccountInformation') {
            await fakeServer.respondAccountInformation(socket, data);
          } else if (data.type === 'unsubscribe') {
            delete sidByAccounts[data.accountId];
            await fakeServer.respond(socket, data);
          }
        });
      });
      const account = await api.metatraderAccountApi.getAccount('accountId');
      connection = account.getStreamingConnection();
      await connection.connect();
      await new _promise2.default(res => setTimeout(res, 50));
      clock.tickAsync(5000);
      await connection.waitSynchronized({ timeoutInSeconds: 5 });
      const account2 = await api.metatraderAccountApi.getAccount('accountId2');
      const connection2 = account2.getStreamingConnection();
      await connection2.connect();
      await new _promise2.default(res => setTimeout(res, 50));
      clock.tickAsync(5000);
      await connection2.waitSynchronized({ timeoutInSeconds: 5 });
      const account3 = await api.metatraderAccountApi.getAccount('accountId3');
      const connection3 = account3.getStreamingConnection();
      await connection3.connect();
      await new _promise2.default(res => setTimeout(res, 50));
      clock.tickAsync(5000);
      await connection3.waitSynchronized({ timeoutInSeconds: 5 });
      sidByAccounts.accountId.should.equal(sidByAccounts.accountId2);
      sidByAccounts.accountId2.should.not.equal(sidByAccounts.accountId3);
      const account4 = await api.metatraderAccountApi.getAccount('accountId4');
      const connection4 = account4.getStreamingConnection();
      await connection4.connect();
      await new _promise2.default(res => setTimeout(res, 50));
      clock.tickAsync(5000);
      await connection4.waitSynchronized({ timeoutInSeconds: 5 });
      sidByAccounts.accountId.should.not.equal(sidByAccounts.accountId4);
      await connection2.close();
      const account5 = await api.metatraderAccountApi.getAccount('accountId5');
      const connection5 = account5.getStreamingConnection();
      await connection5.connect();
      await new _promise2.default(res => setTimeout(res, 50));
      clock.tickAsync(5000);
      await connection5.waitSynchronized({ timeoutInSeconds: 5 });
      sidByAccounts.accountId.should.equal(sidByAccounts.accountId5);
    }).timeout(10000);

    it('should attempt to resubscribe on disconnected packet', async () => {
      const account = await api.metatraderAccountApi.getAccount('accountId');
      connection = account.getStreamingConnection();
      await connection.connect();
      await new _promise2.default(res => setTimeout(res, 50));
      clock.tickAsync(5000);
      await connection.waitSynchronized({ timeoutInSeconds: 3 });
      (connection.synchronized && connection.terminalState.connected && connection.terminalState.connectedToBroker).should.equal(true);
      fakeServer.deleteStatusTask('accountId');
      await server.emit('synchronization', { type: 'disconnected', accountId: 'accountId',
        host: 'ps-mpa-0', instanceIndex: 0 });
      await new _promise2.default(res => setTimeout(res, 50));
      await clock.tickAsync(200);
      await new _promise2.default(res => setTimeout(res, 50));
      connection.synchronized.should.equal(false);
      connection.terminalState.connected.should.equal(false);
      connection.terminalState.connectedToBroker.should.equal(false);
      await clock.tickAsync(5000);
      (connection.synchronized && connection.terminalState.connected && connection.terminalState.connectedToBroker).should.equal(true);
    }).timeout(10000);

    it('should handle multiple streams in one instance number', async () => {
      const account = await api.metatraderAccountApi.getAccount('accountId');
      connection = account.getStreamingConnection();
      await connection.connect();
      clock.tickAsync(5000);
      await connection.waitSynchronized({ timeoutInSeconds: 10 });
      let subscribeCalled = false;

      fakeServer.enableSync = socket => {
        socket.removeAllListeners('request');
        //eslint-disable-next-line complexity
        socket.on('request', async data => {
          if (data.instanceIndex === 1) {
            await fakeServer.respond(socket, data);
            return;
          }
          if (data.type === 'subscribe') {
            subscribeCalled = true;
          } else if (data.type === 'synchronize') {
            await fakeServer.respond(socket, data);
            await fakeServer.syncAccount(socket, data, 'ps-mpa-1');
          } else if (data.type === 'waitSynchronized' || data.type === 'refreshMarketDataSubscriptions') {
            await fakeServer.respond(socket, data);
          } else if (data.type === 'getAccountInformation') {
            await fakeServer.respondAccountInformation(socket, data);
          }
        });
      };
      fakeServer.enableSync(server);
      const statusTask = setInterval(() => fakeServer.emitStatus(server, 'accountId', 'ps-mpa-1'), 100);
      await fakeServer.authenticate(server, { accountId: 'accountId' }, 'ps-mpa-1');
      await new _promise2.default(res => setTimeout(res, 50));
      await clock.tickAsync(20000);
      fakeServer.deleteStatusTask('accountId');
      await server.emit('synchronization', { type: 'disconnected', accountId: 'accountId',
        host: 'ps-mpa-0', instanceIndex: 0 });
      await new _promise2.default(res => setTimeout(res, 50));
      await clock.tickAsync(10000);
      (connection.synchronized && connection.terminalState.connected && connection.terminalState.connectedToBroker).should.equal(true);
      subscribeCalled.should.equal(false);
      await server.emit('synchronization', { type: 'disconnected', accountId: 'accountId',
        host: 'ps-mpa-1', instanceIndex: 0 });
      clearInterval(statusTask);
      await new _promise2.default(res => setTimeout(res, 50));
      connection.synchronized.should.equal(false);
      connection.terminalState.connected.should.equal(false);
      connection.terminalState.connectedToBroker.should.equal(false);
    }).timeout(10000);

    it('should not resubscribe if multiple streams and one timed out', async () => {
      const account = await api.metatraderAccountApi.getAccount('accountId');
      connection = account.getStreamingConnection();
      await connection.connect();
      await new _promise2.default(res => setTimeout(res, 50));
      clock.tickAsync(5000);
      await connection.waitSynchronized({ timeoutInSeconds: 10 });
      let subscribeCalled = false;

      fakeServer.enableSync = socket => {
        socket.removeAllListeners('request');
        //eslint-disable-next-line complexity
        socket.on('request', async data => {
          if (data.instanceIndex === 1) {
            await fakeServer.respond(socket, data);
            return;
          }
          if (data.type === 'subscribe') {
            subscribeCalled = true;
          } else if (data.type === 'synchronize') {
            await fakeServer.respond(socket, data);
            await fakeServer.syncAccount(socket, data, 'ps-mpa-1');
          } else if (data.type === 'waitSynchronized' || data.type === 'refreshMarketDataSubscriptions') {
            await fakeServer.respond(socket, data);
          } else if (data.type === 'getAccountInformation') {
            await fakeServer.respondAccountInformation(socket, data);
          }
        });
      };
      fakeServer.enableSync(server);
      const statusTask = setInterval(() => fakeServer.emitStatus(server, 'accountId', 'ps-mpa-1'), 120);
      await fakeServer.authenticate(server, { accountId: 'accountId' }, 'ps-mpa-1');
      await new _promise2.default(res => setTimeout(res, 50));
      await clock.tickAsync(20000);
      fakeServer.deleteStatusTask('accountId');
      await clock.tickAsync(55000);
      await new _promise2.default(res => setTimeout(res, 50));
      (connection.synchronized && connection.terminalState.connected && connection.terminalState.connectedToBroker).should.equal(true);
      subscribeCalled.should.equal(false);
      clearInterval(statusTask);
      await new _promise2.default(res => setTimeout(res, 50));
      await clock.tickAsync(65000);
      connection.synchronized.should.equal(false);
      connection.terminalState.connected.should.equal(false);
      connection.terminalState.connectedToBroker.should.equal(false);
      subscribeCalled.should.equal(true);
    }).timeout(10000);

    it('should not synchronize if connection is closed', async () => {
      let synchronizeCounter = 0;
      fakeServer.io.removeAllListeners('connect');
      fakeServer.io.on('connect', socket => {
        server = socket;
        socket.emit('response', { type: 'response' });
        socket.removeAllListeners('request');
        //eslint-disable-next-line complexity
        socket.on('request', async data => {
          if (data.instanceIndex === 1) {
            await fakeServer.respond(socket, data);
            return;
          }
          if (data.type === 'subscribe') {
            await new _promise2.default(res => setTimeout(res, 200));
            await fakeServer.respond(socket, data);
            fakeServer.statusTasks.accountId = setInterval(() => fakeServer.emitStatus(socket, data.accountId), 100);
            await fakeServer.authenticate(socket, data);
          } else if (data.type === 'synchronize') {
            synchronizeCounter++;
            await fakeServer.respond(socket, data);
            await fakeServer.syncAccount(socket, data, 'ps-mpa-1');
          } else if (data.type === 'waitSynchronized' || data.type === 'refreshMarketDataSubscriptions') {
            await fakeServer.respond(socket, data);
          } else if (data.type === 'getAccountInformation') {
            await fakeServer.respondAccountInformation(socket, data);
          } else if (data.type === 'unsubscribe') {
            fakeServer.deleteStatusTask(data.accountId);
            await fakeServer.respond(socket, data);
          }
        });
      });
      const account = await api.metatraderAccountApi.getAccount('accountId');
      connection = account.getStreamingConnection();
      await connection.connect();
      await new _promise2.default(res => setTimeout(res, 50));
      clock.tickAsync(5000);
      await connection.waitSynchronized({ timeoutInSeconds: 10 });
      _sinon2.default.assert.match(synchronizeCounter, 1);
      const account2 = await api.metatraderAccountApi.getAccount('accountId2');
      const connection2 = account2.getStreamingConnection();
      await connection2.connect();
      await new _promise2.default(res => setTimeout(res, 50));
      await connection2.close();
      try {
        clock.tickAsync(5000);
        await connection2.waitSynchronized({ timeoutInSeconds: 5 });
        throw new Error('Error expected');
      } catch (err) {
        err.message.should.equal('This connection has been closed, please create a new connection');
      }
      _sinon2.default.assert.match(synchronizeCounter, 1);
    }).timeout(10000);

    it('should not resubscribe after connection is closed', async () => {
      let subscribeCounter = 0;
      const servers = [];

      fakeServer.io.removeAllListeners('connect');
      fakeServer.io.on('connect', socket => {
        servers.push(socket);
        socket.emit('response', { type: 'response' });
        socket.removeAllListeners('request');
        //eslint-disable-next-line complexity
        socket.on('request', async data => {
          if (data.instanceIndex === 1) {
            await fakeServer.respond(socket, data);
            return;
          }
          if (data.type === 'subscribe') {
            subscribeCounter++;
            await new _promise2.default(res => setTimeout(res, 100));
            await fakeServer.respond(socket, data);
            fakeServer.deleteStatusTask(data.accountId);
            fakeServer.statusTasks.accountId = setInterval(() => fakeServer.emitStatus(socket, data.accountId), 100);
            await fakeServer.authenticate(socket, data);
          } else if (data.type === 'synchronize') {
            await fakeServer.respond(socket, data);
            await fakeServer.syncAccount(socket, data);
          } else if (data.type === 'waitSynchronized' || data.type === 'refreshMarketDataSubscriptions') {
            await fakeServer.respond(socket, data);
          } else if (data.type === 'getAccountInformation') {
            await fakeServer.respondAccountInformation(socket, data);
          } else if (data.type === 'unsubscribe') {
            fakeServer.deleteStatusTask(data.accountId);
            await fakeServer.respond(socket, data);
          }
        });
      });

      const account = await api.metatraderAccountApi.getAccount('accountId');
      connection = account.getStreamingConnection();
      await connection.connect();
      clock.tickAsync(5000);
      await connection.waitSynchronized({ timeoutInSeconds: 10 });
      (connection.synchronized && connection.terminalState.connected && connection.terminalState.connectedToBroker).should.equal(true);
      subscribeCounter.should.equal(1);
      await servers[0].emit('synchronization', { type: 'disconnected', accountId: 'accountId',
        host: 'ps-mpa-0', instanceIndex: 0 });
      await new _promise2.default(res => setTimeout(res, 50));
      await clock.tickAsync(100000);
      await new _promise2.default(res => setTimeout(res, 50));
      subscribeCounter.should.be.above(1);
      const previousSubscribeCounter = subscribeCounter;
      (connection.synchronized && connection.terminalState.connected && connection.terminalState.connectedToBroker).should.equal(true);
      servers[0].emit('synchronization', { type: 'disconnected', accountId: 'accountId',
        host: 'ps-mpa-0', instanceIndex: 0 });
      await connection.close();
      await new _promise2.default(res => setTimeout(res, 50));
      await clock.tickAsync(100000);
      await new _promise2.default(res => setTimeout(res, 50));
      _sinon2.default.assert.match(subscribeCounter, previousSubscribeCounter);
      connection.synchronized.should.equal(false);
      connection.terminalState.connected.should.equal(false);
      connection.terminalState.connectedToBroker.should.equal(false);
    }).timeout(10000);

    it('should not resubscribe on timeout if connection is closed', async () => {
      const account = await api.metatraderAccountApi.getAccount('accountId');
      connection = account.getStreamingConnection();
      await connection.connect();
      clock.tickAsync(5000);
      await connection.waitSynchronized({ timeoutInSeconds: 10 });
      fakeServer.deleteStatusTask('accountId');
      connection.synchronized.should.equal(true);
      await connection.close();
      await new _promise2.default(res => setTimeout(res, 100));
      await clock.tickAsync(62000);
      connection.synchronized.should.equal(false);
    }).timeout(10000);

    it('should not send multiple subscribe requests if status arrives faster than subscribe', async () => {
      let subscribeCounter = 0;
      const account = await api.metatraderAccountApi.getAccount('accountId');
      connection = account.getStreamingConnection();
      await connection.connect();
      clock.tickAsync(5000);
      await connection.waitSynchronized({ timeoutInSeconds: 10 });
      fakeServer.disableSync();
      fakeServer.deleteStatusTask('accountId');
      await new _promise2.default(res => setTimeout(res, 50));
      await clock.tickAsync(120000);
      connection.synchronized.should.equal(false);
      connection.terminalState.connected.should.equal(false);
      connection.terminalState.connectedToBroker.should.equal(false);

      server.removeAllListeners('request');
      server1.removeAllListeners('request');
      //eslint-disable-next-line complexity
      server.on('request', async data => {
        if (data.type === 'subscribe') {
          subscribeCounter++;
          await new _promise2.default(res => setTimeout(res, 2800));
          await fakeServer.respond(server, data);
          fakeServer.deleteStatusTask(data.accountId);
          fakeServer.statusTasks.accountId = setInterval(() => fakeServer.emitStatus(server, data.accountId), 1000);
          await fakeServer.authenticate(server, data);
        } else if (data.type === 'synchronize') {
          await fakeServer.respond(server, data);
          await fakeServer.syncAccount(server, data);
        } else if (data.type === 'waitSynchronized' || data.type === 'refreshMarketDataSubscriptions') {
          await fakeServer.respond(server, data);
        } else if (data.type === 'getAccountInformation') {
          await fakeServer.respondAccountInformation(server, data);
        } else if (data.type === 'unsubscribe') {
          fakeServer.deleteStatusTask(data.accountId);
          await fakeServer.respond(server, data);
        }
      });
      fakeServer.statusTasks.accountId = setInterval(() => fakeServer.emitStatus(server, 'accountId'), 1000);
      await new _promise2.default(res => setTimeout(res, 100));
      await clock.tickAsync(200000);
      await new _promise2.default(res => setTimeout(res, 100));
      await clock.tickAsync(5000);
      (connection.synchronized && connection.terminalState.connected && connection.terminalState.connectedToBroker).should.equal(true);
      _sinon2.default.assert.match(subscribeCounter, 1);
    }).timeout(10000);

    it('should not update price from old price packets', async () => {
      const account = await api.metatraderAccountApi.getAccount('accountId');
      connection = account.getStreamingConnection();
      await connection.connect();
      clock.tickAsync(5000);
      await connection.waitSynchronized({ timeoutInSeconds: 10 });
      const prices = {
        prices: [{
          time: new Date(Date.now() - 10000), symbol: 'EURUSD', bid: 1, ask: 1.1
        }],
        accountId: 'accountId', instanceIndex: 0, host: 'ps-mpa-0', type: 'prices'
      };
      await server.emit('synchronization', prices);
      await new _promise2.default(res => setTimeout(res, 100));
      _sinon2.default.assert.match(connection.terminalState.price('EURUSD').bid, 1);

      prices.prices[0].time = new Date(Date.now() - 20000);
      prices.prices[0].bid = 1.1;
      await server.emit('synchronization', prices);
      await new _promise2.default(res => setTimeout(res, 100));
      _sinon2.default.assert.match(connection.terminalState.price('EURUSD').bid, 1);

      prices.prices[0].time = new Date();
      prices.prices[0].bid = 1.2;
      await server.emit('synchronization', prices);
      await new _promise2.default(res => setTimeout(res, 100));
      _sinon2.default.assert.match(connection.terminalState.price('EURUSD').bid, 1.2);
    }).timeout(10000);

    describe('Region replica support', () => {

      beforeEach(() => {
        api.metatraderAccountApi._metatraderAccountClient.getAccount = accountId => ({
          _id: accountId,
          login: '50194988',
          name: 'mt5a',
          region: 'vint-hill',
          reliability: 'regular',
          server: 'ICMarketsSC-Demo',
          provisioningProfileId: 'f9ce1f12-e720-4b9a-9477-c2d4cb25f076',
          magic: 123456,
          application: 'MetaApi',
          connectionStatus: 'CONNECTED',
          state: 'DEPLOYED',
          type: 'cloud',
          accessToken: '2RUnoH1ldGbnEneCoqRTgI4QO1XOmVzbH5EVoQsA',
          accountReplicas: [{
            '_id': 'accountIdReplica',
            'quoteStreamingIntervalInSeconds': 2.5,
            'region': 'new-york',
            'magic': 0,
            'symbol': 'EURUSD',
            'copyFactoryResourceSlots': 1,
            'resourceSlots': 1,
            'extensions': [],
            'tags': [],
            'state': 'DEPLOYED',
            'connectionStatus': 'CONNECTED',
            'reliability': 'regular'
          }]
        });
      });

      it('should synchronize account', async () => {
        const account = await api.metatraderAccountApi.getAccount('accountId');
        connection = account.getStreamingConnection();
        await connection.connect();
        clock.tickAsync(5000);
        await connection.waitSynchronized({ timeoutInSeconds: 10 });
        const response = connection.terminalState.accountInformation;
        _sinon2.default.assert.match(response, accountInformation);
        (connection.synchronized && connection.terminalState.connected && connection.terminalState.connectedToBroker).should.equal(true);
      }).timeout(10000);

      it('should synchronize using a replica', async () => {
        let calledAccountId;

        const account = await api.metatraderAccountApi.getAccount('accountId');
        fakeServer.io.removeAllListeners('connect');
        fakeServer.io.on('connect', socket => {
          server = socket;
          socket.emit('response', { type: 'response' });
          socket.removeAllListeners('request');
          // eslint-disable-next-line complexity
          socket.on('request', async data => {
            if (data.instanceIndex === 1) {
              await fakeServer.respond(socket, data);
              return;
            }
            if (data.type === 'subscribe') {
              await new _promise2.default(res => setTimeout(res, 200));
              await fakeServer.respond(socket, data);
              fakeServer.statusTasks[data.accountId] = setInterval(() => fakeServer.emitStatus(socket, data.accountId), 100);
              await new _promise2.default(res => setTimeout(res, 50));
              await fakeServer.authenticate(socket, data);
            } else if (data.type === 'synchronize') {
              await fakeServer.respond(socket, data);
              await fakeServer.syncAccount(socket, data);
            } else if (data.type === 'waitSynchronized' || data.type === 'refreshMarketDataSubscriptions') {
              calledAccountId = data.accountId;
              await fakeServer.respond(socket, data);
            } else if (data.type === 'getAccountInformation') {
              await fakeServer.respondAccountInformation(socket, data);
            } else if (data.type === 'unsubscribe') {
              fakeServer.deleteStatusTask(data.accountId);
              await fakeServer.respond(socket, data);
            }
          });
        });

        connection = account.getStreamingConnection();
        connection._websocketClient._latencyService._latencyCache = { 'vint-hill': 500, 'new-york': 100 };
        await connection.connect();
        clock.tickAsync(5000);
        await connection.waitSynchronized({ timeoutInSeconds: 10 });
        const response = connection.terminalState.accountInformation;
        _sinon2.default.assert.match(response, accountInformation);
        _sinon2.default.assert.match(calledAccountId, 'accountIdReplica');
        (connection.synchronized && connection.terminalState.connected && connection.terminalState.connectedToBroker).should.equal(true);
      }).timeout(10000);

      it('should resynchronize if used account was undeployed, then return when redeployed', async () => {
        let calledAccountId;
        let unsubscribedAccountId;
        const allowedAccounts = ['accountId', 'accountIdReplica'];

        const account = await api.metatraderAccountApi.getAccount('accountId');
        fakeServer.io.removeAllListeners('connect');
        fakeServer.io.on('connect', socket => {
          server = socket;
          socket.emit('response', { type: 'response' });
          socket.removeAllListeners('request');
          // eslint-disable-next-line complexity
          socket.on('request', async data => {
            if (data.instanceIndex === 1) {
              await fakeServer.respond(socket, data);
              return;
            }
            if (!allowedAccounts.includes(data.accountId)) {
              return;
            }
            if (data.type === 'subscribe') {
              await new _promise2.default(res => setTimeout(res, 200));
              await fakeServer.respond(socket, data);
              fakeServer.statusTasks[data.accountId] = setInterval(() => fakeServer.emitStatus(socket, data.accountId), 100);
              await new _promise2.default(res => setTimeout(res, 50));
              await fakeServer.authenticate(socket, data);
            } else if (data.type === 'synchronize') {
              calledAccountId = data.accountId;
              await fakeServer.respond(socket, data);
              await fakeServer.syncAccount(socket, data);
            } else if (data.type === 'waitSynchronized' || data.type === 'refreshMarketDataSubscriptions') {
              calledAccountId = data.accountId;
              await fakeServer.respond(socket, data);
            } else if (data.type === 'getAccountInformation') {
              await fakeServer.respondAccountInformation(socket, data);
            } else if (data.type === 'unsubscribe') {
              unsubscribedAccountId = data.accountId;
              fakeServer.deleteStatusTask(data.accountId);
              await fakeServer.respond(socket, data);
            }
          });
        });

        connection = account.getStreamingConnection();
        connection._websocketClient._latencyService._latencyCache = { 'vint-hill': 500, 'new-york': 100 };
        await connection.connect();
        clock.tickAsync(5000);
        await connection.waitSynchronized({ timeoutInSeconds: 10 });
        const response = connection.terminalState.accountInformation;
        _sinon2.default.assert.match(response, accountInformation);
        _sinon2.default.assert.match(calledAccountId, 'accountIdReplica');
        _sinon2.default.assert.match(unsubscribedAccountId, 'accountId');
        (connection.synchronized && connection.terminalState.connected && connection.terminalState.connectedToBroker).should.equal(true);
        allowedAccounts.splice(1, 1);
        fakeServer.deleteStatusTask('accountIdReplica');
        await clock.tickAsync(61000);
        await new _promise2.default(res => setTimeout(res, 50));
        _sinon2.default.assert.match(calledAccountId, 'accountId');
        _sinon2.default.assert.match(unsubscribedAccountId, 'accountId');
        (connection.synchronized && connection.terminalState.connected && connection.terminalState.connectedToBroker).should.equal(true);
        allowedAccounts.splice(1, 1, 'accountIdReplica');
        await fakeServer.emitStatus(server, 'accountIdReplica');
        await clock.tickAsync(5000);
        await new _promise2.default(res => setTimeout(res, 50));
        _sinon2.default.assert.match(calledAccountId, 'accountIdReplica');
        _sinon2.default.assert.match(unsubscribedAccountId, 'accountId');
        (connection.synchronized && connection.terminalState.connected && connection.terminalState.connectedToBroker).should.equal(true);
      }).timeout(10000);

      it('should change replica if region priority changed', async () => {
        let calledAccountId;
        let unsubscribedAccountId;

        const account = await api.metatraderAccountApi.getAccount('accountId');
        fakeServer.io.removeAllListeners('connect');
        fakeServer.io.on('connect', socket => {
          server = socket;
          socket.emit('response', { type: 'response' });
          socket.removeAllListeners('request');
          // eslint-disable-next-line complexity
          socket.on('request', async data => {
            if (data.instanceIndex === 1) {
              await fakeServer.respond(socket, data);
              return;
            }
            if (data.type === 'subscribe') {
              await new _promise2.default(res => setTimeout(res, 200));
              await fakeServer.respond(socket, data);
              fakeServer.statusTasks[data.accountId] = setInterval(() => fakeServer.emitStatus(socket, data.accountId), 100);
              await new _promise2.default(res => setTimeout(res, 50));
              await fakeServer.authenticate(socket, data);
            } else if (data.type === 'synchronize') {
              calledAccountId = data.accountId;
              await fakeServer.respond(socket, data);
              await fakeServer.syncAccount(socket, data);
            } else if (data.type === 'waitSynchronized' || data.type === 'refreshMarketDataSubscriptions') {
              calledAccountId = data.accountId;
              await fakeServer.respond(socket, data);
            } else if (data.type === 'getAccountInformation') {
              await fakeServer.respondAccountInformation(socket, data);
            } else if (data.type === 'unsubscribe') {
              unsubscribedAccountId = data.accountId;
              fakeServer.deleteStatusTask(data.accountId);
              await fakeServer.respond(socket, data);
            }
          });
        });

        connection = account.getStreamingConnection();
        sandbox.stub(connection._websocketClient._latencyService, '_refreshLatency').resolves();
        connection._websocketClient._latencyService._latencyCache = { 'vint-hill': 500, 'new-york': 100 };
        await connection.connect();
        clock.tickAsync(5000);
        await connection.waitSynchronized({ timeoutInSeconds: 10 });
        const response = connection.terminalState.accountInformation;
        _sinon2.default.assert.match(response, accountInformation);
        _sinon2.default.assert.match(calledAccountId, 'accountIdReplica');
        _sinon2.default.assert.match(unsubscribedAccountId, 'accountId');
        (connection.synchronized && connection.terminalState.connected && connection.terminalState.connectedToBroker).should.equal(true);
        connection._websocketClient._latencyService._latencyCache = { 'vint-hill': 100, 'new-york': 500 };
        await clock.tickAsync(15 * 60 * 1000 + 5000);
        _sinon2.default.assert.match(calledAccountId, 'accountId');
        _sinon2.default.assert.match(unsubscribedAccountId, 'accountIdReplica');
        (connection.synchronized && connection.terminalState.connected && connection.terminalState.connectedToBroker).should.equal(true);
      }).timeout(20000);
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL2xpYi9pbnRlZ3JhdGlvbi10ZXN0cy9zeW5jU3RhYmlsaXR5LnNwZWMuZXM2Il0sIm5hbWVzIjpbImFjY291bnRJbmZvcm1hdGlvbiIsImJyb2tlciIsImN1cnJlbmN5Iiwic2VydmVyIiwiYmFsYW5jZSIsImVxdWl0eSIsIm1hcmdpbiIsImZyZWVNYXJnaW4iLCJsZXZlcmFnZSIsIm1hcmdpbkxldmVsIiwiZXJyb3JzIiwiRGF0ZSIsIm5vdyIsInNlcnZlcjEiLCJGYWtlU2VydmVyIiwiY29uc3RydWN0b3IiLCJpbyIsInNvY2tldCIsInN0YXR1c1Rhc2tzIiwiYXV0aGVudGljYXRlIiwiZGF0YSIsImhvc3QiLCJlbWl0IiwidHlwZSIsImFjY291bnRJZCIsImluc3RhbmNlSW5kZXgiLCJyZXBsaWNhcyIsImRlbGV0ZVN0YXR1c1Rhc2siLCJjbGVhckludGVydmFsIiwiZW1pdFN0YXR1cyIsInBhY2tldCIsImNvbm5lY3RlZCIsImF1dGhlbnRpY2F0ZWQiLCJoZWFsdGhTdGF0dXMiLCJycGNBcGlIZWFsdGh5IiwiY29ubmVjdGlvbklkIiwicmVzcG9uZEFjY291bnRJbmZvcm1hdGlvbiIsInJlcXVlc3RJZCIsInN5bmNBY2NvdW50Iiwic3luY2hyb25pemF0aW9uSWQiLCJyZXMiLCJzZXRUaW1lb3V0Iiwic3BlY2lmaWNhdGlvbnMiLCJwb3NpdGlvbnMiLCJvcmRlcnMiLCJyZXNwb25kIiwiZW1pdEVycm9yIiwiZXJyb3JJbmRleCIsInJldHJ5QWZ0ZXJTZWNvbmRzIiwiZXJyb3IiLCJtZXRhZGF0YSIsInJlY29tbWVuZGVkUmV0cnlUaW1lIiwiZW5hYmxlU3luYyIsInJlbW92ZUFsbExpc3RlbmVycyIsIm9uIiwic2V0SW50ZXJ2YWwiLCJkaXNhYmxlU3luYyIsInN0YXJ0IiwicG9ydCIsIlNlcnZlciIsInBhdGgiLCJwaW5nVGltZW91dCIsInNlcXVlbnRpYWxQcm9jZXNzaW5nIiwiZm9yRWFjaCIsInBhcmFtIiwiZGVzY3JpYmUiLCJmYWtlU2VydmVyIiwiY29ubmVjdGlvbiIsImNsb2NrIiwic2FuZGJveCIsImFwaSIsImJlZm9yZSIsInNpbm9uIiwiY3JlYXRlU2FuZGJveCIsIm1vY2tNYXRoIiwiZ2xvYmFsIiwiTWF0aCIsInJhbmRvbSIsImJlZm9yZUVhY2giLCJ1c2VGYWtlVGltZXJzIiwic2hvdWxkQWR2YW5jZVRpbWUiLCJnZXRUaW1lIiwiTWV0YUFwaSIsImFwcGxpY2F0aW9uIiwiZG9tYWluIiwidXNlU2hhcmVkQ2xpZW50QXBpIiwicmVxdWVzdFRpbWVvdXQiLCJyZXRyeU9wdHMiLCJyZXRyaWVzIiwibWluRGVsYXlJblNlY29uZHMiLCJtYXhEZWxheUluU2Vjb25kcyIsInN1YnNjcmliZUNvb2xkb3duSW5TZWNvbmRzIiwiZXZlbnRQcm9jZXNzaW5nIiwibWV0YXRyYWRlckFjY291bnRBcGkiLCJfbWV0YXRyYWRlckFjY291bnRDbGllbnQiLCJnZXRBY2NvdW50IiwiX2lkIiwibG9naW4iLCJuYW1lIiwicmVnaW9uIiwicmVsaWFiaWxpdHkiLCJwcm92aXNpb25pbmdQcm9maWxlSWQiLCJtYWdpYyIsImNvbm5lY3Rpb25TdGF0dXMiLCJzdGF0ZSIsImFjY2Vzc1Rva2VuIiwiX21ldGFBcGlXZWJzb2NrZXRDbGllbnQiLCJ1cmwiLCJzdHViIiwiX2Nvbm5lY3Rpb25SZWdpc3RyeSIsIl9jbGllbnRBcGlDbGllbnQiLCJyZXNvbHZlcyIsImFmdGVyRWFjaCIsInRhc2siLCJfd2Vic29ja2V0Q2xpZW50IiwiX3N1YnNjcmlwdGlvbk1hbmFnZXIiLCJjYW5jZWxBY2NvdW50IiwiY2xvc2UiLCJyZXNvbHZlIiwicHJvbWlzZSIsInJlc3RvcmUiLCJpdCIsImFjY291bnQiLCJnZXRTdHJlYW1pbmdDb25uZWN0aW9uIiwiY29ubmVjdCIsInRpY2tBc3luYyIsIndhaXRTeW5jaHJvbml6ZWQiLCJ0aW1lb3V0SW5TZWNvbmRzIiwicmVzcG9uc2UiLCJ0ZXJtaW5hbFN0YXRlIiwiYXNzZXJ0IiwibWF0Y2giLCJzeW5jaHJvbml6ZWQiLCJjb25uZWN0ZWRUb0Jyb2tlciIsInNob3VsZCIsImVxdWFsIiwidGltZW91dCIsImRpc2Nvbm5lY3QiLCJpIiwiYWNjb3VudDIiLCJjb25uZWN0aW9uMiIsImFjY291bnQzIiwiY29ubmVjdGlvbjMiLCJzdWJzY3JpYmVkQWNjb3VudHMiLCJsZW5ndGgiLCJFcnJvciIsImVyciIsInJlcXVlc3RUaW1lc3RhbXAiLCJzaWRCeUFjY291bnRzIiwic2lkIiwiaWQiLCJmaWx0ZXIiLCJhY2NvdW50U0lEIiwiYWNjb3VudElkMiIsIm5vdCIsImFjY291bnRJZDMiLCJhY2NvdW50NCIsImNvbm5lY3Rpb240IiwiYWNjb3VudElkNCIsInNpZHMiLCJwdXNoIiwiYWNjb3VudDUiLCJjb25uZWN0aW9uNSIsImFjY291bnRJZDUiLCJzdWJzY3JpYmVDYWxsZWQiLCJzdGF0dXNUYXNrIiwic3luY2hyb25pemVDb3VudGVyIiwibWVzc2FnZSIsInN1YnNjcmliZUNvdW50ZXIiLCJzZXJ2ZXJzIiwiYmUiLCJhYm92ZSIsInByZXZpb3VzU3Vic2NyaWJlQ291bnRlciIsInByaWNlcyIsInRpbWUiLCJzeW1ib2wiLCJiaWQiLCJhc2siLCJwcmljZSIsImFjY291bnRSZXBsaWNhcyIsImNhbGxlZEFjY291bnRJZCIsIl9sYXRlbmN5U2VydmljZSIsIl9sYXRlbmN5Q2FjaGUiLCJ1bnN1YnNjcmliZWRBY2NvdW50SWQiLCJhbGxvd2VkQWNjb3VudHMiLCJpbmNsdWRlcyIsInNwbGljZSJdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUVBOzs7O0FBQ0E7Ozs7QUFDQTs7OztBQUNBOzs7O0FBQ0E7Ozs7OztBQUVBLE1BQU1BLHFCQUFxQjtBQUN6QkMsVUFBUSxzQkFEaUI7QUFFekJDLFlBQVUsS0FGZTtBQUd6QkMsVUFBUSxrQkFIaUI7QUFJekJDLFdBQVMsTUFKZ0I7QUFLekJDLFVBQVEsaUJBTGlCO0FBTXpCQyxVQUFRLEtBTmlCO0FBT3pCQyxjQUFZLE9BUGE7QUFRekJDLFlBQVUsR0FSZTtBQVN6QkMs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QVksR0FBL0IsRUFBNUQ7QUFDQSxjQUFNbEgsTUFBTXlELFNBQU4sQ0FBZ0IsS0FBSyxFQUFMLEdBQVUsSUFBVixHQUFpQixJQUFqQyxDQUFOO0FBQ0FyRCx3QkFBTTBELE1BQU4sQ0FBYUMsS0FBYixDQUFtQmlELGVBQW5CLEVBQW9DLFdBQXBDO0FBQ0E1Ryx3QkFBTTBELE1BQU4sQ0FBYUMsS0FBYixDQUFtQm9ELHFCQUFuQixFQUEwQyxrQkFBMUM7QUFDQSxTQUFDcEgsV0FBV2lFLFlBQVgsSUFBMkJqRSxXQUFXOEQsYUFBWCxDQUF5QmxHLFNBQXBELElBQ0VvQyxXQUFXOEQsYUFBWCxDQUF5QkksaUJBRDVCLEVBQytDQyxNQUQvQyxDQUNzREMsS0FEdEQsQ0FDNEQsSUFENUQ7QUFFRCxPQTFERCxFQTBER0MsT0ExREgsQ0EwRFcsS0ExRFg7QUE0REQsS0F0T0Q7QUF3T0QsR0E5dUNEO0FBK3VDRCxDQWh2Q0QiLCJmaWxlIjoic3luY1N0YWJpbGl0eS5zcGVjLmpzIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgc2hvdWxkIGZyb20gJ3Nob3VsZCc7XG5pbXBvcnQgc2lub24gZnJvbSAnc2lub24nO1xuaW1wb3J0IFNlcnZlciBmcm9tICdzb2NrZXQuaW8nO1xuaW1wb3J0IE1ldGFBcGkgZnJvbSAnLi4vbWV0YUFwaS9tZXRhQXBpJztcbmltcG9ydCBTeW5jaHJvbml6YXRpb25MaXN0ZW5lciBmcm9tICcuLi9jbGllbnRzL21ldGFBcGkvc3luY2hyb25pemF0aW9uTGlzdGVuZXInO1xuXG5jb25zdCBhY2NvdW50SW5mb3JtYXRpb24gPSB7XG4gIGJyb2tlcjogJ1RydWUgRUNOIFRyYWRpbmcgTHRkJyxcbiAgY3VycmVuY3k6ICdVU0QnLFxuICBzZXJ2ZXI6ICdJQ01hcmtldHNTQy1EZW1vJyxcbiAgYmFsYW5jZTogNzMxOS45LFxuICBlcXVpdHk6IDczMDYuNjQ5OTEzMjAwMDAxLFxuICBtYXJnaW46IDE4NC4xLFxuICBmcmVlTWFyZ2luOiA3MTIwLjIyLFxuICBsZXZlcmFnZTogMTAwLFxuICBtYXJnaW5MZXZlbDogMzk2Ny41ODI4MzU0MlxufTtcbmNvbnN0IGVycm9ycyA9IFtcbiAge1xuICAgICdpZCc6IDEsXG4gICAgJ2Vycm9yJzogJ1Rvb01hbnlSZXF1ZXN0c0Vycm9yJyxcbiAgICAnbWVzc2FnZSc6ICdPbmUgdXNlciBjYW4gY29ubmVjdCB0byBvbmUgc2VydmVyIG5vIG1vcmUgdGhhbiAzMDAgYWNjb3VudHMuIEN1cnJlbnQgbnVtYmVyIG9mIGNvbm5lY3RlZCAnICtcbiAgICAgICAgICAgICAgICdhY2NvdW50cyAzMDAuIEZvciBtb3JlIGluZm9ybWF0aW9uIHNlZSBodHRwczovL21ldGFhcGkuY2xvdWQvZG9jcy9jbGllbnQvcmF0ZUxpbWl0aW5nLycsXG4gICAgJ21ldGFkYXRhJzoge1xuICAgICAgJ21heEFjY291bnRzUGVyVXNlclBlclNlcnZlcic6IDMwMCxcbiAgICAgICdhY2NvdW50c0NvdW50JzogIDMwMCxcbiAgICAgICdyZWNvbW1lbmRlZFJldHJ5VGltZSc6IG5ldyBEYXRlKERhdGUubm93KCkgKyAyMDAwMCksXG4gICAgICAndHlwZSc6ICdMSU1JVF9BQ0NPVU5UX1NVQlNDUklQVElPTlNfUEVSX1VTRVJfUEVSX1NFUlZFUidcbiAgICB9XG4gIH0sXG4gIHtcbiAgICAnaWQnOiAxLFxuICAgICdlcnJvcic6ICdUb29NYW55UmVxdWVzdHNFcnJvcicsXG4gICAgJ21lc3NhZ2UnOiAnWW91IGhhdmUgdXNlZCBhbGwgeW91ciBhY2NvdW50IHN1YnNjcmlwdGlvbnMgcXVvdGEuIFlvdSBoYXZlIDUwIGFjY291bnQgc3Vic2NyaXB0aW9ucyBhdmFpbGFibGUgJyArXG4gICAgICAgICAgICAgICAnYW5kIGhhdmUgdXNlZCA1MCBzdWJzY3JpcHRpb25zLiBQbGVhc2UgZGVwbG95IG1vcmUgYWNjb3VudHMgdG8gZ2V0IG1vcmUgc3Vic2NyaXB0aW9ucy4gRm9yIG1vcmUgJyArXG4gICAgICAgICAgICAgICAnaW5mb3JtYXRpb24gc2VlIGh0dHBzOi8vbWV0YWFwaS5jbG91ZC9kb2NzL2NsaWVudC9yYXRlTGltaXRpbmcvJyxcbiAgICAnbWV0YWRhdGEnOiB7XG4gICAgICAnbWF4QWNjb3VudHNQZXJVc2VyJzogIDUwLFxuICAgICAgJ2FjY291bnRzQ291bnQnOiA1MCxcbiAgICAgICdyZWNvbW1lbmRlZFJldHJ5VGltZSc6IG5ldyBEYXRlKERhdGUubm93KCkgKyAyMDAwMCksXG4gICAgICAndHlwZSc6ICdMSU1JVF9BQ0NPVU5UX1NVQlNDUklQVElPTlNfUEVSX1VTRVInXG4gICAgfVxuICB9LFxuICB7XG4gICAgJ2lkJzogMSxcbiAgICAnZXJyb3InOiAnVG9vTWFueVJlcXVlc3RzRXJyb3InLFxuICAgICdtZXNzYWdlJzogJ1lvdSBjYW4gbm90IHN1YnNjcmliZSB0byBtb3JlIGFjY291bnRzIG9uIHRoaXMgY29ubmVjdGlvbiBiZWNhdXNlIHNlcnZlciBpcyBvdXQgb2YgY2FwYWNpdHkuICcgK1xuICAgICAgICAgICAgICAgJ1BsZWFzZSBlc3RhYmxpc2ggYSBuZXcgY29ubmVjdGlvbiB3aXRoIGEgZGlmZmVyZW50IGNsaWVudC1pZCBoZWFkZXIgdmFsdWUgdG8gc3dpdGNoIHRvIGEgJyArXG4gICAgICAgICAgICAgICAnZGlmZmVyZW50IHNlcnZlci4gRm9yIG1vcmUgaW5mb3JtYXRpb24gc2VlIGh0dHBzOi8vbWV0YWFwaS5jbG91ZC9kb2NzL2NsaWVudC9yYXRlTGltaXRpbmcvJyxcbiAgICAnbWV0YWRhdGEnOiB7XG4gICAgICAnY2hhbmdlQ2xpZW50SWRIZWFkZXInOiB0cnVlLFxuICAgICAgJ3JlY29tbWVuZGVkUmV0cnlUaW1lJzogbmV3IERhdGUoRGF0ZS5ub3coKSArIDIwMDAwKSxcbiAgICAgICd0eXBlJzogJ0xJTUlUX0FDQ09VTlRfU1VCU0NSSVBUSU9OU19QRVJfU0VSVkVSJ1xuICAgIH1cbiAgfVxuXTtcblxubGV0IHNlcnZlciwgc2VydmVyMTtcblxuY2xhc3MgRmFrZVNlcnZlciB7XG4gIGNvbnN0cnVjdG9yKCl7XG4gICAgdGhpcy5pbztcbiAgICB0aGlzLnNvY2tldDtcbiAgICB0aGlzLnN0YXR1c1Rhc2tzID0ge307XG4gIH1cblxuICBhc3luYyBhdXRoZW50aWNhdGUoc29ja2V0LCBkYXRhLCBob3N0PSdwcy1tcGEtMCcpe1xuICAgIHNvY2tldC5lbWl0KCdzeW5jaHJvbml6YXRpb24nLCB7dHlwZTogJ2F1dGhlbnRpY2F0ZWQnLCBhY2NvdW50SWQ6IGRhdGEuYWNjb3VudElkLFxuICAgICAgaW5zdGFuY2VJbmRleDogMCwgcmVwbGljYXM6IDEsIGhvc3R9KTtcbiAgfVxuXG4gIGRlbGV0ZVN0YXR1c1Rhc2soYWNjb3VudElkKSB7XG4gICAgaWYodGhpcy5zdGF0dXNUYXNrc1thY2NvdW50SWRdKSB7XG4gICAgICBjbGVhckludGVydmFsKHRoaXMuc3RhdHVzVGFza3NbYWNjb3VudElkXSk7XG4gICAgICBkZWxldGUgdGhpcy5zdGF0dXNUYXNrc1thY2NvdW50SWRdO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGVtaXRTdGF0dXMoc29ja2V0LCBhY2NvdW50SWQsIGhvc3Q9J3BzLW1wYS0wJyl7XG4gICAgY29uc3QgcGFja2V0ID0ge2Nvbm5lY3RlZDogdHJ1ZSwgYXV0aGVudGljYXRlZDogdHJ1ZSwgaW5zdGFuY2VJbmRleDogMCwgdHlwZTogJ3N0YXR1cycsXG4gICAgICBoZWFsdGhTdGF0dXM6IHtycGNBcGlIZWFsdGh5OiB0cnVlfSwgcmVwbGljYXM6IDEsIGhvc3QsXG4gICAgICBjb25uZWN0aW9uSWQ6IGFjY291bnRJZCwgYWNjb3VudElkOiBhY2NvdW50SWR9O1xuICAgIHNvY2tldC5lbWl0KCdzeW5jaHJvbml6YXRpb24nLCBwYWNrZXQpO1xuICB9XG5cbiAgYXN5bmMgcmVzcG9uZEFjY291bnRJbmZvcm1hdGlvbihzb2NrZXQsIGRhdGEpe1xuICAgIGF3YWl0IHNvY2tldC5lbWl0KCdyZXNwb25zZScsIHt0eXBlOiAncmVzcG9uc2UnLCBhY2NvdW50SWQ6IGRhdGEuYWNjb3VudElkLCByZXF1ZXN0SWQ6IGRhdGEucmVxdWVzdElkLCBcbiAgICAgIGFjY291bnRJbmZvcm1hdGlvbn0pO1xuICB9XG5cbiAgYXN5bmMgc3luY0FjY291bnQoc29ja2V0LCBkYXRhLCBob3N0PSdwcy1tcGEtMCcpe1xuICAgIHNvY2tldC5lbWl0KCdzeW5jaHJvbml6YXRpb24nLCB7dHlwZTogJ3N5bmNocm9uaXphdGlvblN0YXJ0ZWQnLCBhY2NvdW50SWQ6IGRhdGEuYWNjb3VudElkLCBpbnN0YW5jZUluZGV4OiAwLCBcbiAgICAgIHN5bmNocm9uaXphdGlvbklkOiBkYXRhLnJlcXVlc3RJZCwgaG9zdH0pO1xuICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlcyA9PiBzZXRUaW1lb3V0KHJlcywgNTApKTtcbiAgICBzb2NrZXQuZW1pdCgnc3luY2hyb25pemF0aW9uJywge3R5cGU6ICdhY2NvdW50SW5mb3JtYXRpb24nLCBhY2NvdW50SWQ6IGRhdGEuYWNjb3VudElkLCBhY2NvdW50SW5mb3JtYXRpb24sXG4gICAgICBpbnN0YW5jZUluZGV4OiAwLCBob3N0fSk7XG4gICAgc29ja2V0LmVtaXQoJ3N5bmNocm9uaXphdGlvbicsXG4gICAgICB7dHlwZTogJ3NwZWNpZmljYXRpb25zJywgYWNjb3VudElkOiBkYXRhLmFjY291bnRJZCwgc3BlY2lmaWNhdGlvbnM6IFtdLCBpbnN0YW5jZUluZGV4OiAwLCBob3N0fSk7XG4gICAgc29ja2V0LmVtaXQoJ3N5bmNocm9uaXphdGlvbicsXG4gICAgICB7dHlwZTogJ3Bvc2l0aW9ucycsIGFjY291bnRJZDogZGF0YS5hY2NvdW50SWQsIHN5bmNocm9uaXphdGlvbklkOiBkYXRhLnJlcXVlc3RJZCxcbiAgICAgICAgcG9zaXRpb25zOiBbXSwgaW5zdGFuY2VJbmRleDogMCwgaG9zdH0pO1xuICAgIHNvY2tldC5lbWl0KCdzeW5jaHJvbml6YXRpb24nLFxuICAgICAge3R5cGU6ICdvcmRlcnMnLCBhY2NvdW50SWQ6IGRhdGEuYWNjb3VudElkLCBzeW5jaHJvbml6YXRpb25JZDogZGF0YS5yZXF1ZXN0SWQsXG4gICAgICAgIG9yZGVyczogW10sIGluc3RhbmNlSW5kZXg6IDAsIGhvc3R9KTtcbiAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXMgPT4gc2V0VGltZW91dChyZXMsIDUwKSk7XG4gICAgc29ja2V0LmVtaXQoJ3N5bmNocm9uaXphdGlvbicsIHt0eXBlOiAnb3JkZXJTeW5jaHJvbml6YXRpb25GaW5pc2hlZCcsIGFjY291bnRJZDogZGF0YS5hY2NvdW50SWQsXG4gICAgICBzeW5jaHJvbml6YXRpb25JZDogZGF0YS5yZXF1ZXN0SWQsIGluc3RhbmNlSW5kZXg6IDAsIGhvc3R9KTtcbiAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXMgPT4gc2V0VGltZW91dChyZXMsIDUwKSk7XG4gICAgc29ja2V0LmVtaXQoJ3N5bmNocm9uaXphdGlvbicsIHt0eXBlOiAnZGVhbFN5bmNocm9uaXphdGlvbkZpbmlzaGVkJywgYWNjb3VudElkOiBkYXRhLmFjY291bnRJZCxcbiAgICAgIHN5bmNocm9uaXphdGlvbklkOiBkYXRhLnJlcXVlc3RJZCwgaW5zdGFuY2VJbmRleDogMCwgaG9zdH0pO1xuICB9XG5cbiAgYXN5bmMgcmVzcG9uZChzb2NrZXQsIGRhdGEpe1xuICAgIGF3YWl0IHNvY2tldC5lbWl0KCdyZXNwb25zZScsIHt0eXBlOiAncmVzcG9uc2UnLCBhY2NvdW50SWQ6IGRhdGEuYWNjb3VudElkLCByZXF1ZXN0SWQ6IGRhdGEucmVxdWVzdElkfSk7XG4gIH1cblxuICBhc3luYyBlbWl0RXJyb3Ioc29ja2V0LCBkYXRhLCBlcnJvckluZGV4LCByZXRyeUFmdGVyU2Vjb25kcykge1xuICAgIGNvbnN0IGVycm9yID0gZXJyb3JzW2Vycm9ySW5kZXhdO1xuICAgIGVycm9yLm1ldGFkYXRhLnJlY29tbWVuZGVkUmV0cnlUaW1lID0gbmV3IERhdGUoRGF0ZS5ub3coKSArIHJldHJ5QWZ0ZXJTZWNvbmRzICogMTAwMCk7XG4gICAgZXJyb3IucmVxdWVzdElkID0gZGF0YS5yZXF1ZXN0SWQ7XG4gICAgYXdhaXQgc29ja2V0LmVtaXQoJ3Byb2Nlc3NpbmdFcnJvcicsIGVycm9yKTtcbiAgfVxuXG4gIGVuYWJsZVN5bmMoc29ja2V0KXtcbiAgICBzb2NrZXQucmVtb3ZlQWxsTGlzdGVuZXJzKCdyZXF1ZXN0Jyk7XG4gICAgc29ja2V0Lm9uKCdyZXF1ZXN0JywgYXN5bmMgZGF0YSA9PiB7XG4gICAgICBpZihkYXRhLmluc3RhbmNlSW5kZXggPT09IDEpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5yZXNwb25kKHNvY2tldCwgZGF0YSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZihkYXRhLnR5cGUgPT09ICdzdWJzY3JpYmUnKSB7XG4gICAgICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzID0+IHNldFRpbWVvdXQocmVzLCAyMDApKTsgXG4gICAgICAgICAgYXdhaXQgdGhpcy5yZXNwb25kKHNvY2tldCwgZGF0YSk7XG4gICAgICAgICAgdGhpcy5zdGF0dXNUYXNrc1tkYXRhLmFjY291bnRJZF0gPSBzZXRJbnRlcnZhbCgoKSA9PiB0aGlzLmVtaXRTdGF0dXMoc29ja2V0LCBkYXRhLmFjY291bnRJZCksIDEwMCk7XG4gICAgICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzID0+IHNldFRpbWVvdXQocmVzLCA1MCkpOyBcbiAgICAgICAgICBhd2FpdCB0aGlzLmF1dGhlbnRpY2F0ZShzb2NrZXQsIGRhdGEpO1xuICAgICAgICB9IGVsc2UgaWYgKGRhdGEudHlwZSA9PT0gJ3N5bmNocm9uaXplJykge1xuICAgICAgICAgIGF3YWl0IHRoaXMucmVzcG9uZChzb2NrZXQsIGRhdGEpO1xuICAgICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlcyA9PiBzZXRUaW1lb3V0KHJlcywgNTApKTsgXG4gICAgICAgICAgYXdhaXQgdGhpcy5zeW5jQWNjb3VudChzb2NrZXQsIGRhdGEpO1xuICAgICAgICB9IGVsc2UgaWYgKGRhdGEudHlwZSA9PT0gJ3dhaXRTeW5jaHJvbml6ZWQnIHx8IGRhdGEudHlwZSA9PT0gJ3JlZnJlc2hNYXJrZXREYXRhU3Vic2NyaXB0aW9ucycpIHtcbiAgICAgICAgICBhd2FpdCB0aGlzLnJlc3BvbmQoc29ja2V0LCBkYXRhKTtcbiAgICAgICAgfSBlbHNlIGlmIChkYXRhLnR5cGUgPT09ICdnZXRBY2NvdW50SW5mb3JtYXRpb24nKSB7XG4gICAgICAgICAgYXdhaXQgdGhpcy5yZXNwb25kQWNjb3VudEluZm9ybWF0aW9uKHNvY2tldCwgZGF0YSk7XG4gICAgICAgIH0gZWxzZSBpZiAoZGF0YS50eXBlID09PSAndW5zdWJzY3JpYmUnKSB7XG4gICAgICAgICAgdGhpcy5kZWxldGVTdGF0dXNUYXNrKGRhdGEuYWNjb3VudElkKTtcbiAgICAgICAgICBhd2FpdCB0aGlzLnJlc3BvbmQoc29ja2V0LCBkYXRhKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgZGlzYWJsZVN5bmMoKXtcbiAgICBzZXJ2ZXIucmVtb3ZlQWxsTGlzdGVuZXJzKCdyZXF1ZXN0Jyk7XG4gICAgc2VydmVyLm9uKCdyZXF1ZXN0JywgYXN5bmMgZGF0YSA9PiB7XG4gICAgICBhd2FpdCB0aGlzLnJlc3BvbmQoc2VydmVyLCBkYXRhKTtcbiAgICB9KTtcbiAgICBzZXJ2ZXIxLnJlbW92ZUFsbExpc3RlbmVycygncmVxdWVzdCcpO1xuICAgIHNlcnZlcjEub24oJ3JlcXVlc3QnLCBhc3luYyBkYXRhID0+IHtcbiAgICAgIGF3YWl0IHRoaXMucmVzcG9uZChzZXJ2ZXIxLCBkYXRhKTtcbiAgICB9KTtcbiAgfVxuXG4gIGFzeW5jIHN0YXJ0KHBvcnQgPSA2Nzg1KXtcbiAgICB0aGlzLmlvID0gbmV3IFNlcnZlcihwb3J0LCB7cGF0aDogJy93cycsIHBpbmdUaW1lb3V0OiAxMDAwMDAwfSk7XG4gICAgdGhpcy5pby5vbignY29ubmVjdCcsIHNvY2tldCA9PiB7XG4gICAgICBpZihzZXJ2ZXIpIHtcbiAgICAgICAgc2VydmVyMSA9IHNvY2tldDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNlcnZlciA9IHNvY2tldDtcbiAgICAgIH1cbiAgICAgIHNvY2tldC5lbWl0KCdyZXNwb25zZScsIHt0eXBlOiAncmVzcG9uc2UnfSk7XG4gICAgICB0aGlzLmVuYWJsZVN5bmMoc29ja2V0KTtcbiAgICB9KTtcbiAgfVxuXG59XG5cbmNvbnN0IHNlcXVlbnRpYWxQcm9jZXNzaW5nID0gW3RydWVdO1xuc2VxdWVudGlhbFByb2Nlc3NpbmcuZm9yRWFjaChwYXJhbSA9PiB7XG4gIGRlc2NyaWJlKCdTeW5jaHJvbml6YXRpb24gc3RhYmlsaXR5IHRlc3QnLCAoKSA9PiB7XG5cbiAgICBsZXQgZmFrZVNlcnZlcjtcbiAgICBsZXQgY29ubmVjdGlvbjtcbiAgICBsZXQgY2xvY2s7XG4gICAgbGV0IHNhbmRib3g7XG4gICAgbGV0IGFwaTtcblxuICAgIGJlZm9yZSgoKSA9PiB7XG4gICAgICBzYW5kYm94ID0gc2lub24uY3JlYXRlU2FuZGJveCgpO1xuICAgICAgY29uc3QgbW9ja01hdGggPSBPYmplY3QuY3JlYXRlKGdsb2JhbC5NYXRoKTtcbiAgICAgIG1vY2tNYXRoLnJhbmRvbSA9ICgpID0+IDAuMjtcbiAgICAgIGdsb2JhbC5NYXRoID0gbW9ja01hdGg7XG4gICAgfSk7XG5cbiAgICBiZWZvcmVFYWNoKGFzeW5jICgpID0+IHtcbiAgICAgIGNsb2NrID0gc2lub24udXNlRmFrZVRpbWVycyh7c2hvdWxkQWR2YW5jZVRpbWU6IHRydWUsIG5vdzogbmV3IERhdGUoJzIwMjAtMDQtMDJUMDA6MDA6MDAuMDAwWicpLmdldFRpbWUoKX0pO1xuICAgICAgYXBpID0gbmV3IE1ldGFBcGkoJ3Rva2VuJywge2FwcGxpY2F0aW9uOiAnYXBwbGljYXRpb24nLCBkb21haW46ICdwcm9qZWN0LXN0b2NrLmFnaWxpdW1sYWJzLmNsb3VkJyxcbiAgICAgICAgdXNlU2hhcmVkQ2xpZW50QXBpOiB0cnVlLCByZXF1ZXN0VGltZW91dDogMywgcmV0cnlPcHRzOiB7XG4gICAgICAgICAgcmV0cmllczogMywgbWluRGVsYXlJblNlY29uZHM6IDAuMSwgbWF4RGVsYXlJblNlY29uZHM6IDAuNSwgc3Vic2NyaWJlQ29vbGRvd25JblNlY29uZHM6IDZ9LCBcbiAgICAgICAgZXZlbnRQcm9jZXNzaW5nOiB7IHNlcXVlbnRpYWxQcm9jZXNzaW5nOiBwYXJhbSB9fSk7XG4gICAgICBhcGkubWV0YXRyYWRlckFjY291bnRBcGkuX21ldGF0cmFkZXJBY2NvdW50Q2xpZW50LmdldEFjY291bnQgPSAoYWNjb3VudElkKSA9PiAoe1xuICAgICAgICBfaWQ6ICBhY2NvdW50SWQsXG4gICAgICAgIGxvZ2luOiAnNTAxOTQ5ODgnLFxuICAgICAgICBuYW1lOiAnbXQ1YScsXG4gICAgICAgIHJlZ2lvbjogJ3ZpbnQtaGlsbCcsXG4gICAgICAgIHJlbGlhYmlsaXR5OiAncmVndWxhcicsXG4gICAgICAgIHNlcnZlcjogJ0lDTWFya2V0c1NDLURlbW8nLFxuICAgICAgICBwcm92aXNpb25pbmdQcm9maWxlSWQ6ICdmOWNlMWYxMi1lNzIwLTRiOWEtOTQ3Ny1jMmQ0Y2IyNWYwNzYnLFxuICAgICAgICBtYWdpYzogMTIzNDU2LFxuICAgICAgICBhcHBsaWNhdGlvbjogJ01ldGFBcGknLFxuICAgICAgICBjb25uZWN0aW9uU3RhdHVzOiAnRElTQ09OTkVDVEVEJyxcbiAgICAgICAgc3RhdGU6ICdERVBMT1lFRCcsXG4gICAgICAgIHR5cGU6ICdjbG91ZCcsXG4gICAgICAgIGFjY2Vzc1Rva2VuOiAnMlJVbm9IMWxkR2JuRW5lQ29xUlRnSTRRTzFYT21WemJINUVWb1FzQSdcbiAgICAgIH0pO1xuICAgICAgYXBpLl9tZXRhQXBpV2Vic29ja2V0Q2xpZW50LnVybCA9ICdodHRwOi8vbG9jYWxob3N0OjY3ODUnO1xuICAgICAgc2FuZGJveC5zdHViKGFwaS5fY29ubmVjdGlvblJlZ2lzdHJ5Ll9jbGllbnRBcGlDbGllbnQsICdnZXRIYXNoaW5nSWdub3JlZEZpZWxkTGlzdHMnKS5yZXNvbHZlcyh7XG4gICAgICAgICdnMSc6IHtcbiAgICAgICAgICAnc3BlY2lmaWNhdGlvbic6IFtcbiAgICAgICAgICAgICdkZXNjcmlwdGlvbicsXG4gICAgICAgICAgXSxcbiAgICAgICAgICAncG9zaXRpb24nOiBbXG4gICAgICAgICAgICAndGltZScsXG4gICAgICAgICAgXSxcbiAgICAgICAgICAnb3JkZXInOiBbXG4gICAgICAgICAgICAndGltZScsXG4gICAgICAgICAgXVxuICAgICAgICB9LFxuICAgICAgICAnZzInOiB7XG4gICAgICAgICAgJ3NwZWNpZmljYXRpb24nOiBbXG4gICAgICAgICAgICAncGlwU2l6ZSdcbiAgICAgICAgICBdLFxuICAgICAgICAgICdwb3NpdGlvbic6IFtcbiAgICAgICAgICAgICdjb21tZW50JyxcbiAgICAgICAgICBdLFxuICAgICAgICAgICdvcmRlcic6IFtcbiAgICAgICAgICAgICdjb21tZW50J1xuICAgICAgICAgIF1cbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBmYWtlU2VydmVyID0gbmV3IEZha2VTZXJ2ZXIoKTtcbiAgICAgIGF3YWl0IGZha2VTZXJ2ZXIuc3RhcnQoKTtcbiAgICB9KTtcblxuICAgIGFmdGVyRWFjaChhc3luYyAoKSA9PiB7XG4gICAgICBPYmplY3QudmFsdWVzKGZha2VTZXJ2ZXIuc3RhdHVzVGFza3MpLmZvckVhY2godGFzayA9PiBjbGVhckludGVydmFsKHRhc2spKTtcbiAgICAgIGNvbm5lY3Rpb24uX3dlYnNvY2tldENsaWVudC5fc3Vic2NyaXB0aW9uTWFuYWdlci5jYW5jZWxBY2NvdW50KCdhY2NvdW50SWQnKTtcbiAgICAgIGNvbm5lY3Rpb24uX3dlYnNvY2tldENsaWVudC5jbG9zZSgpO1xuICAgICAgbGV0IHJlc29sdmU7XG4gICAgICBsZXQgcHJvbWlzZSA9IG5ldyBQcm9taXNlKHJlcyA9PiByZXNvbHZlID0gcmVzKTtcbiAgICAgIGZha2VTZXJ2ZXIuaW8uY2xvc2UoKCkgPT4ge1xuICAgICAgICByZXNvbHZlKCk7XG4gICAgICB9KTtcbiAgICAgIGF3YWl0IHByb21pc2U7XG4gICAgICBzYW5kYm94LnJlc3RvcmUoKTtcbiAgICAgIGNsb2NrLnJlc3RvcmUoKTtcbiAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlcyA9PiBzZXRUaW1lb3V0KHJlcywgNTApKTtcbiAgICAgIHNlcnZlciA9IG51bGw7XG4gICAgICBzZXJ2ZXIxID0gbnVsbDtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgc3luY2hyb25pemUgYWNjb3VudCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGFjY291bnQgPSBhd2FpdCBhcGkubWV0YXRyYWRlckFjY291bnRBcGkuZ2V0QWNjb3VudCgnYWNjb3VudElkJyk7XG4gICAgICBjb25uZWN0aW9uID0gYWNjb3VudC5nZXRTdHJlYW1pbmdDb25uZWN0aW9uKCk7XG4gICAgICBhd2FpdCBjb25uZWN0aW9uLmNvbm5lY3QoKTtcbiAgICAgIGNsb2NrLnRpY2tBc3luYyg1MDAwKTsgXG4gICAgICBhd2FpdCBjb25uZWN0aW9uLndhaXRTeW5jaHJvbml6ZWQoe3RpbWVvdXRJblNlY29uZHM6IDEwfSk7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGNvbm5lY3Rpb24udGVybWluYWxTdGF0ZS5hY2NvdW50SW5mb3JtYXRpb247XG4gICAgICBzaW5vbi5hc3NlcnQubWF0Y2gocmVzcG9uc2UsIGFjY291bnRJbmZvcm1hdGlvbik7XG4gICAgICAoY29ubmVjdGlvbi5zeW5jaHJvbml6ZWQgJiYgY29ubmVjdGlvbi50ZXJtaW5hbFN0YXRlLmNvbm5lY3RlZCBcbiAgICAgICYmIGNvbm5lY3Rpb24udGVybWluYWxTdGF0ZS5jb25uZWN0ZWRUb0Jyb2tlcikuc2hvdWxkLmVxdWFsKHRydWUpO1xuICAgIH0pLnRpbWVvdXQoMTAwMDApO1xuXG4gICAgaXQoJ3Nob3VsZCByZWNvbm5lY3Qgb24gc2VydmVyIHNvY2tldCBjcmFzaCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGFjY291bnQgPSBhd2FpdCBhcGkubWV0YXRyYWRlckFjY291bnRBcGkuZ2V0QWNjb3VudCgnYWNjb3VudElkJyk7XG4gICAgICBjb25uZWN0aW9uID0gYWNjb3VudC5nZXRTdHJlYW1pbmdDb25uZWN0aW9uKCk7XG4gICAgICBhd2FpdCBjb25uZWN0aW9uLmNvbm5lY3QoKTtcbiAgICAgIGNsb2NrLnRpY2tBc3luYyg1MDAwKTsgXG4gICAgICBhd2FpdCBjb25uZWN0aW9uLndhaXRTeW5jaHJvbml6ZWQoe3RpbWVvdXRJblNlY29uZHM6IDEwfSk7XG4gICAgICBzZXJ2ZXIuZGlzY29ubmVjdCgpO1xuICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzID0+IHNldFRpbWVvdXQocmVzLCA1MCkpO1xuICAgICAgYXdhaXQgY2xvY2sudGlja0FzeW5jKDEwMDAwKTtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gY29ubmVjdGlvbi50ZXJtaW5hbFN0YXRlLmFjY291bnRJbmZvcm1hdGlvbjtcbiAgICAgIHNpbm9uLmFzc2VydC5tYXRjaChyZXNwb25zZSwgYWNjb3VudEluZm9ybWF0aW9uKTtcbiAgICAgIChjb25uZWN0aW9uLnN5bmNocm9uaXplZCAmJiBjb25uZWN0aW9uLnRlcm1pbmFsU3RhdGUuY29ubmVjdGVkIFxuICAgICAgICAmJiBjb25uZWN0aW9uLnRlcm1pbmFsU3RhdGUuY29ubmVjdGVkVG9Ccm9rZXIpLnNob3VsZC5lcXVhbCh0cnVlKTtcbiAgICB9KS50aW1lb3V0KDEwMDAwKTtcblxuICAgIGl0KCdzaG91bGQgc2V0IHN0YXRlIHRvIGRpc2Nvbm5lY3RlZCBvbiB0aW1lb3V0JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgYWNjb3VudCA9IGF3YWl0IGFwaS5tZXRhdHJhZGVyQWNjb3VudEFwaS5nZXRBY2NvdW50KCdhY2NvdW50SWQnKTtcbiAgICAgIGNvbm5lY3Rpb24gPSBhY2NvdW50LmdldFN0cmVhbWluZ0Nvbm5lY3Rpb24oKTtcbiAgICAgIGF3YWl0IGNvbm5lY3Rpb24uY29ubmVjdCgpO1xuICAgICAgY2xvY2sudGlja0FzeW5jKDUwMDApO1xuICAgICAgYXdhaXQgY29ubmVjdGlvbi53YWl0U3luY2hyb25pemVkKHt0aW1lb3V0SW5TZWNvbmRzOiAxMH0pO1xuICAgICAgZmFrZVNlcnZlci5kZWxldGVTdGF0dXNUYXNrKCdhY2NvdW50SWQnKTtcbiAgICAgIGZha2VTZXJ2ZXIuaW8ub24oJ2Nvbm5lY3QnLCBzb2NrZXQgPT4ge1xuICAgICAgICBzb2NrZXQuZGlzY29ubmVjdCgpO1xuICAgICAgfSk7XG4gICAgICBzZXJ2ZXIuZGlzY29ubmVjdCgpO1xuICAgICAgYXdhaXQgY2xvY2sudGlja0FzeW5jKDYxMDAwKTtcbiAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlcyA9PiBzZXRUaW1lb3V0KHJlcywgNTApKTtcbiAgICAgIGNvbm5lY3Rpb24uc3luY2hyb25pemVkLnNob3VsZC5lcXVhbChmYWxzZSk7XG4gICAgICBjb25uZWN0aW9uLnRlcm1pbmFsU3RhdGUuY29ubmVjdGVkLnNob3VsZC5lcXVhbChmYWxzZSk7XG4gICAgICBjb25uZWN0aW9uLnRlcm1pbmFsU3RhdGUuY29ubmVjdGVkVG9Ccm9rZXIuc2hvdWxkLmVxdWFsKGZhbHNlKTtcbiAgICB9KS50aW1lb3V0KDEwMDAwKTtcblxuICAgIGl0KCdzaG91bGQgcmVzdWJzY3JpYmUgb24gdGltZW91dCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGFjY291bnQgPSBhd2FpdCBhcGkubWV0YXRyYWRlckFjY291bnRBcGkuZ2V0QWNjb3VudCgnYWNjb3VudElkJyk7XG4gICAgICBjb25uZWN0aW9uID0gYWNjb3VudC5nZXRTdHJlYW1pbmdDb25uZWN0aW9uKCk7XG4gICAgICBhd2FpdCBjb25uZWN0aW9uLmNvbm5lY3QoKTtcbiAgICAgIGNsb2NrLnRpY2tBc3luYyg1MDAwKTtcbiAgICAgIGF3YWl0IGNvbm5lY3Rpb24ud2FpdFN5bmNocm9uaXplZCh7dGltZW91dEluU2Vjb25kczogMTB9KTtcbiAgICAgIGZha2VTZXJ2ZXIuZGVsZXRlU3RhdHVzVGFzaygnYWNjb3VudElkJyk7XG4gICAgICBhd2FpdCBjbG9jay50aWNrQXN5bmMoNjEwMDApO1xuICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzID0+IHNldFRpbWVvdXQocmVzLCA1MCkpO1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBjb25uZWN0aW9uLnRlcm1pbmFsU3RhdGUuYWNjb3VudEluZm9ybWF0aW9uO1xuICAgICAgc2lub24uYXNzZXJ0Lm1hdGNoKHJlc3BvbnNlLCBhY2NvdW50SW5mb3JtYXRpb24pO1xuICAgICAgKGNvbm5lY3Rpb24uc3luY2hyb25pemVkICYmIGNvbm5lY3Rpb24udGVybWluYWxTdGF0ZS5jb25uZWN0ZWQgXG4gICAgICAmJiBjb25uZWN0aW9uLnRlcm1pbmFsU3RhdGUuY29ubmVjdGVkVG9Ccm9rZXIpLnNob3VsZC5lcXVhbCh0cnVlKTtcbiAgICB9KS50aW1lb3V0KDEwMDAwKTtcblxuICAgIGl0KCdzaG91bGQgc3luY2hyb25pemUgaWYgc3Vic2NyaWJlIHJlc3BvbnNlIGFycml2ZXMgYWZ0ZXIgc3luY2hyb25pemF0aW9uJywgYXN5bmMgKCkgPT4ge1xuICAgICAgZmFrZVNlcnZlci5pby5yZW1vdmVBbGxMaXN0ZW5lcnMoJ2Nvbm5lY3QnKTtcbiAgICAgIGZha2VTZXJ2ZXIuaW8ub24oJ2Nvbm5lY3QnLCBzb2NrZXQgPT4ge1xuICAgICAgICBzZXJ2ZXIgPSBzb2NrZXQ7XG4gICAgICAgIHNvY2tldC5lbWl0KCdyZXNwb25zZScsIHt0eXBlOiAncmVzcG9uc2UnfSk7XG4gICAgICAgIHNvY2tldC5yZW1vdmVBbGxMaXN0ZW5lcnMoJ3JlcXVlc3QnKTtcbiAgICAgICAgc29ja2V0Lm9uKCdyZXF1ZXN0JywgYXN5bmMgZGF0YSA9PiB7XG4gICAgICAgICAgaWYoZGF0YS5pbnN0YW5jZUluZGV4ID09PSAxKSB7XG4gICAgICAgICAgICBhd2FpdCBmYWtlU2VydmVyLnJlc3BvbmQoc29ja2V0LCBkYXRhKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYoZGF0YS50eXBlID09PSAnc3Vic2NyaWJlJykge1xuICAgICAgICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzID0+IHNldFRpbWVvdXQocmVzLCAyMDApKTsgXG4gICAgICAgICAgICBmYWtlU2VydmVyLnN0YXR1c1Rhc2tzLmFjY291bnRJZCA9IHNldEludGVydmFsKCgpID0+IGZha2VTZXJ2ZXIuZW1pdFN0YXR1cyhzb2NrZXQsIGRhdGEuYWNjb3VudElkKSwgMTAwKTtcbiAgICAgICAgICAgIGF3YWl0IGZha2VTZXJ2ZXIuYXV0aGVudGljYXRlKHNvY2tldCwgZGF0YSk7XG4gICAgICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXMgPT4gc2V0VGltZW91dChyZXMsIDQwMCkpOyBcbiAgICAgICAgICAgIGF3YWl0IGZha2VTZXJ2ZXIucmVzcG9uZChzb2NrZXQsIGRhdGEpO1xuICAgICAgICAgIH0gZWxzZSBpZiAoZGF0YS50eXBlID09PSAnc3luY2hyb25pemUnKSB7XG4gICAgICAgICAgICBhd2FpdCBmYWtlU2VydmVyLnJlc3BvbmQoc29ja2V0LCBkYXRhKTtcbiAgICAgICAgICAgIGF3YWl0IGZha2VTZXJ2ZXIuc3luY0FjY291bnQoc29ja2V0LCBkYXRhKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKGRhdGEudHlwZSA9PT0gJ3dhaXRTeW5jaHJvbml6ZWQnIHx8IGRhdGEudHlwZSA9PT0gJ3JlZnJlc2hNYXJrZXREYXRhU3Vic2NyaXB0aW9ucycpIHtcbiAgICAgICAgICAgIGF3YWl0IGZha2VTZXJ2ZXIucmVzcG9uZChzb2NrZXQsIGRhdGEpO1xuICAgICAgICAgIH0gZWxzZSBpZiAoZGF0YS50eXBlID09PSAnZ2V0QWNjb3VudEluZm9ybWF0aW9uJykge1xuICAgICAgICAgICAgYXdhaXQgZmFrZVNlcnZlci5yZXNwb25kQWNjb3VudEluZm9ybWF0aW9uKHNvY2tldCwgZGF0YSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgICAgY29uc3QgYWNjb3VudCA9IGF3YWl0IGFwaS5tZXRhdHJhZGVyQWNjb3VudEFwaS5nZXRBY2NvdW50KCdhY2NvdW50SWQnKTtcbiAgICAgIGNvbm5lY3Rpb24gPSBhY2NvdW50LmdldFN0cmVhbWluZ0Nvbm5lY3Rpb24oKTtcbiAgICAgIGF3YWl0IGNvbm5lY3Rpb24uY29ubmVjdCgpO1xuICAgICAgY2xvY2sudGlja0FzeW5jKDUwMDApO1xuICAgICAgYXdhaXQgY29ubmVjdGlvbi53YWl0U3luY2hyb25pemVkKHt0aW1lb3V0SW5TZWNvbmRzOiAxMH0pO1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBjb25uZWN0aW9uLnRlcm1pbmFsU3RhdGUuYWNjb3VudEluZm9ybWF0aW9uO1xuICAgICAgc2lub24uYXNzZXJ0Lm1hdGNoKHJlc3BvbnNlLCBhY2NvdW50SW5mb3JtYXRpb24pO1xuICAgICAgKGNvbm5lY3Rpb24uc3luY2hyb25pemVkICYmIGNvbm5lY3Rpb24udGVybWluYWxTdGF0ZS5jb25uZWN0ZWQgXG4gICAgICAmJiBjb25uZWN0aW9uLnRlcm1pbmFsU3RhdGUuY29ubmVjdGVkVG9Ccm9rZXIpLnNob3VsZC5lcXVhbCh0cnVlKTtcbiAgICB9KS50aW1lb3V0KDEwMDAwKTtcblxuICAgIGl0KCdzaG91bGQgd2FpdCB1bnRpbCBhY2NvdW50IGlzIHJlZGVwbG95ZWQgYWZ0ZXIgZGlzY29ubmVjdCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGFjY291bnQgPSBhd2FpdCBhcGkubWV0YXRyYWRlckFjY291bnRBcGkuZ2V0QWNjb3VudCgnYWNjb3VudElkJyk7XG4gICAgICBjb25uZWN0aW9uID0gYWNjb3VudC5nZXRTdHJlYW1pbmdDb25uZWN0aW9uKCk7XG4gICAgICBhd2FpdCBjb25uZWN0aW9uLmNvbm5lY3QoKTtcbiAgICAgIGNsb2NrLnRpY2tBc3luYyg1MDAwKTtcbiAgICAgIGF3YWl0IGNvbm5lY3Rpb24ud2FpdFN5bmNocm9uaXplZCh7dGltZW91dEluU2Vjb25kczogMTB9KTtcbiAgICAgIGZha2VTZXJ2ZXIuZGVsZXRlU3RhdHVzVGFzaygnYWNjb3VudElkJyk7XG4gICAgICBmYWtlU2VydmVyLmRpc2FibGVTeW5jKCk7XG4gICAgICBhd2FpdCBzZXJ2ZXIuZW1pdCgnc3luY2hyb25pemF0aW9uJywge3R5cGU6ICdkaXNjb25uZWN0ZWQnLCBhY2NvdW50SWQ6ICdhY2NvdW50SWQnLFxuICAgICAgICBob3N0OiAncHMtbXBhLTAnLCBpbnN0YW5jZUluZGV4OiAwfSk7XG4gICAgICBhd2FpdCBjbG9jay50aWNrQXN5bmMoMjAwMDApO1xuICAgICAgY29ubmVjdGlvbi5zeW5jaHJvbml6ZWQuc2hvdWxkLmVxdWFsKGZhbHNlKTtcbiAgICAgIGNvbm5lY3Rpb24udGVybWluYWxTdGF0ZS5jb25uZWN0ZWQuc2hvdWxkLmVxdWFsKGZhbHNlKTtcbiAgICAgIGNvbm5lY3Rpb24udGVybWluYWxTdGF0ZS5jb25uZWN0ZWRUb0Jyb2tlci5zaG91bGQuZXF1YWwoZmFsc2UpO1xuICAgICAgYXdhaXQgY2xvY2sudGlja0FzeW5jKDIwMDAwMCk7XG4gICAgICBmYWtlU2VydmVyLmVuYWJsZVN5bmMoc2VydmVyKTtcbiAgICAgIGF3YWl0IGNsb2NrLnRpY2tBc3luYygyMDAwMCk7XG4gICAgICBjb25uZWN0aW9uLnN5bmNocm9uaXplZC5zaG91bGQuZXF1YWwoZmFsc2UpO1xuICAgICAgY29ubmVjdGlvbi50ZXJtaW5hbFN0YXRlLmNvbm5lY3RlZC5zaG91bGQuZXF1YWwoZmFsc2UpO1xuICAgICAgY29ubmVjdGlvbi50ZXJtaW5hbFN0YXRlLmNvbm5lY3RlZFRvQnJva2VyLnNob3VsZC5lcXVhbChmYWxzZSk7XG4gICAgICBhd2FpdCBjbG9jay50aWNrQXN5bmMoMjAwMDAwKTtcbiAgICAgIChjb25uZWN0aW9uLnN5bmNocm9uaXplZCAmJiBjb25uZWN0aW9uLnRlcm1pbmFsU3RhdGUuY29ubmVjdGVkIFxuICAgICAgJiYgY29ubmVjdGlvbi50ZXJtaW5hbFN0YXRlLmNvbm5lY3RlZFRvQnJva2VyKS5zaG91bGQuZXF1YWwodHJ1ZSk7XG4gICAgfSkudGltZW91dCgxMDAwMCk7XG5cbiAgICBpdCgnc2hvdWxkIHJlc3Vic2NyaWJlIGltbWVkaWF0ZWx5IGFmdGVyIGRpc2Nvbm5lY3Qgb24gc3RhdHVzIHBhY2tldCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGFjY291bnQgPSBhd2FpdCBhcGkubWV0YXRyYWRlckFjY291bnRBcGkuZ2V0QWNjb3VudCgnYWNjb3VudElkJyk7XG4gICAgICBjb25uZWN0aW9uID0gYWNjb3VudC5nZXRTdHJlYW1pbmdDb25uZWN0aW9uKCk7XG4gICAgICBhd2FpdCBjb25uZWN0aW9uLmNvbm5lY3QoKTtcbiAgICAgIGNsb2NrLnRpY2tBc3luYyg1MDAwKTtcbiAgICAgIGF3YWl0IGNvbm5lY3Rpb24ud2FpdFN5bmNocm9uaXplZCh7dGltZW91dEluU2Vjb25kczogMTB9KTtcbiAgICAgIGZha2VTZXJ2ZXIuZGVsZXRlU3RhdHVzVGFzaygnYWNjb3VudElkJyk7XG4gICAgICBmYWtlU2VydmVyLmRpc2FibGVTeW5jKCk7XG4gICAgICBhd2FpdCBzZXJ2ZXIuZW1pdCgnc3luY2hyb25pemF0aW9uJywge3R5cGU6ICdkaXNjb25uZWN0ZWQnLCBhY2NvdW50SWQ6ICdhY2NvdW50SWQnLFxuICAgICAgICBob3N0OiAncHMtbXBhLTAnLCBpbnN0YW5jZUluZGV4OiAwfSk7XG4gICAgICBhd2FpdCBjbG9jay50aWNrQXN5bmMoMjAwMDApO1xuICAgICAgY29ubmVjdGlvbi5zeW5jaHJvbml6ZWQuc2hvdWxkLmVxdWFsKGZhbHNlKTtcbiAgICAgIGNvbm5lY3Rpb24udGVybWluYWxTdGF0ZS5jb25uZWN0ZWQuc2hvdWxkLmVxdWFsKGZhbHNlKTtcbiAgICAgIGNvbm5lY3Rpb24udGVybWluYWxTdGF0ZS5jb25uZWN0ZWRUb0Jyb2tlci5zaG91bGQuZXF1YWwoZmFsc2UpO1xuICAgICAgYXdhaXQgY2xvY2sudGlja0FzeW5jKDIwMDAwMCk7XG4gICAgICBmYWtlU2VydmVyLmVuYWJsZVN5bmMoc2VydmVyKTtcbiAgICAgIGF3YWl0IGZha2VTZXJ2ZXIuZW1pdFN0YXR1cyhzZXJ2ZXIsICdhY2NvdW50SWQnKTtcbiAgICAgIGF3YWl0IGNsb2NrLnRpY2tBc3luYygyMDAwMCk7XG4gICAgICAoY29ubmVjdGlvbi5zeW5jaHJvbml6ZWQgJiYgY29ubmVjdGlvbi50ZXJtaW5hbFN0YXRlLmNvbm5lY3RlZCBcbiAgICAgICYmIGNvbm5lY3Rpb24udGVybWluYWxTdGF0ZS5jb25uZWN0ZWRUb0Jyb2tlcikuc2hvdWxkLmVxdWFsKHRydWUpO1xuICAgIH0pLnRpbWVvdXQoMTAwMDApO1xuXG4gICAgaXQoJ3Nob3VsZCByZWNvbm5lY3QgYWZ0ZXIgc2VydmVyIHJlc3RhcnRzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgYWNjb3VudCA9IGF3YWl0IGFwaS5tZXRhdHJhZGVyQWNjb3VudEFwaS5nZXRBY2NvdW50KCdhY2NvdW50SWQnKTtcbiAgICAgIGNvbm5lY3Rpb24gPSBhY2NvdW50LmdldFN0cmVhbWluZ0Nvbm5lY3Rpb24oKTtcbiAgICAgIGF3YWl0IGNvbm5lY3Rpb24uY29ubmVjdCgpO1xuICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzID0+IHNldFRpbWVvdXQocmVzLCA1MCkpO1xuICAgICAgY2xvY2sudGlja0FzeW5jKDUwMDApO1xuICAgICAgYXdhaXQgY29ubmVjdGlvbi53YWl0U3luY2hyb25pemVkKHt0aW1lb3V0SW5TZWNvbmRzOiAxMH0pO1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCA1OyBpKyspIHtcbiAgICAgICAgZmFrZVNlcnZlci5kZWxldGVTdGF0dXNUYXNrKCdhY2NvdW50SWQnKTtcbiAgICAgICAgZmFrZVNlcnZlci5pby5jbG9zZSgpO1xuICAgICAgICBhd2FpdCBjbG9jay50aWNrQXN5bmMoMjAwMDAwKTtcbiAgICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzID0+IHNldFRpbWVvdXQocmVzLCA1MCkpO1xuICAgICAgICBjbG9jay50aWNrQXN5bmMoMjAwMCk7XG4gICAgICAgIGF3YWl0IGZha2VTZXJ2ZXIuc3RhcnQoKTtcbiAgICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzID0+IHNldFRpbWVvdXQocmVzLCA1MCkpO1xuICAgICAgICBhd2FpdCBjbG9jay50aWNrQXN5bmMoMTAwMCk7XG4gICAgICB9XG4gICAgICBhd2FpdCBjbG9jay50aWNrQXN5bmMoMjAwMDApO1xuICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzID0+IHNldFRpbWVvdXQocmVzLCAxMDApKTtcbiAgICAgIGF3YWl0IGNsb2NrLnRpY2tBc3luYygyMDAwMCk7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGNvbm5lY3Rpb24udGVybWluYWxTdGF0ZS5hY2NvdW50SW5mb3JtYXRpb247XG4gICAgICBzaW5vbi5hc3NlcnQubWF0Y2gocmVzcG9uc2UsIGFjY291bnRJbmZvcm1hdGlvbik7XG4gICAgICBjb25uZWN0aW9uLnN5bmNocm9uaXplZC5zaG91bGQuZXF1YWwodHJ1ZSk7XG4gICAgICBjb25uZWN0aW9uLnRlcm1pbmFsU3RhdGUuY29ubmVjdGVkLnNob3VsZC5lcXVhbCh0cnVlKTtcbiAgICAgIGNvbm5lY3Rpb24udGVybWluYWxTdGF0ZS5jb25uZWN0ZWRUb0Jyb2tlci5zaG91bGQuZXF1YWwodHJ1ZSk7XG4gICAgfSkudGltZW91dCgyMDAwMCk7XG5cbiAgICBpdCgnc2hvdWxkIHN5bmNocm9uaXplIGlmIGNvbm5lY3Rpbmcgd2hpbGUgc2VydmVyIGlzIHJlYm9vdGluZycsIGFzeW5jICgpID0+IHtcbiAgICAgIGZha2VTZXJ2ZXIuaW8uY2xvc2UoKTtcbiAgICAgIGF3YWl0IGZha2VTZXJ2ZXIuc3RhcnQoOTAwMCk7XG4gICAgICBjb25zdCBhY2NvdW50ID0gYXdhaXQgYXBpLm1ldGF0cmFkZXJBY2NvdW50QXBpLmdldEFjY291bnQoJ2FjY291bnRJZCcpO1xuICAgICAgY29ubmVjdGlvbiA9IGFjY291bnQuZ2V0U3RyZWFtaW5nQ29ubmVjdGlvbigpO1xuICAgICAgYXdhaXQgY29ubmVjdGlvbi5jb25uZWN0KCk7XG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgZmFrZVNlcnZlci5pby5jbG9zZSgpO1xuICAgICAgICBmYWtlU2VydmVyLnN0YXJ0KCk7XG4gICAgICB9LCAzMDAwKTtcbiAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlcyA9PiBzZXRUaW1lb3V0KHJlcywgNTApKTtcbiAgICAgIGNsb2NrLnRpY2tBc3luYyg3MDAwKTtcbiAgICAgIGF3YWl0IGNvbm5lY3Rpb24ud2FpdFN5bmNocm9uaXplZCh7dGltZW91dEluU2Vjb25kczogMTB9KTtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gY29ubmVjdGlvbi50ZXJtaW5hbFN0YXRlLmFjY291bnRJbmZvcm1hdGlvbjtcbiAgICAgIHNpbm9uLmFzc2VydC5tYXRjaChyZXNwb25zZSwgYWNjb3VudEluZm9ybWF0aW9uKTtcbiAgICAgIChjb25uZWN0aW9uLnN5bmNocm9uaXplZCAmJiBjb25uZWN0aW9uLnRlcm1pbmFsU3RhdGUuY29ubmVjdGVkIFxuICAgICAgJiYgY29ubmVjdGlvbi50ZXJtaW5hbFN0YXRlLmNvbm5lY3RlZFRvQnJva2VyKS5zaG91bGQuZXF1YWwodHJ1ZSk7XG4gICAgfSkudGltZW91dCgxMDAwMCk7XG5cbiAgICBpdCgnc2hvdWxkIHJlc3Vic2NyaWJlIG90aGVyIGFjY291bnRzIGFmdGVyIG9uZSBvZiBjb25uZWN0aW9ucyBpcyBjbG9zZWQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBhY2NvdW50ID0gYXdhaXQgYXBpLm1ldGF0cmFkZXJBY2NvdW50QXBpLmdldEFjY291bnQoJ2FjY291bnRJZCcpO1xuICAgICAgY29ubmVjdGlvbiA9IGFjY291bnQuZ2V0U3RyZWFtaW5nQ29ubmVjdGlvbigpO1xuICAgICAgYXdhaXQgY29ubmVjdGlvbi5jb25uZWN0KCk7XG4gICAgICBjbG9jay50aWNrQXN5bmMoNTAwMCk7XG4gICAgICBhd2FpdCBjb25uZWN0aW9uLndhaXRTeW5jaHJvbml6ZWQoe3RpbWVvdXRJblNlY29uZHM6IDEwfSk7XG4gICAgICBjb25zdCBhY2NvdW50MiA9IGF3YWl0IGFwaS5tZXRhdHJhZGVyQWNjb3VudEFwaS5nZXRBY2NvdW50KCdhY2NvdW50SWQyJyk7XG4gICAgICBjb25zdCBjb25uZWN0aW9uMiA9IGFjY291bnQyLmdldFN0cmVhbWluZ0Nvbm5lY3Rpb24oKTtcbiAgICAgIGF3YWl0IGNvbm5lY3Rpb24yLmNvbm5lY3QoKTtcbiAgICAgIGNsb2NrLnRpY2tBc3luYyg1MDAwKTtcbiAgICAgIGF3YWl0IGNvbm5lY3Rpb24yLndhaXRTeW5jaHJvbml6ZWQoe3RpbWVvdXRJblNlY29uZHM6IDEwfSk7XG4gICAgICBjb25zdCBhY2NvdW50MyA9IGF3YWl0IGFwaS5tZXRhdHJhZGVyQWNjb3VudEFwaS5nZXRBY2NvdW50KCdhY2NvdW50SWQzJyk7XG4gICAgICBjb25zdCBjb25uZWN0aW9uMyA9IGFjY291bnQzLmdldFN0cmVhbWluZ0Nvbm5lY3Rpb24oKTtcbiAgICAgIGF3YWl0IGNvbm5lY3Rpb24zLmNvbm5lY3QoKTtcbiAgICAgIGNsb2NrLnRpY2tBc3luYygxMDAwKTtcbiAgICAgIGF3YWl0IGNvbm5lY3Rpb24zLndhaXRTeW5jaHJvbml6ZWQoe3RpbWVvdXRJblNlY29uZHM6IDEwfSk7XG4gICAgICBhd2FpdCBjb25uZWN0aW9uLmNsb3NlKCk7XG4gICAgICBmYWtlU2VydmVyLmRlbGV0ZVN0YXR1c1Rhc2soJ2FjY291bnRJZDInKTtcbiAgICAgIGZha2VTZXJ2ZXIuZGVsZXRlU3RhdHVzVGFzaygnYWNjb3VudElkMycpO1xuICAgICAgZmFrZVNlcnZlci5kaXNhYmxlU3luYygpO1xuICAgICAgc2VydmVyLmRpc2Nvbm5lY3QoKTtcbiAgICAgIGF3YWl0IGNsb2NrLnRpY2tBc3luYygyMDAwKTtcbiAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlcyA9PiBzZXRUaW1lb3V0KHJlcywgNTApKTsgXG4gICAgICBmYWtlU2VydmVyLmVuYWJsZVN5bmMoc2VydmVyKTtcbiAgICAgIHNlcnZlci5kaXNjb25uZWN0KCk7XG4gICAgICBhd2FpdCBjbG9jay50aWNrQXN5bmMoODAwMCk7XG4gICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXMgPT4gc2V0VGltZW91dChyZXMsIDUwKSk7IFxuICAgICAgY29ubmVjdGlvbi5zeW5jaHJvbml6ZWQuc2hvdWxkLmVxdWFsKGZhbHNlKTtcbiAgICAgIGNvbm5lY3Rpb24yLnN5bmNocm9uaXplZC5zaG91bGQuZXF1YWwodHJ1ZSk7XG4gICAgICBjb25uZWN0aW9uMi50ZXJtaW5hbFN0YXRlLmNvbm5lY3RlZC5zaG91bGQuZXF1YWwodHJ1ZSk7XG4gICAgICBjb25uZWN0aW9uMi50ZXJtaW5hbFN0YXRlLmNvbm5lY3RlZFRvQnJva2VyLnNob3VsZC5lcXVhbCh0cnVlKTtcbiAgICAgIGNvbm5lY3Rpb24zLnN5bmNocm9uaXplZC5zaG91bGQuZXF1YWwodHJ1ZSk7XG4gICAgICBjb25uZWN0aW9uMy50ZXJtaW5hbFN0YXRlLmNvbm5lY3RlZC5zaG91bGQuZXF1YWwodHJ1ZSk7XG4gICAgICBjb25uZWN0aW9uMy50ZXJtaW5hbFN0YXRlLmNvbm5lY3RlZFRvQnJva2VyLnNob3VsZC5lcXVhbCh0cnVlKTtcbiAgICB9KS50aW1lb3V0KDEwMDAwKTtcblxuICAgIGl0KCdzaG91bGQgbGltaXQgc3Vic2NyaXB0aW9ucyBkdXJpbmcgcGVyIHVzZXIgNDI5IGVycm9yJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3Qgc3Vic2NyaWJlZEFjY291bnRzID0ge307XG4gICAgICBmYWtlU2VydmVyLmlvLnJlbW92ZUFsbExpc3RlbmVycygnY29ubmVjdCcpO1xuICAgICAgZmFrZVNlcnZlci5pby5vbignY29ubmVjdCcsIHNvY2tldCA9PiB7XG4gICAgICAgIHNlcnZlciA9IHNvY2tldDtcbiAgICAgICAgc29ja2V0LmVtaXQoJ3Jlc3BvbnNlJywge3R5cGU6ICdyZXNwb25zZSd9KTtcbiAgICAgICAgc29ja2V0LnJlbW92ZUFsbExpc3RlbmVycygncmVxdWVzdCcpO1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgY29tcGxleGl0eVxuICAgICAgICBzb2NrZXQub24oJ3JlcXVlc3QnLCBhc3luYyBkYXRhID0+IHtcbiAgICAgICAgICBpZihkYXRhLmluc3RhbmNlSW5kZXggPT09IDEpIHtcbiAgICAgICAgICAgIGF3YWl0IGZha2VTZXJ2ZXIucmVzcG9uZChzb2NrZXQsIGRhdGEpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZihkYXRhLnR5cGUgPT09ICdzdWJzY3JpYmUnKSB7XG4gICAgICAgICAgICBpZiAoT2JqZWN0LmtleXMoc3Vic2NyaWJlZEFjY291bnRzKS5sZW5ndGggPCAyKSB7XG4gICAgICAgICAgICAgIHN1YnNjcmliZWRBY2NvdW50c1tkYXRhLmFjY291bnRJZF0gPSB0cnVlO1xuICAgICAgICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXMgPT4gc2V0VGltZW91dChyZXMsIDIwMCkpOyBcbiAgICAgICAgICAgICAgYXdhaXQgZmFrZVNlcnZlci5yZXNwb25kKHNvY2tldCwgZGF0YSk7XG4gICAgICAgICAgICAgIGZha2VTZXJ2ZXIuc3RhdHVzVGFza3MuYWNjb3VudElkID0gc2V0SW50ZXJ2YWwoKCkgPT4gZmFrZVNlcnZlci5lbWl0U3RhdHVzKHNvY2tldCwgZGF0YS5hY2NvdW50SWQpLCAxMDApO1xuICAgICAgICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXMgPT4gc2V0VGltZW91dChyZXMsIDUwKSk7IFxuICAgICAgICAgICAgICBhd2FpdCBmYWtlU2VydmVyLmF1dGhlbnRpY2F0ZShzb2NrZXQsIGRhdGEpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgYXdhaXQgZmFrZVNlcnZlci5lbWl0RXJyb3Ioc29ja2V0LCBkYXRhLCAxLCAyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2UgaWYgKGRhdGEudHlwZSA9PT0gJ3N5bmNocm9uaXplJykge1xuICAgICAgICAgICAgYXdhaXQgZmFrZVNlcnZlci5yZXNwb25kKHNvY2tldCwgZGF0YSk7XG4gICAgICAgICAgICBhd2FpdCBmYWtlU2VydmVyLnN5bmNBY2NvdW50KHNvY2tldCwgZGF0YSk7XG4gICAgICAgICAgfSBlbHNlIGlmIChkYXRhLnR5cGUgPT09ICd3YWl0U3luY2hyb25pemVkJyB8fCBkYXRhLnR5cGUgPT09ICdyZWZyZXNoTWFya2V0RGF0YVN1YnNjcmlwdGlvbnMnKSB7XG4gICAgICAgICAgICBhd2FpdCBmYWtlU2VydmVyLnJlc3BvbmQoc29ja2V0LCBkYXRhKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKGRhdGEudHlwZSA9PT0gJ2dldEFjY291bnRJbmZvcm1hdGlvbicpIHtcbiAgICAgICAgICAgIGF3YWl0IGZha2VTZXJ2ZXIucmVzcG9uZEFjY291bnRJbmZvcm1hdGlvbihzb2NrZXQsIGRhdGEpO1xuICAgICAgICAgIH0gZWxzZSBpZiAoZGF0YS50eXBlID09PSAndW5zdWJzY3JpYmUnKSB7XG4gICAgICAgICAgICBkZWxldGUgc3Vic2NyaWJlZEFjY291bnRzW2RhdGEuYWNjb3VudElkXTtcbiAgICAgICAgICAgIGF3YWl0IGZha2VTZXJ2ZXIucmVzcG9uZChzb2NrZXQsIGRhdGEpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICAgIGNvbnN0IGFjY291bnQgPSBhd2FpdCBhcGkubWV0YXRyYWRlckFjY291bnRBcGkuZ2V0QWNjb3VudCgnYWNjb3VudElkJyk7XG4gICAgICBjb25uZWN0aW9uID0gYWNjb3VudC5nZXRTdHJlYW1pbmdDb25uZWN0aW9uKCk7XG4gICAgICBhd2FpdCBjb25uZWN0aW9uLmNvbm5lY3QoKTtcbiAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlcyA9PiBzZXRUaW1lb3V0KHJlcywgNTApKTsgXG4gICAgICBjbG9jay50aWNrQXN5bmMoNTAwMCk7XG4gICAgICBhd2FpdCBjb25uZWN0aW9uLndhaXRTeW5jaHJvbml6ZWQoe3RpbWVvdXRJblNlY29uZHM6IDV9KTtcbiAgICAgIGNvbnN0IGFjY291bnQyID0gYXdhaXQgYXBpLm1ldGF0cmFkZXJBY2NvdW50QXBpLmdldEFjY291bnQoJ2FjY291bnRJZDInKTtcbiAgICAgIGNvbnN0IGNvbm5lY3Rpb24yID0gYWNjb3VudDIuZ2V0U3RyZWFtaW5nQ29ubmVjdGlvbigpO1xuICAgICAgYXdhaXQgY29ubmVjdGlvbjIuY29ubmVjdCgpO1xuICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzID0+IHNldFRpbWVvdXQocmVzLCA1MCkpOyBcbiAgICAgIGNsb2NrLnRpY2tBc3luYyg1MDAwKTtcbiAgICAgIGF3YWl0IGNvbm5lY3Rpb24yLndhaXRTeW5jaHJvbml6ZWQoe3RpbWVvdXRJblNlY29uZHM6IDV9KTtcbiAgICAgIGNvbnN0IGFjY291bnQzID0gYXdhaXQgYXBpLm1ldGF0cmFkZXJBY2NvdW50QXBpLmdldEFjY291bnQoJ2FjY291bnRJZDMnKTtcbiAgICAgIGNvbnN0IGNvbm5lY3Rpb24zID0gYWNjb3VudDMuZ2V0U3RyZWFtaW5nQ29ubmVjdGlvbigpO1xuICAgICAgYXdhaXQgY29ubmVjdGlvbjMuY29ubmVjdCgpO1xuICAgICAgdHJ5IHtcbiAgICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzID0+IHNldFRpbWVvdXQocmVzLCA1MCkpOyBcbiAgICAgICAgY2xvY2sudGlja0FzeW5jKDUwMDApO1xuICAgICAgICBhd2FpdCBjb25uZWN0aW9uMy53YWl0U3luY2hyb25pemVkKHt0aW1lb3V0SW5TZWNvbmRzOiA1fSk7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignVGltZW91dEVycm9yIGV4cGVjdGVkJyk7XG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgZXJyLm5hbWUuc2hvdWxkLmVxdWFsKCdUaW1lb3V0RXJyb3InKTtcbiAgICAgIH1cbiAgICAgIGF3YWl0IGNvbm5lY3Rpb24yLmNsb3NlKCk7XG4gICAgICBhd2FpdCBjbG9jay50aWNrQXN5bmMoMjAwMCk7XG4gICAgICBzaW5vbi5hc3NlcnQubWF0Y2goY29ubmVjdGlvbjMuc3luY2hyb25pemVkLCB0cnVlKTtcbiAgICB9KS50aW1lb3V0KDEwMDAwKTtcblxuICAgIGl0KCdzaG91bGQgd2FpdCBmb3IgcmV0cnkgdGltZSBhZnRlciBwZXIgdXNlciA0MjkgZXJyb3InLCBhc3luYyAoKSA9PiB7XG4gICAgICBsZXQgcmVxdWVzdFRpbWVzdGFtcCA9IDA7XG4gICAgICBjb25zdCBzdWJzY3JpYmVkQWNjb3VudHMgPSB7fTtcblxuICAgICAgZmFrZVNlcnZlci5pby5yZW1vdmVBbGxMaXN0ZW5lcnMoJ2Nvbm5lY3QnKTtcbiAgICAgIGZha2VTZXJ2ZXIuaW8ub24oJ2Nvbm5lY3QnLCBzb2NrZXQgPT4ge1xuICAgICAgICBzZXJ2ZXIgPSBzb2NrZXQ7XG4gICAgICAgIHNvY2tldC5lbWl0KCdyZXNwb25zZScsIHt0eXBlOiAncmVzcG9uc2UnfSk7XG4gICAgICAgIHNvY2tldC5yZW1vdmVBbGxMaXN0ZW5lcnMoJ3JlcXVlc3QnKTtcbiAgICAgICAgLy9lc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgY29tcGxleGl0eVxuICAgICAgICBzb2NrZXQub24oJ3JlcXVlc3QnLCBhc3luYyBkYXRhID0+IHtcbiAgICAgICAgICBpZihkYXRhLmluc3RhbmNlSW5kZXggPT09IDEpIHtcbiAgICAgICAgICAgIGF3YWl0IGZha2VTZXJ2ZXIucmVzcG9uZChzb2NrZXQsIGRhdGEpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZihkYXRhLnR5cGUgPT09ICdzdWJzY3JpYmUnKSB7XG4gICAgICAgICAgICBpZiAoT2JqZWN0LmtleXMoc3Vic2NyaWJlZEFjY291bnRzKS5sZW5ndGggPCAyIHx8IFxuICAgICAgICAgICAgKHJlcXVlc3RUaW1lc3RhbXAgIT09IDAgJiYgRGF0ZS5ub3coKSAtIDIgKiAxMDAwID4gcmVxdWVzdFRpbWVzdGFtcCkpIHtcbiAgICAgICAgICAgICAgc3Vic2NyaWJlZEFjY291bnRzW2RhdGEuYWNjb3VudElkXSA9IHRydWU7XG4gICAgICAgICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlcyA9PiBzZXRUaW1lb3V0KHJlcywgMjAwKSk7IFxuICAgICAgICAgICAgICBhd2FpdCBmYWtlU2VydmVyLnJlc3BvbmQoc29ja2V0LCBkYXRhKTtcbiAgICAgICAgICAgICAgZmFrZVNlcnZlci5zdGF0dXNUYXNrcy5hY2NvdW50SWQgPSBzZXRJbnRlcnZhbCgoKSA9PiBmYWtlU2VydmVyLmVtaXRTdGF0dXMoc29ja2V0LCBkYXRhLmFjY291bnRJZCksIDEwMCk7XG4gICAgICAgICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlcyA9PiBzZXRUaW1lb3V0KHJlcywgNTApKTsgXG4gICAgICAgICAgICAgIGF3YWl0IGZha2VTZXJ2ZXIuYXV0aGVudGljYXRlKHNvY2tldCwgZGF0YSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICByZXF1ZXN0VGltZXN0YW1wID0gRGF0ZS5ub3coKTtcbiAgICAgICAgICAgICAgYXdhaXQgZmFrZVNlcnZlci5lbWl0RXJyb3Ioc29ja2V0LCBkYXRhLCAxLCAzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2UgaWYgKGRhdGEudHlwZSA9PT0gJ3N5bmNocm9uaXplJykge1xuICAgICAgICAgICAgYXdhaXQgZmFrZVNlcnZlci5yZXNwb25kKHNvY2tldCwgZGF0YSk7XG4gICAgICAgICAgICBhd2FpdCBmYWtlU2VydmVyLnN5bmNBY2NvdW50KHNvY2tldCwgZGF0YSk7XG4gICAgICAgICAgfSBlbHNlIGlmIChkYXRhLnR5cGUgPT09ICd3YWl0U3luY2hyb25pemVkJyB8fCBkYXRhLnR5cGUgPT09ICdyZWZyZXNoTWFya2V0RGF0YVN1YnNjcmlwdGlvbnMnKSB7XG4gICAgICAgICAgICBhd2FpdCBmYWtlU2VydmVyLnJlc3BvbmQoc29ja2V0LCBkYXRhKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKGRhdGEudHlwZSA9PT0gJ2dldEFjY291bnRJbmZvcm1hdGlvbicpIHtcbiAgICAgICAgICAgIGF3YWl0IGZha2VTZXJ2ZXIucmVzcG9uZEFjY291bnRJbmZvcm1hdGlvbihzb2NrZXQsIGRhdGEpO1xuICAgICAgICAgIH0gZWxzZSBpZiAoZGF0YS50eXBlID09PSAndW5zdWJzY3JpYmUnKSB7XG4gICAgICAgICAgICBkZWxldGUgc3Vic2NyaWJlZEFjY291bnRzW2RhdGEuYWNjb3VudElkXTtcbiAgICAgICAgICAgIGF3YWl0IGZha2VTZXJ2ZXIucmVzcG9uZChzb2NrZXQsIGRhdGEpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICAgIGNvbnN0IGFjY291bnQgPSBhd2FpdCBhcGkubWV0YXRyYWRlckFjY291bnRBcGkuZ2V0QWNjb3VudCgnYWNjb3VudElkJyk7XG4gICAgICBjb25uZWN0aW9uID0gYWNjb3VudC5nZXRTdHJlYW1pbmdDb25uZWN0aW9uKCk7XG4gICAgICBhd2FpdCBjb25uZWN0aW9uLmNvbm5lY3QoKTtcbiAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlcyA9PiBzZXRUaW1lb3V0KHJlcywgNTApKTtcbiAgICAgIGNsb2NrLnRpY2tBc3luYygxNTAwKTtcbiAgICAgIGF3YWl0IGNvbm5lY3Rpb24ud2FpdFN5bmNocm9uaXplZCh7dGltZW91dEluU2Vjb25kczogM30pO1xuICAgICAgY29uc3QgYWNjb3VudDIgPSBhd2FpdCBhcGkubWV0YXRyYWRlckFjY291bnRBcGkuZ2V0QWNjb3VudCgnYWNjb3VudElkMicpO1xuICAgICAgY29uc3QgY29ubmVjdGlvbjIgPSBhY2NvdW50Mi5nZXRTdHJlYW1pbmdDb25uZWN0aW9uKCk7XG4gICAgICBhd2FpdCBjb25uZWN0aW9uMi5jb25uZWN0KCk7XG4gICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXMgPT4gc2V0VGltZW91dChyZXMsIDUwKSk7XG4gICAgICBjbG9jay50aWNrQXN5bmMoMTUwMCk7XG4gICAgICBhd2FpdCBjb25uZWN0aW9uMi53YWl0U3luY2hyb25pemVkKHt0aW1lb3V0SW5TZWNvbmRzOiAzfSk7XG4gICAgICBjb25zdCBhY2NvdW50MyA9IGF3YWl0IGFwaS5tZXRhdHJhZGVyQWNjb3VudEFwaS5nZXRBY2NvdW50KCdhY2NvdW50SWQzJyk7XG4gICAgICBjb25zdCBjb25uZWN0aW9uMyA9IGFjY291bnQzLmdldFN0cmVhbWluZ0Nvbm5lY3Rpb24oKTtcbiAgICAgIGF3YWl0IGNvbm5lY3Rpb24zLmNvbm5lY3QoKTtcbiAgICAgIHRyeSB7XG4gICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlcyA9PiBzZXRUaW1lb3V0KHJlcywgNTApKTtcbiAgICAgICAgY2xvY2sudGlja0FzeW5jKDMwMDApO1xuICAgICAgICBhd2FpdCBjb25uZWN0aW9uMy53YWl0U3luY2hyb25pemVkKHt0aW1lb3V0SW5TZWNvbmRzOiAzfSk7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignVGltZW91dEVycm9yIGV4cGVjdGVkJyk7XG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgZXJyLm5hbWUuc2hvdWxkLmVxdWFsKCdUaW1lb3V0RXJyb3InKTtcbiAgICAgIH1cbiAgICAgIGF3YWl0IGNsb2NrLnRpY2tBc3luYygxNTAwKTtcbiAgICAgIHNpbm9uLmFzc2VydC5tYXRjaChjb25uZWN0aW9uMy5zeW5jaHJvbml6ZWQsIGZhbHNlKTtcbiAgICAgIGF3YWl0IGNsb2NrLnRpY2tBc3luYygyNTAwKTtcbiAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlcyA9PiBzZXRUaW1lb3V0KHJlcywgMjAwKSk7XG4gICAgICBzaW5vbi5hc3NlcnQubWF0Y2goY29ubmVjdGlvbjMuc3luY2hyb25pemVkLCB0cnVlKTtcbiAgICB9KS50aW1lb3V0KDEwMDAwKTtcblxuICAgIGl0KCdzaG91bGQgd2FpdCBmb3IgcmV0cnkgdGltZSBhZnRlciBwZXIgc2VydmVyIDQyOSBlcnJvcicsIGFzeW5jICgpID0+IHtcbiAgICAgIGxldCByZXF1ZXN0VGltZXN0YW1wID0gMDtcbiAgICAgIGNvbnN0IHNpZEJ5QWNjb3VudHMgPSB7fTtcblxuICAgICAgZmFrZVNlcnZlci5pby5yZW1vdmVBbGxMaXN0ZW5lcnMoJ2Nvbm5lY3QnKTtcbiAgICAgIGZha2VTZXJ2ZXIuaW8ub24oJ2Nvbm5lY3QnLCBzb2NrZXQgPT4ge1xuICAgICAgICBzZXJ2ZXIgPSBzb2NrZXQ7XG4gICAgICAgIHNvY2tldC5lbWl0KCdyZXNwb25zZScsIHt0eXBlOiAncmVzcG9uc2UnfSk7XG4gICAgICAgIHNvY2tldC5yZW1vdmVBbGxMaXN0ZW5lcnMoJ3JlcXVlc3QnKTtcbiAgICAgICAgLy9lc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgY29tcGxleGl0eVxuICAgICAgICBzb2NrZXQub24oJ3JlcXVlc3QnLCBhc3luYyBkYXRhID0+IHtcbiAgICAgICAgICBpZihkYXRhLmluc3RhbmNlSW5kZXggPT09IDEpIHtcbiAgICAgICAgICAgIGF3YWl0IGZha2VTZXJ2ZXIucmVzcG9uZChzb2NrZXQsIGRhdGEpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjb25zdCBzaWQgPSBzb2NrZXQuaWQ7XG4gICAgICAgICAgaWYoZGF0YS50eXBlID09PSAnc3Vic2NyaWJlJykge1xuICAgICAgICAgICAgaWYoT2JqZWN0LnZhbHVlcyhzaWRCeUFjY291bnRzKS5maWx0ZXIoYWNjb3VudFNJRCA9PiBhY2NvdW50U0lEID09PSBzaWQpLmxlbmd0aCA+PSAyICYmIFxuICAgICAgICAgIChyZXF1ZXN0VGltZXN0YW1wID09PSAwIHx8IERhdGUubm93KCkgLSA1ICogMTAwMCA8IHJlcXVlc3RUaW1lc3RhbXApKSB7XG4gICAgICAgICAgICAgIHJlcXVlc3RUaW1lc3RhbXAgPSBEYXRlLm5vdygpO1xuICAgICAgICAgICAgICBhd2FpdCBmYWtlU2VydmVyLmVtaXRFcnJvcihzb2NrZXQsIGRhdGEsIDIsIDUpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgc2lkQnlBY2NvdW50c1tkYXRhLmFjY291bnRJZF0gPSBzaWQ7XG4gICAgICAgICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlcyA9PiBzZXRUaW1lb3V0KHJlcywgMjAwKSk7IFxuICAgICAgICAgICAgICBhd2FpdCBmYWtlU2VydmVyLnJlc3BvbmQoc29ja2V0LCBkYXRhKTtcbiAgICAgICAgICAgICAgZmFrZVNlcnZlci5zdGF0dXNUYXNrcy5hY2NvdW50SWQgPSBzZXRJbnRlcnZhbCgoKSA9PiBmYWtlU2VydmVyLmVtaXRTdGF0dXMoc29ja2V0LCBkYXRhLmFjY291bnRJZCksIDEwMCk7XG4gICAgICAgICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlcyA9PiBzZXRUaW1lb3V0KHJlcywgNTApKTsgXG4gICAgICAgICAgICAgIGF3YWl0IGZha2VTZXJ2ZXIuYXV0aGVudGljYXRlKHNvY2tldCwgZGF0YSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIGlmIChkYXRhLnR5cGUgPT09ICdzeW5jaHJvbml6ZScpIHtcbiAgICAgICAgICAgIGF3YWl0IGZha2VTZXJ2ZXIucmVzcG9uZChzb2NrZXQsIGRhdGEpO1xuICAgICAgICAgICAgYXdhaXQgZmFrZVNlcnZlci5zeW5jQWNjb3VudChzb2NrZXQsIGRhdGEpO1xuICAgICAgICAgIH0gZWxzZSBpZiAoZGF0YS50eXBlID09PSAnd2FpdFN5bmNocm9uaXplZCcgfHwgZGF0YS50eXBlID09PSAncmVmcmVzaE1hcmtldERhdGFTdWJzY3JpcHRpb25zJykge1xuICAgICAgICAgICAgYXdhaXQgZmFrZVNlcnZlci5yZXNwb25kKHNvY2tldCwgZGF0YSk7XG4gICAgICAgICAgfSBlbHNlIGlmIChkYXRhLnR5cGUgPT09ICdnZXRBY2NvdW50SW5mb3JtYXRpb24nKSB7XG4gICAgICAgICAgICBhd2FpdCBmYWtlU2VydmVyLnJlc3BvbmRBY2NvdW50SW5mb3JtYXRpb24oc29ja2V0LCBkYXRhKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgICBjb25zdCBhY2NvdW50ID0gYXdhaXQgYXBpLm1ldGF0cmFkZXJBY2NvdW50QXBpLmdldEFjY291bnQoJ2FjY291bnRJZCcpO1xuICAgICAgY29ubmVjdGlvbiA9IGFjY291bnQuZ2V0U3RyZWFtaW5nQ29ubmVjdGlvbigpO1xuICAgICAgYXdhaXQgY29ubmVjdGlvbi5jb25uZWN0KCk7XG4gICAgICBhd2FpdCBjb25uZWN0aW9uLndhaXRTeW5jaHJvbml6ZWQoe3RpbWVvdXRJblNlY29uZHM6IDN9KTtcbiAgICAgIGNvbnN0IGFjY291bnQyID0gYXdhaXQgYXBpLm1ldGF0cmFkZXJBY2NvdW50QXBpLmdldEFjY291bnQoJ2FjY291bnRJZDInKTtcbiAgICAgIGNvbnN0IGNvbm5lY3Rpb24yID0gYWNjb3VudDIuZ2V0U3RyZWFtaW5nQ29ubmVjdGlvbigpO1xuICAgICAgYXdhaXQgY29ubmVjdGlvbjIuY29ubmVjdCgpO1xuICAgICAgYXdhaXQgY29ubmVjdGlvbjIud2FpdFN5bmNocm9uaXplZCh7dGltZW91dEluU2Vjb25kczogM30pO1xuICAgICAgY29uc3QgYWNjb3VudDMgPSBhd2FpdCBhcGkubWV0YXRyYWRlckFjY291bnRBcGkuZ2V0QWNjb3VudCgnYWNjb3VudElkMycpO1xuICAgICAgY29uc3QgY29ubmVjdGlvbjMgPSBhY2NvdW50My5nZXRTdHJlYW1pbmdDb25uZWN0aW9uKCk7XG4gICAgICBhd2FpdCBjb25uZWN0aW9uMy5jb25uZWN0KCk7XG4gICAgICBjb25uZWN0aW9uMy53YWl0U3luY2hyb25pemVkKHt0aW1lb3V0SW5TZWNvbmRzOiA1fSk7XG4gICAgICBhd2FpdCBjbG9jay50aWNrQXN5bmMoNTAwMCk7XG4gICAgICBzaWRCeUFjY291bnRzLmFjY291bnRJZC5zaG91bGQuZXF1YWwoc2lkQnlBY2NvdW50cy5hY2NvdW50SWQyKTtcbiAgICAgIHNpZEJ5QWNjb3VudHMuYWNjb3VudElkMi5zaG91bGQubm90LmVxdWFsKHNpZEJ5QWNjb3VudHMuYWNjb3VudElkMyk7XG4gICAgICBhd2FpdCBjbG9jay50aWNrQXN5bmMoNTAwMCk7XG4gICAgICBjb25zdCBhY2NvdW50NCA9IGF3YWl0IGFwaS5tZXRhdHJhZGVyQWNjb3VudEFwaS5nZXRBY2NvdW50KCdhY2NvdW50SWQ0Jyk7XG4gICAgICBjb25zdCBjb25uZWN0aW9uNCA9IGFjY291bnQ0LmdldFN0cmVhbWluZ0Nvbm5lY3Rpb24oKTtcbiAgICAgIGF3YWl0IGNvbm5lY3Rpb240LmNvbm5lY3QoKTtcbiAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlcyA9PiBzZXRUaW1lb3V0KHJlcywgNTApKTsgXG4gICAgICBjbG9jay50aWNrQXN5bmMoNTAwMCk7XG4gICAgICBhd2FpdCBjb25uZWN0aW9uNC53YWl0U3luY2hyb25pemVkKHt0aW1lb3V0SW5TZWNvbmRzOiAzfSk7XG4gICAgICBzaWRCeUFjY291bnRzLmFjY291bnRJZC5zaG91bGQuZXF1YWwoc2lkQnlBY2NvdW50cy5hY2NvdW50SWQ0KTtcbiAgICB9KS50aW1lb3V0KDEwMDAwKTtcbiAgXG4gICAgaXQoJ3Nob3VsZCByZWNvbm5lY3QgYWZ0ZXIgcGVyIHNlcnZlciA0MjkgZXJyb3IgaWYgY29ubmVjdGlvbiBoYXMgbm8gc3Vic2NyaWJlZCBhY2NvdW50cycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHNpZHMgPSBbXTtcblxuICAgICAgZmFrZVNlcnZlci5pby5yZW1vdmVBbGxMaXN0ZW5lcnMoJ2Nvbm5lY3QnKTtcbiAgICAgIGZha2VTZXJ2ZXIuaW8ub24oJ2Nvbm5lY3QnLCBzb2NrZXQgPT4ge1xuICAgICAgICBzZXJ2ZXIgPSBzb2NrZXQ7XG4gICAgICAgIHNvY2tldC5lbWl0KCdyZXNwb25zZScsIHt0eXBlOiAncmVzcG9uc2UnfSk7XG4gICAgICAgIHNvY2tldC5yZW1vdmVBbGxMaXN0ZW5lcnMoJ3JlcXVlc3QnKTtcbiAgICAgICAgLy9lc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgY29tcGxleGl0eVxuICAgICAgICBzb2NrZXQub24oJ3JlcXVlc3QnLCBhc3luYyBkYXRhID0+IHtcbiAgICAgICAgICBpZihkYXRhLmluc3RhbmNlSW5kZXggPT09IDEpIHtcbiAgICAgICAgICAgIGF3YWl0IGZha2VTZXJ2ZXIucmVzcG9uZChzb2NrZXQsIGRhdGEpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjb25zdCBzaWQgPSBzb2NrZXQuaWQ7XG4gICAgICAgICAgaWYoZGF0YS50eXBlID09PSAnc3Vic2NyaWJlJykge1xuICAgICAgICAgICAgc2lkcy5wdXNoKHNpZCk7XG4gICAgICAgICAgICBpZiAoc2lkcy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgICAgYXdhaXQgZmFrZVNlcnZlci5lbWl0RXJyb3Ioc29ja2V0LCBkYXRhLCAyLCAyKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlcyA9PiBzZXRUaW1lb3V0KHJlcywgMjAwKSk7IFxuICAgICAgICAgICAgICBhd2FpdCBmYWtlU2VydmVyLnJlc3BvbmQoc29ja2V0LCBkYXRhKTtcbiAgICAgICAgICAgICAgZmFrZVNlcnZlci5zdGF0dXNUYXNrcy5hY2NvdW50SWQgPSBzZXRJbnRlcnZhbCgoKSA9PiBmYWtlU2VydmVyLmVtaXRTdGF0dXMoc29ja2V0LCBkYXRhLmFjY291bnRJZCksIDEwMCk7XG4gICAgICAgICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlcyA9PiBzZXRUaW1lb3V0KHJlcywgNTApKTsgXG4gICAgICAgICAgICAgIGF3YWl0IGZha2VTZXJ2ZXIuYXV0aGVudGljYXRlKHNvY2tldCwgZGF0YSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIGlmIChkYXRhLnR5cGUgPT09ICdzeW5jaHJvbml6ZScpIHtcbiAgICAgICAgICAgIGF3YWl0IGZha2VTZXJ2ZXIucmVzcG9uZChzb2NrZXQsIGRhdGEpO1xuICAgICAgICAgICAgYXdhaXQgZmFrZVNlcnZlci5zeW5jQWNjb3VudChzb2NrZXQsIGRhdGEpO1xuICAgICAgICAgIH0gZWxzZSBpZiAoZGF0YS50eXBlID09PSAnd2FpdFN5bmNocm9uaXplZCcgfHwgZGF0YS50eXBlID09PSAncmVmcmVzaE1hcmtldERhdGFTdWJzY3JpcHRpb25zJykge1xuICAgICAgICAgICAgYXdhaXQgZmFrZVNlcnZlci5yZXNwb25kKHNvY2tldCwgZGF0YSk7XG4gICAgICAgICAgfSBlbHNlIGlmIChkYXRhLnR5cGUgPT09ICdnZXRBY2NvdW50SW5mb3JtYXRpb24nKSB7XG4gICAgICAgICAgICBhd2FpdCBmYWtlU2VydmVyLnJlc3BvbmRBY2NvdW50SW5mb3JtYXRpb24oc29ja2V0LCBkYXRhKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgICBjb25zdCBhY2NvdW50ID0gYXdhaXQgYXBpLm1ldGF0cmFkZXJBY2NvdW50QXBpLmdldEFjY291bnQoJ2FjY291bnRJZCcpO1xuICAgICAgY29ubmVjdGlvbiA9IGFjY291bnQuZ2V0U3RyZWFtaW5nQ29ubmVjdGlvbigpO1xuICAgICAgYXdhaXQgY29ubmVjdGlvbi5jb25uZWN0KCk7XG4gICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXMgPT4gc2V0VGltZW91dChyZXMsIDUwKSk7IFxuICAgICAgY2xvY2sudGlja0FzeW5jKDUwMDApO1xuICAgICAgYXdhaXQgY29ubmVjdGlvbi53YWl0U3luY2hyb25pemVkKHt0aW1lb3V0SW5TZWNvbmRzOiA1fSk7XG4gICAgICBzaWRzWzBdLnNob3VsZC5ub3QuZXF1YWwoc2lkc1sxXSk7XG4gICAgfSkudGltZW91dCgxMDAwMCk7XG5cbiAgICBpdCgnc2hvdWxkIGZyZWUgYSBzdWJzY3JpYmUgc2xvdCBvbiB1bnN1YnNjcmliZSBhZnRlciBwZXIgc2VydmVyIDQyOSBlcnJvcicsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHNpZEJ5QWNjb3VudHMgPSB7fTtcblxuICAgICAgZmFrZVNlcnZlci5pby5yZW1vdmVBbGxMaXN0ZW5lcnMoJ2Nvbm5lY3QnKTtcbiAgICAgIGZha2VTZXJ2ZXIuaW8ub24oJ2Nvbm5lY3QnLCBzb2NrZXQgPT4ge1xuICAgICAgICBzZXJ2ZXIgPSBzb2NrZXQ7XG4gICAgICAgIHNvY2tldC5lbWl0KCdyZXNwb25zZScsIHt0eXBlOiAncmVzcG9uc2UnfSk7XG4gICAgICAgIHNvY2tldC5yZW1vdmVBbGxMaXN0ZW5lcnMoJ3JlcXVlc3QnKTtcbiAgICAgICAgLy9lc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgY29tcGxleGl0eVxuICAgICAgICBzb2NrZXQub24oJ3JlcXVlc3QnLCBhc3luYyBkYXRhID0+IHtcbiAgICAgICAgICBpZihkYXRhLmluc3RhbmNlSW5kZXggPT09IDEpIHtcbiAgICAgICAgICAgIGF3YWl0IGZha2VTZXJ2ZXIucmVzcG9uZChzb2NrZXQsIGRhdGEpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjb25zdCBzaWQgPSBzb2NrZXQuaWQ7XG4gICAgICAgICAgaWYoZGF0YS50eXBlID09PSAnc3Vic2NyaWJlJykge1xuICAgICAgICAgICAgaWYoT2JqZWN0LnZhbHVlcyhzaWRCeUFjY291bnRzKS5maWx0ZXIoYWNjb3VudFNJRCA9PiBhY2NvdW50U0lEID09PSBzaWQpLmxlbmd0aCA+PSAyKSB7XG4gICAgICAgICAgICAgIGF3YWl0IGZha2VTZXJ2ZXIuZW1pdEVycm9yKHNvY2tldCwgZGF0YSwgMiwgMjAwKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHNpZEJ5QWNjb3VudHNbZGF0YS5hY2NvdW50SWRdID0gc2lkO1xuICAgICAgICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXMgPT4gc2V0VGltZW91dChyZXMsIDIwMCkpOyBcbiAgICAgICAgICAgICAgYXdhaXQgZmFrZVNlcnZlci5yZXNwb25kKHNvY2tldCwgZGF0YSk7XG4gICAgICAgICAgICAgIGZha2VTZXJ2ZXIuc3RhdHVzVGFza3MuYWNjb3VudElkID0gc2V0SW50ZXJ2YWwoKCkgPT4gZmFrZVNlcnZlci5lbWl0U3RhdHVzKHNvY2tldCwgZGF0YS5hY2NvdW50SWQpLCAxMDApO1xuICAgICAgICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXMgPT4gc2V0VGltZW91dChyZXMsIDUwKSk7IFxuICAgICAgICAgICAgICBhd2FpdCBmYWtlU2VydmVyLmF1dGhlbnRpY2F0ZShzb2NrZXQsIGRhdGEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSBpZiAoZGF0YS50eXBlID09PSAnc3luY2hyb25pemUnKSB7XG4gICAgICAgICAgICBhd2FpdCBmYWtlU2VydmVyLnJlc3BvbmQoc29ja2V0LCBkYXRhKTtcbiAgICAgICAgICAgIGF3YWl0IGZha2VTZXJ2ZXIuc3luY0FjY291bnQoc29ja2V0LCBkYXRhKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKGRhdGEudHlwZSA9PT0gJ3dhaXRTeW5jaHJvbml6ZWQnIHx8IGRhdGEudHlwZSA9PT0gJ3JlZnJlc2hNYXJrZXREYXRhU3Vic2NyaXB0aW9ucycpIHtcbiAgICAgICAgICAgIGF3YWl0IGZha2VTZXJ2ZXIucmVzcG9uZChzb2NrZXQsIGRhdGEpO1xuICAgICAgICAgIH0gZWxzZSBpZiAoZGF0YS50eXBlID09PSAnZ2V0QWNjb3VudEluZm9ybWF0aW9uJykge1xuICAgICAgICAgICAgYXdhaXQgZmFrZVNlcnZlci5yZXNwb25kQWNjb3VudEluZm9ybWF0aW9uKHNvY2tldCwgZGF0YSk7XG4gICAgICAgICAgfSBlbHNlIGlmIChkYXRhLnR5cGUgPT09ICd1bnN1YnNjcmliZScpIHtcbiAgICAgICAgICAgIGRlbGV0ZSBzaWRCeUFjY291bnRzW2RhdGEuYWNjb3VudElkXTtcbiAgICAgICAgICAgIGF3YWl0IGZha2VTZXJ2ZXIucmVzcG9uZChzb2NrZXQsIGRhdGEpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICAgIGNvbnN0IGFjY291bnQgPSBhd2FpdCBhcGkubWV0YXRyYWRlckFjY291bnRBcGkuZ2V0QWNjb3VudCgnYWNjb3VudElkJyk7XG4gICAgICBjb25uZWN0aW9uID0gYWNjb3VudC5nZXRTdHJlYW1pbmdDb25uZWN0aW9uKCk7XG4gICAgICBhd2FpdCBjb25uZWN0aW9uLmNvbm5lY3QoKTtcbiAgICAgIGF3YWl0IGNvbm5lY3Rpb24ud2FpdFN5bmNocm9uaXplZCh7dGltZW91dEluU2Vjb25kczogM30pO1xuICAgICAgY29uc3QgYWNjb3VudDIgPSBhd2FpdCBhcGkubWV0YXRyYWRlckFjY291bnRBcGkuZ2V0QWNjb3VudCgnYWNjb3VudElkMicpO1xuICAgICAgY29uc3QgY29ubmVjdGlvbjIgPSBhY2NvdW50Mi5nZXRTdHJlYW1pbmdDb25uZWN0aW9uKCk7XG4gICAgICBhd2FpdCBjb25uZWN0aW9uMi5jb25uZWN0KCk7XG4gICAgICBhd2FpdCBjb25uZWN0aW9uMi53YWl0U3luY2hyb25pemVkKHt0aW1lb3V0SW5TZWNvbmRzOiAzfSk7XG4gICAgICBjb25zdCBhY2NvdW50MyA9IGF3YWl0IGFwaS5tZXRhdHJhZGVyQWNjb3VudEFwaS5nZXRBY2NvdW50KCdhY2NvdW50SWQzJyk7XG4gICAgICBjb25zdCBjb25uZWN0aW9uMyA9IGFjY291bnQzLmdldFN0cmVhbWluZ0Nvbm5lY3Rpb24oKTtcbiAgICAgIGF3YWl0IGNvbm5lY3Rpb24zLmNvbm5lY3QoKTtcbiAgICAgIGNvbm5lY3Rpb24zLndhaXRTeW5jaHJvbml6ZWQoe3RpbWVvdXRJblNlY29uZHM6IDV9KTtcbiAgICAgIGF3YWl0IGNsb2NrLnRpY2tBc3luYyg1MDAwKTtcbiAgICAgIHNpZEJ5QWNjb3VudHMuYWNjb3VudElkLnNob3VsZC5lcXVhbChzaWRCeUFjY291bnRzLmFjY291bnRJZDIpO1xuICAgICAgc2lkQnlBY2NvdW50cy5hY2NvdW50SWQyLnNob3VsZC5ub3QuZXF1YWwoc2lkQnlBY2NvdW50cy5hY2NvdW50SWQzKTtcbiAgICAgIGF3YWl0IGNvbm5lY3Rpb24yLmNsb3NlKCk7XG4gICAgICBjb25zdCBhY2NvdW50NCA9IGF3YWl0IGFwaS5tZXRhdHJhZGVyQWNjb3VudEFwaS5nZXRBY2NvdW50KCdhY2NvdW50SWQ0Jyk7XG4gICAgICBjb25zdCBjb25uZWN0aW9uNCA9IGFjY291bnQ0LmdldFN0cmVhbWluZ0Nvbm5lY3Rpb24oKTtcbiAgICAgIGF3YWl0IGNvbm5lY3Rpb240LmNvbm5lY3QoKTtcbiAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlcyA9PiBzZXRUaW1lb3V0KHJlcywgNTApKTsgXG4gICAgICBjbG9jay50aWNrQXN5bmMoNTAwMCk7XG4gICAgICBhd2FpdCBjb25uZWN0aW9uNC53YWl0U3luY2hyb25pemVkKHt0aW1lb3V0SW5TZWNvbmRzOiAzfSk7XG4gICAgICBzaWRCeUFjY291bnRzLmFjY291bnRJZC5zaG91bGQuZXF1YWwoc2lkQnlBY2NvdW50cy5hY2NvdW50SWQ0KTtcbiAgICB9KS50aW1lb3V0KDEwMDAwKTtcblxuICAgIGl0KCdzaG91bGQgd2FpdCBmb3IgcmV0cnkgdGltZSBhZnRlciBwZXIgc2VydmVyIHBlciB1c2VyIDQyOSBlcnJvcicsIGFzeW5jICgpID0+IHtcbiAgICAgIGxldCByZXF1ZXN0VGltZXN0YW1wID0gMDtcbiAgICAgIGNvbnN0IHNpZEJ5QWNjb3VudHMgPSB7fTtcblxuICAgICAgZmFrZVNlcnZlci5pby5yZW1vdmVBbGxMaXN0ZW5lcnMoJ2Nvbm5lY3QnKTtcbiAgICAgIGZha2VTZXJ2ZXIuaW8ub24oJ2Nvbm5lY3QnLCBzb2NrZXQgPT4ge1xuICAgICAgICBzZXJ2ZXIgPSBzb2NrZXQ7XG4gICAgICAgIHNvY2tldC5lbWl0KCdyZXNwb25zZScsIHt0eXBlOiAncmVzcG9uc2UnfSk7XG4gICAgICAgIHNvY2tldC5yZW1vdmVBbGxMaXN0ZW5lcnMoJ3JlcXVlc3QnKTtcbiAgICAgICAgLy9lc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgY29tcGxleGl0eVxuICAgICAgICBzb2NrZXQub24oJ3JlcXVlc3QnLCBhc3luYyBkYXRhID0+IHtcbiAgICAgICAgICBpZihkYXRhLmluc3RhbmNlSW5kZXggPT09IDEpIHtcbiAgICAgICAgICAgIGF3YWl0IGZha2VTZXJ2ZXIucmVzcG9uZChzb2NrZXQsIGRhdGEpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjb25zdCBzaWQgPSBzb2NrZXQuaWQ7XG4gICAgICAgICAgaWYoZGF0YS50eXBlID09PSAnc3Vic2NyaWJlJykge1xuICAgICAgICAgICAgaWYoT2JqZWN0LnZhbHVlcyhzaWRCeUFjY291bnRzKS5maWx0ZXIoYWNjb3VudFNJRCA9PiBhY2NvdW50U0lEID09PSBzaWQpLmxlbmd0aCA+PSAyICYmIFxuICAgICAgICAgIChyZXF1ZXN0VGltZXN0YW1wID09PSAwIHx8IERhdGUubm93KCkgLSAyICogMTAwMCA8IHJlcXVlc3RUaW1lc3RhbXApKSB7XG4gICAgICAgICAgICAgIHJlcXVlc3RUaW1lc3RhbXAgPSBEYXRlLm5vdygpO1xuICAgICAgICAgICAgICBhd2FpdCBmYWtlU2VydmVyLmVtaXRFcnJvcihzb2NrZXQsIGRhdGEsIDAsIDIpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgc2lkQnlBY2NvdW50c1tkYXRhLmFjY291bnRJZF0gPSBzaWQ7XG4gICAgICAgICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlcyA9PiBzZXRUaW1lb3V0KHJlcywgMjAwKSk7IFxuICAgICAgICAgICAgICBhd2FpdCBmYWtlU2VydmVyLnJlc3BvbmQoc29ja2V0LCBkYXRhKTtcbiAgICAgICAgICAgICAgZmFrZVNlcnZlci5zdGF0dXNUYXNrcy5hY2NvdW50SWQgPSBzZXRJbnRlcnZhbCgoKSA9PiBmYWtlU2VydmVyLmVtaXRTdGF0dXMoc29ja2V0LCBkYXRhLmFjY291bnRJZCksIDEwMCk7XG4gICAgICAgICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlcyA9PiBzZXRUaW1lb3V0KHJlcywgNTApKTsgXG4gICAgICAgICAgICAgIGF3YWl0IGZha2VTZXJ2ZXIuYXV0aGVudGljYXRlKHNvY2tldCwgZGF0YSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIGlmIChkYXRhLnR5cGUgPT09ICdzeW5jaHJvbml6ZScpIHtcbiAgICAgICAgICAgIGF3YWl0IGZha2VTZXJ2ZXIucmVzcG9uZChzb2NrZXQsIGRhdGEpO1xuICAgICAgICAgICAgYXdhaXQgZmFrZVNlcnZlci5zeW5jQWNjb3VudChzb2NrZXQsIGRhdGEpO1xuICAgICAgICAgIH0gZWxzZSBpZiAoZGF0YS50eXBlID09PSAnd2FpdFN5bmNocm9uaXplZCcgfHwgZGF0YS50eXBlID09PSAncmVmcmVzaE1hcmtldERhdGFTdWJzY3JpcHRpb25zJykge1xuICAgICAgICAgICAgYXdhaXQgZmFrZVNlcnZlci5yZXNwb25kKHNvY2tldCwgZGF0YSk7XG4gICAgICAgICAgfSBlbHNlIGlmIChkYXRhLnR5cGUgPT09ICdnZXRBY2NvdW50SW5mb3JtYXRpb24nKSB7XG4gICAgICAgICAgICBhd2FpdCBmYWtlU2VydmVyLnJlc3BvbmRBY2NvdW50SW5mb3JtYXRpb24oc29ja2V0LCBkYXRhKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKGRhdGEudHlwZSA9PT0gJ3Vuc3Vic2NyaWJlJykge1xuICAgICAgICAgICAgZGVsZXRlIHNpZEJ5QWNjb3VudHNbZGF0YS5hY2NvdW50SWRdO1xuICAgICAgICAgICAgYXdhaXQgZmFrZVNlcnZlci5yZXNwb25kKHNvY2tldCwgZGF0YSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgICAgY29uc3QgYWNjb3VudCA9IGF3YWl0IGFwaS5tZXRhdHJhZGVyQWNjb3VudEFwaS5nZXRBY2NvdW50KCdhY2NvdW50SWQnKTtcbiAgICAgIGNvbm5lY3Rpb24gPSBhY2NvdW50LmdldFN0cmVhbWluZ0Nvbm5lY3Rpb24oKTtcbiAgICAgIGF3YWl0IGNvbm5lY3Rpb24uY29ubmVjdCgpO1xuICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzID0+IHNldFRpbWVvdXQocmVzLCA1MCkpO1xuICAgICAgY2xvY2sudGlja0FzeW5jKDUwMDApO1xuICAgICAgYXdhaXQgY29ubmVjdGlvbi53YWl0U3luY2hyb25pemVkKHt0aW1lb3V0SW5TZWNvbmRzOiA1fSk7XG4gICAgICBjb25zdCBhY2NvdW50MiA9IGF3YWl0IGFwaS5tZXRhdHJhZGVyQWNjb3VudEFwaS5nZXRBY2NvdW50KCdhY2NvdW50SWQyJyk7XG4gICAgICBjb25zdCBjb25uZWN0aW9uMiA9IGFjY291bnQyLmdldFN0cmVhbWluZ0Nvbm5lY3Rpb24oKTtcbiAgICAgIGF3YWl0IGNvbm5lY3Rpb24yLmNvbm5lY3QoKTtcbiAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlcyA9PiBzZXRUaW1lb3V0KHJlcywgNTApKTtcbiAgICAgIGNsb2NrLnRpY2tBc3luYyg1MDAwKTtcbiAgICAgIGF3YWl0IGNvbm5lY3Rpb24yLndhaXRTeW5jaHJvbml6ZWQoe3RpbWVvdXRJblNlY29uZHM6IDV9KTtcbiAgICAgIGNvbnN0IGFjY291bnQzID0gYXdhaXQgYXBpLm1ldGF0cmFkZXJBY2NvdW50QXBpLmdldEFjY291bnQoJ2FjY291bnRJZDMnKTtcbiAgICAgIGNvbnN0IGNvbm5lY3Rpb24zID0gYWNjb3VudDMuZ2V0U3RyZWFtaW5nQ29ubmVjdGlvbigpO1xuICAgICAgYXdhaXQgY29ubmVjdGlvbjMuY29ubmVjdCgpO1xuICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzID0+IHNldFRpbWVvdXQocmVzLCA1MCkpO1xuICAgICAgY2xvY2sudGlja0FzeW5jKDUwMDApO1xuICAgICAgYXdhaXQgY29ubmVjdGlvbjMud2FpdFN5bmNocm9uaXplZCh7dGltZW91dEluU2Vjb25kczogNX0pO1xuICAgICAgc2lkQnlBY2NvdW50cy5hY2NvdW50SWQuc2hvdWxkLmVxdWFsKHNpZEJ5QWNjb3VudHMuYWNjb3VudElkMik7XG4gICAgICBzaWRCeUFjY291bnRzLmFjY291bnRJZDIuc2hvdWxkLm5vdC5lcXVhbChzaWRCeUFjY291bnRzLmFjY291bnRJZDMpO1xuICAgICAgY29uc3QgYWNjb3VudDQgPSBhd2FpdCBhcGkubWV0YXRyYWRlckFjY291bnRBcGkuZ2V0QWNjb3VudCgnYWNjb3VudElkNCcpO1xuICAgICAgY29uc3QgY29ubmVjdGlvbjQgPSBhY2NvdW50NC5nZXRTdHJlYW1pbmdDb25uZWN0aW9uKCk7XG4gICAgICBhd2FpdCBjb25uZWN0aW9uNC5jb25uZWN0KCk7XG4gICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXMgPT4gc2V0VGltZW91dChyZXMsIDUwKSk7XG4gICAgICBjbG9jay50aWNrQXN5bmMoNTAwMCk7XG4gICAgICBhd2FpdCBjb25uZWN0aW9uNC53YWl0U3luY2hyb25pemVkKHt0aW1lb3V0SW5TZWNvbmRzOiA1fSk7XG4gICAgICBzaWRCeUFjY291bnRzLmFjY291bnRJZC5zaG91bGQubm90LmVxdWFsKHNpZEJ5QWNjb3VudHMuYWNjb3VudElkNCk7XG4gICAgICBhd2FpdCBjb25uZWN0aW9uMi5jbG9zZSgpO1xuICAgICAgY29uc3QgYWNjb3VudDUgPSBhd2FpdCBhcGkubWV0YXRyYWRlckFjY291bnRBcGkuZ2V0QWNjb3VudCgnYWNjb3VudElkNScpO1xuICAgICAgY29uc3QgY29ubmVjdGlvbjUgPSBhY2NvdW50NS5nZXRTdHJlYW1pbmdDb25uZWN0aW9uKCk7XG4gICAgICBhd2FpdCBjb25uZWN0aW9uNS5jb25uZWN0KCk7XG4gICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXMgPT4gc2V0VGltZW91dChyZXMsIDUwKSk7XG4gICAgICBjbG9jay50aWNrQXN5bmMoNTAwMCk7XG4gICAgICBhd2FpdCBjb25uZWN0aW9uNS53YWl0U3luY2hyb25pemVkKHt0aW1lb3V0SW5TZWNvbmRzOiA1fSk7XG4gICAgICBzaWRCeUFjY291bnRzLmFjY291bnRJZC5zaG91bGQuZXF1YWwoc2lkQnlBY2NvdW50cy5hY2NvdW50SWQ1KTtcbiAgICB9KS50aW1lb3V0KDEwMDAwKTtcblxuICAgIGl0KCdzaG91bGQgYXR0ZW1wdCB0byByZXN1YnNjcmliZSBvbiBkaXNjb25uZWN0ZWQgcGFja2V0JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgYWNjb3VudCA9IGF3YWl0IGFwaS5tZXRhdHJhZGVyQWNjb3VudEFwaS5nZXRBY2NvdW50KCdhY2NvdW50SWQnKTtcbiAgICAgIGNvbm5lY3Rpb24gPSBhY2NvdW50LmdldFN0cmVhbWluZ0Nvbm5lY3Rpb24oKTtcbiAgICAgIGF3YWl0IGNvbm5lY3Rpb24uY29ubmVjdCgpO1xuICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzID0+IHNldFRpbWVvdXQocmVzLCA1MCkpO1xuICAgICAgY2xvY2sudGlja0FzeW5jKDUwMDApO1xuICAgICAgYXdhaXQgY29ubmVjdGlvbi53YWl0U3luY2hyb25pemVkKHt0aW1lb3V0SW5TZWNvbmRzOiAzfSk7IFxuICAgICAgKGNvbm5lY3Rpb24uc3luY2hyb25pemVkICYmIGNvbm5lY3Rpb24udGVybWluYWxTdGF0ZS5jb25uZWN0ZWQgXG4gICAgICAmJiBjb25uZWN0aW9uLnRlcm1pbmFsU3RhdGUuY29ubmVjdGVkVG9Ccm9rZXIpLnNob3VsZC5lcXVhbCh0cnVlKTtcbiAgICAgIGZha2VTZXJ2ZXIuZGVsZXRlU3RhdHVzVGFzaygnYWNjb3VudElkJyk7XG4gICAgICBhd2FpdCBzZXJ2ZXIuZW1pdCgnc3luY2hyb25pemF0aW9uJywge3R5cGU6ICdkaXNjb25uZWN0ZWQnLCBhY2NvdW50SWQ6ICdhY2NvdW50SWQnLFxuICAgICAgICBob3N0OiAncHMtbXBhLTAnLCBpbnN0YW5jZUluZGV4OiAwfSk7XG4gICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXMgPT4gc2V0VGltZW91dChyZXMsIDUwKSk7IFxuICAgICAgYXdhaXQgY2xvY2sudGlja0FzeW5jKDIwMCk7XG4gICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXMgPT4gc2V0VGltZW91dChyZXMsIDUwKSk7IFxuICAgICAgY29ubmVjdGlvbi5zeW5jaHJvbml6ZWQuc2hvdWxkLmVxdWFsKGZhbHNlKTtcbiAgICAgIGNvbm5lY3Rpb24udGVybWluYWxTdGF0ZS5jb25uZWN0ZWQuc2hvdWxkLmVxdWFsKGZhbHNlKTtcbiAgICAgIGNvbm5lY3Rpb24udGVybWluYWxTdGF0ZS5jb25uZWN0ZWRUb0Jyb2tlci5zaG91bGQuZXF1YWwoZmFsc2UpO1xuICAgICAgYXdhaXQgY2xvY2sudGlja0FzeW5jKDUwMDApO1xuICAgICAgKGNvbm5lY3Rpb24uc3luY2hyb25pemVkICYmIGNvbm5lY3Rpb24udGVybWluYWxTdGF0ZS5jb25uZWN0ZWQgXG4gICAgICAmJiBjb25uZWN0aW9uLnRlcm1pbmFsU3RhdGUuY29ubmVjdGVkVG9Ccm9rZXIpLnNob3VsZC5lcXVhbCh0cnVlKTtcbiAgICB9KS50aW1lb3V0KDEwMDAwKTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIG11bHRpcGxlIHN0cmVhbXMgaW4gb25lIGluc3RhbmNlIG51bWJlcicsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGFjY291bnQgPSBhd2FpdCBhcGkubWV0YXRyYWRlckFjY291bnRBcGkuZ2V0QWNjb3VudCgnYWNjb3VudElkJyk7XG4gICAgICBjb25uZWN0aW9uID0gYWNjb3VudC5nZXRTdHJlYW1pbmdDb25uZWN0aW9uKCk7XG4gICAgICBhd2FpdCBjb25uZWN0aW9uLmNvbm5lY3QoKTtcbiAgICAgIGNsb2NrLnRpY2tBc3luYyg1MDAwKTtcbiAgICAgIGF3YWl0IGNvbm5lY3Rpb24ud2FpdFN5bmNocm9uaXplZCh7dGltZW91dEluU2Vjb25kczogMTB9KTsgXG4gICAgICBsZXQgc3Vic2NyaWJlQ2FsbGVkID0gZmFsc2U7XG5cbiAgICAgIGZha2VTZXJ2ZXIuZW5hYmxlU3luYyA9IChzb2NrZXQpID0+IHtcbiAgICAgICAgc29ja2V0LnJlbW92ZUFsbExpc3RlbmVycygncmVxdWVzdCcpO1xuICAgICAgICAvL2VzbGludC1kaXNhYmxlLW5leHQtbGluZSBjb21wbGV4aXR5XG4gICAgICAgIHNvY2tldC5vbigncmVxdWVzdCcsIGFzeW5jIGRhdGEgPT4ge1xuICAgICAgICAgIGlmKGRhdGEuaW5zdGFuY2VJbmRleCA9PT0gMSkge1xuICAgICAgICAgICAgYXdhaXQgZmFrZVNlcnZlci5yZXNwb25kKHNvY2tldCwgZGF0YSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmKGRhdGEudHlwZSA9PT0gJ3N1YnNjcmliZScpIHtcbiAgICAgICAgICAgIHN1YnNjcmliZUNhbGxlZCA9IHRydWU7XG4gICAgICAgICAgfSBlbHNlIGlmIChkYXRhLnR5cGUgPT09ICdzeW5jaHJvbml6ZScpIHtcbiAgICAgICAgICAgIGF3YWl0IGZha2VTZXJ2ZXIucmVzcG9uZChzb2NrZXQsIGRhdGEpO1xuICAgICAgICAgICAgYXdhaXQgZmFrZVNlcnZlci5zeW5jQWNjb3VudChzb2NrZXQsIGRhdGEsICdwcy1tcGEtMScpO1xuICAgICAgICAgIH0gZWxzZSBpZiAoZGF0YS50eXBlID09PSAnd2FpdFN5bmNocm9uaXplZCcgfHwgZGF0YS50eXBlID09PSAncmVmcmVzaE1hcmtldERhdGFTdWJzY3JpcHRpb25zJykge1xuICAgICAgICAgICAgYXdhaXQgZmFrZVNlcnZlci5yZXNwb25kKHNvY2tldCwgZGF0YSk7XG4gICAgICAgICAgfSBlbHNlIGlmIChkYXRhLnR5cGUgPT09ICdnZXRBY2NvdW50SW5mb3JtYXRpb24nKSB7XG4gICAgICAgICAgICBhd2FpdCBmYWtlU2VydmVyLnJlc3BvbmRBY2NvdW50SW5mb3JtYXRpb24oc29ja2V0LCBkYXRhKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfTtcbiAgICAgIGZha2VTZXJ2ZXIuZW5hYmxlU3luYyhzZXJ2ZXIpO1xuICAgICAgY29uc3Qgc3RhdHVzVGFzayA9IHNldEludGVydmFsKCgpID0+IGZha2VTZXJ2ZXIuZW1pdFN0YXR1cyhzZXJ2ZXIsICdhY2NvdW50SWQnLCAncHMtbXBhLTEnKSwgMTAwKTtcbiAgICAgIGF3YWl0IGZha2VTZXJ2ZXIuYXV0aGVudGljYXRlKHNlcnZlciwge2FjY291bnRJZDogJ2FjY291bnRJZCd9LCAncHMtbXBhLTEnKTtcbiAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlcyA9PiBzZXRUaW1lb3V0KHJlcywgNTApKTsgXG4gICAgICBhd2FpdCBjbG9jay50aWNrQXN5bmMoMjAwMDApOyBcbiAgICAgIGZha2VTZXJ2ZXIuZGVsZXRlU3RhdHVzVGFzaygnYWNjb3VudElkJyk7XG4gICAgICBhd2FpdCBzZXJ2ZXIuZW1pdCgnc3luY2hyb25pemF0aW9uJywge3R5cGU6ICdkaXNjb25uZWN0ZWQnLCBhY2NvdW50SWQ6ICdhY2NvdW50SWQnLFxuICAgICAgICBob3N0OiAncHMtbXBhLTAnLCBpbnN0YW5jZUluZGV4OiAwfSk7XG4gICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXMgPT4gc2V0VGltZW91dChyZXMsIDUwKSk7IFxuICAgICAgYXdhaXQgY2xvY2sudGlja0FzeW5jKDEwMDAwKTsgXG4gICAgICAoY29ubmVjdGlvbi5zeW5jaHJvbml6ZWQgJiYgY29ubmVjdGlvbi50ZXJtaW5hbFN0YXRlLmNvbm5lY3RlZCBcbiAgICAgICYmIGNvbm5lY3Rpb24udGVybWluYWxTdGF0ZS5jb25uZWN0ZWRUb0Jyb2tlcikuc2hvdWxkLmVxdWFsKHRydWUpO1xuICAgICAgc3Vic2NyaWJlQ2FsbGVkLnNob3VsZC5lcXVhbChmYWxzZSk7XG4gICAgICBhd2FpdCBzZXJ2ZXIuZW1pdCgnc3luY2hyb25pemF0aW9uJywge3R5cGU6ICdkaXNjb25uZWN0ZWQnLCBhY2NvdW50SWQ6ICdhY2NvdW50SWQnLFxuICAgICAgICBob3N0OiAncHMtbXBhLTEnLCBpbnN0YW5jZUluZGV4OiAwfSk7XG4gICAgICBjbGVhckludGVydmFsKHN0YXR1c1Rhc2spO1xuICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzID0+IHNldFRpbWVvdXQocmVzLCA1MCkpOyBcbiAgICAgIGNvbm5lY3Rpb24uc3luY2hyb25pemVkLnNob3VsZC5lcXVhbChmYWxzZSk7XG4gICAgICBjb25uZWN0aW9uLnRlcm1pbmFsU3RhdGUuY29ubmVjdGVkLnNob3VsZC5lcXVhbChmYWxzZSk7XG4gICAgICBjb25uZWN0aW9uLnRlcm1pbmFsU3RhdGUuY29ubmVjdGVkVG9Ccm9rZXIuc2hvdWxkLmVxdWFsKGZhbHNlKTtcbiAgICB9KS50aW1lb3V0KDEwMDAwKTtcblxuICAgIGl0KCdzaG91bGQgbm90IHJlc3Vic2NyaWJlIGlmIG11bHRpcGxlIHN0cmVhbXMgYW5kIG9uZSB0aW1lZCBvdXQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBhY2NvdW50ID0gYXdhaXQgYXBpLm1ldGF0cmFkZXJBY2NvdW50QXBpLmdldEFjY291bnQoJ2FjY291bnRJZCcpO1xuICAgICAgY29ubmVjdGlvbiA9IGFjY291bnQuZ2V0U3RyZWFtaW5nQ29ubmVjdGlvbigpO1xuICAgICAgYXdhaXQgY29ubmVjdGlvbi5jb25uZWN0KCk7XG4gICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXMgPT4gc2V0VGltZW91dChyZXMsIDUwKSk7XG4gICAgICBjbG9jay50aWNrQXN5bmMoNTAwMCk7XG4gICAgICBhd2FpdCBjb25uZWN0aW9uLndhaXRTeW5jaHJvbml6ZWQoe3RpbWVvdXRJblNlY29uZHM6IDEwfSk7IFxuICAgICAgbGV0IHN1YnNjcmliZUNhbGxlZCA9IGZhbHNlO1xuXG4gICAgICBmYWtlU2VydmVyLmVuYWJsZVN5bmMgPSAoc29ja2V0KSA9PiB7XG4gICAgICAgIHNvY2tldC5yZW1vdmVBbGxMaXN0ZW5lcnMoJ3JlcXVlc3QnKTtcbiAgICAgICAgLy9lc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgY29tcGxleGl0eVxuICAgICAgICBzb2NrZXQub24oJ3JlcXVlc3QnLCBhc3luYyBkYXRhID0+IHtcbiAgICAgICAgICBpZihkYXRhLmluc3RhbmNlSW5kZXggPT09IDEpIHtcbiAgICAgICAgICAgIGF3YWl0IGZha2VTZXJ2ZXIucmVzcG9uZChzb2NrZXQsIGRhdGEpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZihkYXRhLnR5cGUgPT09ICdzdWJzY3JpYmUnKSB7XG4gICAgICAgICAgICBzdWJzY3JpYmVDYWxsZWQgPSB0cnVlO1xuICAgICAgICAgIH0gZWxzZSBpZiAoZGF0YS50eXBlID09PSAnc3luY2hyb25pemUnKSB7XG4gICAgICAgICAgICBhd2FpdCBmYWtlU2VydmVyLnJlc3BvbmQoc29ja2V0LCBkYXRhKTtcbiAgICAgICAgICAgIGF3YWl0IGZha2VTZXJ2ZXIuc3luY0FjY291bnQoc29ja2V0LCBkYXRhLCAncHMtbXBhLTEnKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKGRhdGEudHlwZSA9PT0gJ3dhaXRTeW5jaHJvbml6ZWQnIHx8IGRhdGEudHlwZSA9PT0gJ3JlZnJlc2hNYXJrZXREYXRhU3Vic2NyaXB0aW9ucycpIHtcbiAgICAgICAgICAgIGF3YWl0IGZha2VTZXJ2ZXIucmVzcG9uZChzb2NrZXQsIGRhdGEpO1xuICAgICAgICAgIH0gZWxzZSBpZiAoZGF0YS50eXBlID09PSAnZ2V0QWNjb3VudEluZm9ybWF0aW9uJykge1xuICAgICAgICAgICAgYXdhaXQgZmFrZVNlcnZlci5yZXNwb25kQWNjb3VudEluZm9ybWF0aW9uKHNvY2tldCwgZGF0YSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH07XG4gICAgICBmYWtlU2VydmVyLmVuYWJsZVN5bmMoc2VydmVyKTtcbiAgICAgIGNvbnN0IHN0YXR1c1Rhc2sgPSBzZXRJbnRlcnZhbCgoKSA9PiBmYWtlU2VydmVyLmVtaXRTdGF0dXMoc2VydmVyLCAnYWNjb3VudElkJywgJ3BzLW1wYS0xJyksIDEyMCk7XG4gICAgICBhd2FpdCBmYWtlU2VydmVyLmF1dGhlbnRpY2F0ZShzZXJ2ZXIsIHthY2NvdW50SWQ6ICdhY2NvdW50SWQnfSwgJ3BzLW1wYS0xJyk7XG4gICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXMgPT4gc2V0VGltZW91dChyZXMsIDUwKSk7IFxuICAgICAgYXdhaXQgY2xvY2sudGlja0FzeW5jKDIwMDAwKTsgXG4gICAgICBmYWtlU2VydmVyLmRlbGV0ZVN0YXR1c1Rhc2soJ2FjY291bnRJZCcpO1xuICAgICAgYXdhaXQgY2xvY2sudGlja0FzeW5jKDU1MDAwKTsgXG4gICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXMgPT4gc2V0VGltZW91dChyZXMsIDUwKSk7IFxuICAgICAgKGNvbm5lY3Rpb24uc3luY2hyb25pemVkICYmIGNvbm5lY3Rpb24udGVybWluYWxTdGF0ZS5jb25uZWN0ZWQgXG4gICAgICAmJiBjb25uZWN0aW9uLnRlcm1pbmFsU3RhdGUuY29ubmVjdGVkVG9Ccm9rZXIpLnNob3VsZC5lcXVhbCh0cnVlKTtcbiAgICAgIHN1YnNjcmliZUNhbGxlZC5zaG91bGQuZXF1YWwoZmFsc2UpO1xuICAgICAgY2xlYXJJbnRlcnZhbChzdGF0dXNUYXNrKTtcbiAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlcyA9PiBzZXRUaW1lb3V0KHJlcywgNTApKTsgXG4gICAgICBhd2FpdCBjbG9jay50aWNrQXN5bmMoNjUwMDApOyBcbiAgICAgIGNvbm5lY3Rpb24uc3luY2hyb25pemVkLnNob3VsZC5lcXVhbChmYWxzZSk7XG4gICAgICBjb25uZWN0aW9uLnRlcm1pbmFsU3RhdGUuY29ubmVjdGVkLnNob3VsZC5lcXVhbChmYWxzZSk7XG4gICAgICBjb25uZWN0aW9uLnRlcm1pbmFsU3RhdGUuY29ubmVjdGVkVG9Ccm9rZXIuc2hvdWxkLmVxdWFsKGZhbHNlKTtcbiAgICAgIHN1YnNjcmliZUNhbGxlZC5zaG91bGQuZXF1YWwodHJ1ZSk7XG4gICAgfSkudGltZW91dCgxMDAwMCk7XG5cbiAgICBpdCgnc2hvdWxkIG5vdCBzeW5jaHJvbml6ZSBpZiBjb25uZWN0aW9uIGlzIGNsb3NlZCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGxldCBzeW5jaHJvbml6ZUNvdW50ZXIgPSAwO1xuICAgICAgZmFrZVNlcnZlci5pby5yZW1vdmVBbGxMaXN0ZW5lcnMoJ2Nvbm5lY3QnKTtcbiAgICAgIGZha2VTZXJ2ZXIuaW8ub24oJ2Nvbm5lY3QnLCBzb2NrZXQgPT4ge1xuICAgICAgICBzZXJ2ZXIgPSBzb2NrZXQ7XG4gICAgICAgIHNvY2tldC5lbWl0KCdyZXNwb25zZScsIHt0eXBlOiAncmVzcG9uc2UnfSk7XG4gICAgICAgIHNvY2tldC5yZW1vdmVBbGxMaXN0ZW5lcnMoJ3JlcXVlc3QnKTtcbiAgICAgICAgLy9lc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgY29tcGxleGl0eVxuICAgICAgICBzb2NrZXQub24oJ3JlcXVlc3QnLCBhc3luYyBkYXRhID0+IHtcbiAgICAgICAgICBpZihkYXRhLmluc3RhbmNlSW5kZXggPT09IDEpIHtcbiAgICAgICAgICAgIGF3YWl0IGZha2VTZXJ2ZXIucmVzcG9uZChzb2NrZXQsIGRhdGEpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZihkYXRhLnR5cGUgPT09ICdzdWJzY3JpYmUnKSB7XG4gICAgICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXMgPT4gc2V0VGltZW91dChyZXMsIDIwMCkpOyBcbiAgICAgICAgICAgIGF3YWl0IGZha2VTZXJ2ZXIucmVzcG9uZChzb2NrZXQsIGRhdGEpO1xuICAgICAgICAgICAgZmFrZVNlcnZlci5zdGF0dXNUYXNrcy5hY2NvdW50SWQgPSBzZXRJbnRlcnZhbCgoKSA9PiBmYWtlU2VydmVyLmVtaXRTdGF0dXMoc29ja2V0LCBkYXRhLmFjY291bnRJZCksIDEwMCk7XG4gICAgICAgICAgICBhd2FpdCBmYWtlU2VydmVyLmF1dGhlbnRpY2F0ZShzb2NrZXQsIGRhdGEpO1xuICAgICAgICAgIH0gZWxzZSBpZiAoZGF0YS50eXBlID09PSAnc3luY2hyb25pemUnKSB7XG4gICAgICAgICAgICBzeW5jaHJvbml6ZUNvdW50ZXIrKztcbiAgICAgICAgICAgIGF3YWl0IGZha2VTZXJ2ZXIucmVzcG9uZChzb2NrZXQsIGRhdGEpO1xuICAgICAgICAgICAgYXdhaXQgZmFrZVNlcnZlci5zeW5jQWNjb3VudChzb2NrZXQsIGRhdGEsICdwcy1tcGEtMScpO1xuICAgICAgICAgIH0gZWxzZSBpZiAoZGF0YS50eXBlID09PSAnd2FpdFN5bmNocm9uaXplZCcgfHwgZGF0YS50eXBlID09PSAncmVmcmVzaE1hcmtldERhdGFTdWJzY3JpcHRpb25zJykge1xuICAgICAgICAgICAgYXdhaXQgZmFrZVNlcnZlci5yZXNwb25kKHNvY2tldCwgZGF0YSk7XG4gICAgICAgICAgfSBlbHNlIGlmIChkYXRhLnR5cGUgPT09ICdnZXRBY2NvdW50SW5mb3JtYXRpb24nKSB7XG4gICAgICAgICAgICBhd2FpdCBmYWtlU2VydmVyLnJlc3BvbmRBY2NvdW50SW5mb3JtYXRpb24oc29ja2V0LCBkYXRhKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKGRhdGEudHlwZSA9PT0gJ3Vuc3Vic2NyaWJlJykge1xuICAgICAgICAgICAgZmFrZVNlcnZlci5kZWxldGVTdGF0dXNUYXNrKGRhdGEuYWNjb3VudElkKTtcbiAgICAgICAgICAgIGF3YWl0IGZha2VTZXJ2ZXIucmVzcG9uZChzb2NrZXQsIGRhdGEpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICAgIGNvbnN0IGFjY291bnQgPSBhd2FpdCBhcGkubWV0YXRyYWRlckFjY291bnRBcGkuZ2V0QWNjb3VudCgnYWNjb3VudElkJyk7XG4gICAgICBjb25uZWN0aW9uID0gYWNjb3VudC5nZXRTdHJlYW1pbmdDb25uZWN0aW9uKCk7XG4gICAgICBhd2FpdCBjb25uZWN0aW9uLmNvbm5lY3QoKTtcbiAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlcyA9PiBzZXRUaW1lb3V0KHJlcywgNTApKTsgXG4gICAgICBjbG9jay50aWNrQXN5bmMoNTAwMCk7XG4gICAgICBhd2FpdCBjb25uZWN0aW9uLndhaXRTeW5jaHJvbml6ZWQoe3RpbWVvdXRJblNlY29uZHM6IDEwfSk7IFxuICAgICAgc2lub24uYXNzZXJ0Lm1hdGNoKHN5bmNocm9uaXplQ291bnRlciwgMSk7XG4gICAgICBjb25zdCBhY2NvdW50MiA9IGF3YWl0IGFwaS5tZXRhdHJhZGVyQWNjb3VudEFwaS5nZXRBY2NvdW50KCdhY2NvdW50SWQyJyk7XG4gICAgICBjb25zdCBjb25uZWN0aW9uMiA9IGFjY291bnQyLmdldFN0cmVhbWluZ0Nvbm5lY3Rpb24oKTtcbiAgICAgIGF3YWl0IGNvbm5lY3Rpb24yLmNvbm5lY3QoKTtcbiAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlcyA9PiBzZXRUaW1lb3V0KHJlcywgNTApKTsgXG4gICAgICBhd2FpdCBjb25uZWN0aW9uMi5jbG9zZSgpO1xuICAgICAgdHJ5IHtcbiAgICAgICAgY2xvY2sudGlja0FzeW5jKDUwMDApO1xuICAgICAgICBhd2FpdCBjb25uZWN0aW9uMi53YWl0U3luY2hyb25pemVkKHt0aW1lb3V0SW5TZWNvbmRzOiA1fSk7IFxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Vycm9yIGV4cGVjdGVkJyk7XG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgZXJyLm1lc3NhZ2Uuc2hvdWxkLmVxdWFsKCdUaGlzIGNvbm5lY3Rpb24gaGFzIGJlZW4gY2xvc2VkLCBwbGVhc2UgY3JlYXRlIGEgbmV3IGNvbm5lY3Rpb24nKTtcbiAgICAgIH1cbiAgICAgIHNpbm9uLmFzc2VydC5tYXRjaChzeW5jaHJvbml6ZUNvdW50ZXIsIDEpO1xuICAgIH0pLnRpbWVvdXQoMTAwMDApO1xuXG4gICAgaXQoJ3Nob3VsZCBub3QgcmVzdWJzY3JpYmUgYWZ0ZXIgY29ubmVjdGlvbiBpcyBjbG9zZWQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBsZXQgc3Vic2NyaWJlQ291bnRlciA9IDA7XG4gICAgICBjb25zdCBzZXJ2ZXJzID0gW107XG5cbiAgICAgIGZha2VTZXJ2ZXIuaW8ucmVtb3ZlQWxsTGlzdGVuZXJzKCdjb25uZWN0Jyk7XG4gICAgICBmYWtlU2VydmVyLmlvLm9uKCdjb25uZWN0Jywgc29ja2V0ID0+IHtcbiAgICAgICAgc2VydmVycy5wdXNoKHNvY2tldCk7XG4gICAgICAgIHNvY2tldC5lbWl0KCdyZXNwb25zZScsIHt0eXBlOiAncmVzcG9uc2UnfSk7XG4gICAgICAgIHNvY2tldC5yZW1vdmVBbGxMaXN0ZW5lcnMoJ3JlcXVlc3QnKTtcbiAgICAgICAgLy9lc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgY29tcGxleGl0eVxuICAgICAgICBzb2NrZXQub24oJ3JlcXVlc3QnLCBhc3luYyBkYXRhID0+IHtcbiAgICAgICAgICBpZihkYXRhLmluc3RhbmNlSW5kZXggPT09IDEpIHtcbiAgICAgICAgICAgIGF3YWl0IGZha2VTZXJ2ZXIucmVzcG9uZChzb2NrZXQsIGRhdGEpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZihkYXRhLnR5cGUgPT09ICdzdWJzY3JpYmUnKSB7XG4gICAgICAgICAgICBzdWJzY3JpYmVDb3VudGVyKys7XG4gICAgICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXMgPT4gc2V0VGltZW91dChyZXMsIDEwMCkpOyBcbiAgICAgICAgICAgIGF3YWl0IGZha2VTZXJ2ZXIucmVzcG9uZChzb2NrZXQsIGRhdGEpO1xuICAgICAgICAgICAgZmFrZVNlcnZlci5kZWxldGVTdGF0dXNUYXNrKGRhdGEuYWNjb3VudElkKTtcbiAgICAgICAgICAgIGZha2VTZXJ2ZXIuc3RhdHVzVGFza3MuYWNjb3VudElkID0gc2V0SW50ZXJ2YWwoKCkgPT4gZmFrZVNlcnZlci5lbWl0U3RhdHVzKHNvY2tldCwgZGF0YS5hY2NvdW50SWQpLCAxMDApO1xuICAgICAgICAgICAgYXdhaXQgZmFrZVNlcnZlci5hdXRoZW50aWNhdGUoc29ja2V0LCBkYXRhKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKGRhdGEudHlwZSA9PT0gJ3N5bmNocm9uaXplJykge1xuICAgICAgICAgICAgYXdhaXQgZmFrZVNlcnZlci5yZXNwb25kKHNvY2tldCwgZGF0YSk7XG4gICAgICAgICAgICBhd2FpdCBmYWtlU2VydmVyLnN5bmNBY2NvdW50KHNvY2tldCwgZGF0YSk7XG4gICAgICAgICAgfSBlbHNlIGlmIChkYXRhLnR5cGUgPT09ICd3YWl0U3luY2hyb25pemVkJyB8fCBkYXRhLnR5cGUgPT09ICdyZWZyZXNoTWFya2V0RGF0YVN1YnNjcmlwdGlvbnMnKSB7XG4gICAgICAgICAgICBhd2FpdCBmYWtlU2VydmVyLnJlc3BvbmQoc29ja2V0LCBkYXRhKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKGRhdGEudHlwZSA9PT0gJ2dldEFjY291bnRJbmZvcm1hdGlvbicpIHtcbiAgICAgICAgICAgIGF3YWl0IGZha2VTZXJ2ZXIucmVzcG9uZEFjY291bnRJbmZvcm1hdGlvbihzb2NrZXQsIGRhdGEpO1xuICAgICAgICAgIH0gZWxzZSBpZiAoZGF0YS50eXBlID09PSAndW5zdWJzY3JpYmUnKSB7XG4gICAgICAgICAgICBmYWtlU2VydmVyLmRlbGV0ZVN0YXR1c1Rhc2soZGF0YS5hY2NvdW50SWQpO1xuICAgICAgICAgICAgYXdhaXQgZmFrZVNlcnZlci5yZXNwb25kKHNvY2tldCwgZGF0YSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCBhY2NvdW50ID0gYXdhaXQgYXBpLm1ldGF0cmFkZXJBY2NvdW50QXBpLmdldEFjY291bnQoJ2FjY291bnRJZCcpO1xuICAgICAgY29ubmVjdGlvbiA9IGFjY291bnQuZ2V0U3RyZWFtaW5nQ29ubmVjdGlvbigpO1xuICAgICAgYXdhaXQgY29ubmVjdGlvbi5jb25uZWN0KCk7XG4gICAgICBjbG9jay50aWNrQXN5bmMoNTAwMCk7XG4gICAgICBhd2FpdCBjb25uZWN0aW9uLndhaXRTeW5jaHJvbml6ZWQoe3RpbWVvdXRJblNlY29uZHM6IDEwfSk7IFxuICAgICAgKGNvbm5lY3Rpb24uc3luY2hyb25pemVkICYmIGNvbm5lY3Rpb24udGVybWluYWxTdGF0ZS5jb25uZWN0ZWQgXG4gICAgICAmJiBjb25uZWN0aW9uLnRlcm1pbmFsU3RhdGUuY29ubmVjdGVkVG9Ccm9rZXIpLnNob3VsZC5lcXVhbCh0cnVlKTtcbiAgICAgIHN1YnNjcmliZUNvdW50ZXIuc2hvdWxkLmVxdWFsKDEpO1xuICAgICAgYXdhaXQgc2VydmVyc1swXS5lbWl0KCdzeW5jaHJvbml6YXRpb24nLCB7dHlwZTogJ2Rpc2Nvbm5lY3RlZCcsIGFjY291bnRJZDogJ2FjY291bnRJZCcsXG4gICAgICAgIGhvc3Q6ICdwcy1tcGEtMCcsIGluc3RhbmNlSW5kZXg6IDB9KTtcbiAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlcyA9PiBzZXRUaW1lb3V0KHJlcywgNTApKTsgXG4gICAgICBhd2FpdCBjbG9jay50aWNrQXN5bmMoMTAwMDAwKTsgXG4gICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXMgPT4gc2V0VGltZW91dChyZXMsIDUwKSk7IFxuICAgICAgc3Vic2NyaWJlQ291bnRlci5zaG91bGQuYmUuYWJvdmUoMSk7XG4gICAgICBjb25zdCBwcmV2aW91c1N1YnNjcmliZUNvdW50ZXIgPSBzdWJzY3JpYmVDb3VudGVyO1xuICAgICAgKGNvbm5lY3Rpb24uc3luY2hyb25pemVkICYmIGNvbm5lY3Rpb24udGVybWluYWxTdGF0ZS5jb25uZWN0ZWQgXG4gICAgICAmJiBjb25uZWN0aW9uLnRlcm1pbmFsU3RhdGUuY29ubmVjdGVkVG9Ccm9rZXIpLnNob3VsZC5lcXVhbCh0cnVlKTtcbiAgICAgIHNlcnZlcnNbMF0uZW1pdCgnc3luY2hyb25pemF0aW9uJywge3R5cGU6ICdkaXNjb25uZWN0ZWQnLCBhY2NvdW50SWQ6ICdhY2NvdW50SWQnLFxuICAgICAgICBob3N0OiAncHMtbXBhLTAnLCBpbnN0YW5jZUluZGV4OiAwfSk7XG4gICAgICBhd2FpdCBjb25uZWN0aW9uLmNsb3NlKCk7XG4gICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXMgPT4gc2V0VGltZW91dChyZXMsIDUwKSk7IFxuICAgICAgYXdhaXQgY2xvY2sudGlja0FzeW5jKDEwMDAwMCk7IFxuICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzID0+IHNldFRpbWVvdXQocmVzLCA1MCkpOyBcbiAgICAgIHNpbm9uLmFzc2VydC5tYXRjaChzdWJzY3JpYmVDb3VudGVyLCBwcmV2aW91c1N1YnNjcmliZUNvdW50ZXIpO1xuICAgICAgY29ubmVjdGlvbi5zeW5jaHJvbml6ZWQuc2hvdWxkLmVxdWFsKGZhbHNlKTtcbiAgICAgIGNvbm5lY3Rpb24udGVybWluYWxTdGF0ZS5jb25uZWN0ZWQuc2hvdWxkLmVxdWFsKGZhbHNlKTtcbiAgICAgIGNvbm5lY3Rpb24udGVybWluYWxTdGF0ZS5jb25uZWN0ZWRUb0Jyb2tlci5zaG91bGQuZXF1YWwoZmFsc2UpO1xuICAgIH0pLnRpbWVvdXQoMTAwMDApO1xuXG4gICAgaXQoJ3Nob3VsZCBub3QgcmVzdWJzY3JpYmUgb24gdGltZW91dCBpZiBjb25uZWN0aW9uIGlzIGNsb3NlZCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGFjY291bnQgPSBhd2FpdCBhcGkubWV0YXRyYWRlckFjY291bnRBcGkuZ2V0QWNjb3VudCgnYWNjb3VudElkJyk7XG4gICAgICBjb25uZWN0aW9uID0gYWNjb3VudC5nZXRTdHJlYW1pbmdDb25uZWN0aW9uKCk7XG4gICAgICBhd2FpdCBjb25uZWN0aW9uLmNvbm5lY3QoKTtcbiAgICAgIGNsb2NrLnRpY2tBc3luYyg1MDAwKTsgXG4gICAgICBhd2FpdCBjb25uZWN0aW9uLndhaXRTeW5jaHJvbml6ZWQoe3RpbWVvdXRJblNlY29uZHM6IDEwfSk7IFxuICAgICAgZmFrZVNlcnZlci5kZWxldGVTdGF0dXNUYXNrKCdhY2NvdW50SWQnKTtcbiAgICAgIGNvbm5lY3Rpb24uc3luY2hyb25pemVkLnNob3VsZC5lcXVhbCh0cnVlKTtcbiAgICAgIGF3YWl0IGNvbm5lY3Rpb24uY2xvc2UoKTtcbiAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlcyA9PiBzZXRUaW1lb3V0KHJlcywgMTAwKSk7IFxuICAgICAgYXdhaXQgY2xvY2sudGlja0FzeW5jKDYyMDAwKTsgXG4gICAgICBjb25uZWN0aW9uLnN5bmNocm9uaXplZC5zaG91bGQuZXF1YWwoZmFsc2UpO1xuICAgIH0pLnRpbWVvdXQoMTAwMDApO1xuXG4gICAgaXQoJ3Nob3VsZCBub3Qgc2VuZCBtdWx0aXBsZSBzdWJzY3JpYmUgcmVxdWVzdHMgaWYgc3RhdHVzIGFycml2ZXMgZmFzdGVyIHRoYW4gc3Vic2NyaWJlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbGV0IHN1YnNjcmliZUNvdW50ZXIgPSAwO1xuICAgICAgY29uc3QgYWNjb3VudCA9IGF3YWl0IGFwaS5tZXRhdHJhZGVyQWNjb3VudEFwaS5nZXRBY2NvdW50KCdhY2NvdW50SWQnKTtcbiAgICAgIGNvbm5lY3Rpb24gPSBhY2NvdW50LmdldFN0cmVhbWluZ0Nvbm5lY3Rpb24oKTtcbiAgICAgIGF3YWl0IGNvbm5lY3Rpb24uY29ubmVjdCgpO1xuICAgICAgY2xvY2sudGlja0FzeW5jKDUwMDApOyBcbiAgICAgIGF3YWl0IGNvbm5lY3Rpb24ud2FpdFN5bmNocm9uaXplZCh7dGltZW91dEluU2Vjb25kczogMTB9KTsgXG4gICAgICBmYWtlU2VydmVyLmRpc2FibGVTeW5jKCk7XG4gICAgICBmYWtlU2VydmVyLmRlbGV0ZVN0YXR1c1Rhc2soJ2FjY291bnRJZCcpO1xuICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzID0+IHNldFRpbWVvdXQocmVzLCA1MCkpOyBcbiAgICAgIGF3YWl0IGNsb2NrLnRpY2tBc3luYygxMjAwMDApOyBcbiAgICAgIGNvbm5lY3Rpb24uc3luY2hyb25pemVkLnNob3VsZC5lcXVhbChmYWxzZSk7XG4gICAgICBjb25uZWN0aW9uLnRlcm1pbmFsU3RhdGUuY29ubmVjdGVkLnNob3VsZC5lcXVhbChmYWxzZSk7XG4gICAgICBjb25uZWN0aW9uLnRlcm1pbmFsU3RhdGUuY29ubmVjdGVkVG9Ccm9rZXIuc2hvdWxkLmVxdWFsKGZhbHNlKTtcblxuICAgICAgc2VydmVyLnJlbW92ZUFsbExpc3RlbmVycygncmVxdWVzdCcpO1xuICAgICAgc2VydmVyMS5yZW1vdmVBbGxMaXN0ZW5lcnMoJ3JlcXVlc3QnKTtcbiAgICAgIC8vZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGNvbXBsZXhpdHlcbiAgICAgIHNlcnZlci5vbigncmVxdWVzdCcsIGFzeW5jIGRhdGEgPT4ge1xuICAgICAgICBpZihkYXRhLnR5cGUgPT09ICdzdWJzY3JpYmUnKSB7XG4gICAgICAgICAgc3Vic2NyaWJlQ291bnRlcisrO1xuICAgICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlcyA9PiBzZXRUaW1lb3V0KHJlcywgMjgwMCkpOyBcbiAgICAgICAgICBhd2FpdCBmYWtlU2VydmVyLnJlc3BvbmQoc2VydmVyLCBkYXRhKTtcbiAgICAgICAgICBmYWtlU2VydmVyLmRlbGV0ZVN0YXR1c1Rhc2soZGF0YS5hY2NvdW50SWQpO1xuICAgICAgICAgIGZha2VTZXJ2ZXIuc3RhdHVzVGFza3MuYWNjb3VudElkID0gc2V0SW50ZXJ2YWwoKCkgPT4gZmFrZVNlcnZlci5lbWl0U3RhdHVzKHNlcnZlciwgZGF0YS5hY2NvdW50SWQpLCAxMDAwKTtcbiAgICAgICAgICBhd2FpdCBmYWtlU2VydmVyLmF1dGhlbnRpY2F0ZShzZXJ2ZXIsIGRhdGEpO1xuICAgICAgICB9IGVsc2UgaWYgKGRhdGEudHlwZSA9PT0gJ3N5bmNocm9uaXplJykge1xuICAgICAgICAgIGF3YWl0IGZha2VTZXJ2ZXIucmVzcG9uZChzZXJ2ZXIsIGRhdGEpO1xuICAgICAgICAgIGF3YWl0IGZha2VTZXJ2ZXIuc3luY0FjY291bnQoc2VydmVyLCBkYXRhKTtcbiAgICAgICAgfSBlbHNlIGlmIChkYXRhLnR5cGUgPT09ICd3YWl0U3luY2hyb25pemVkJyB8fCBkYXRhLnR5cGUgPT09ICdyZWZyZXNoTWFya2V0RGF0YVN1YnNjcmlwdGlvbnMnKSB7XG4gICAgICAgICAgYXdhaXQgZmFrZVNlcnZlci5yZXNwb25kKHNlcnZlciwgZGF0YSk7XG4gICAgICAgIH0gZWxzZSBpZiAoZGF0YS50eXBlID09PSAnZ2V0QWNjb3VudEluZm9ybWF0aW9uJykge1xuICAgICAgICAgIGF3YWl0IGZha2VTZXJ2ZXIucmVzcG9uZEFjY291bnRJbmZvcm1hdGlvbihzZXJ2ZXIsIGRhdGEpO1xuICAgICAgICB9IGVsc2UgaWYgKGRhdGEudHlwZSA9PT0gJ3Vuc3Vic2NyaWJlJykge1xuICAgICAgICAgIGZha2VTZXJ2ZXIuZGVsZXRlU3RhdHVzVGFzayhkYXRhLmFjY291bnRJZCk7XG4gICAgICAgICAgYXdhaXQgZmFrZVNlcnZlci5yZXNwb25kKHNlcnZlciwgZGF0YSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgZmFrZVNlcnZlci5zdGF0dXNUYXNrcy5hY2NvdW50SWQgPSBzZXRJbnRlcnZhbCgoKSA9PiBmYWtlU2VydmVyLmVtaXRTdGF0dXMoc2VydmVyLCAnYWNjb3VudElkJyksIDEwMDApO1xuICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzID0+IHNldFRpbWVvdXQocmVzLCAxMDApKTsgXG4gICAgICBhd2FpdCBjbG9jay50aWNrQXN5bmMoMjAwMDAwKTsgXG4gICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXMgPT4gc2V0VGltZW91dChyZXMsIDEwMCkpOyBcbiAgICAgIGF3YWl0IGNsb2NrLnRpY2tBc3luYyg1MDAwKTsgXG4gICAgICAoY29ubmVjdGlvbi5zeW5jaHJvbml6ZWQgJiYgY29ubmVjdGlvbi50ZXJtaW5hbFN0YXRlLmNvbm5lY3RlZCBcbiAgICAgICYmIGNvbm5lY3Rpb24udGVybWluYWxTdGF0ZS5jb25uZWN0ZWRUb0Jyb2tlcikuc2hvdWxkLmVxdWFsKHRydWUpO1xuICAgICAgc2lub24uYXNzZXJ0Lm1hdGNoKHN1YnNjcmliZUNvdW50ZXIsIDEpO1xuICAgIH0pLnRpbWVvdXQoMTAwMDApO1xuXG4gICAgaXQoJ3Nob3VsZCBub3QgdXBkYXRlIHByaWNlIGZyb20gb2xkIHByaWNlIHBhY2tldHMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBhY2NvdW50ID0gYXdhaXQgYXBpLm1ldGF0cmFkZXJBY2NvdW50QXBpLmdldEFjY291bnQoJ2FjY291bnRJZCcpO1xuICAgICAgY29ubmVjdGlvbiA9IGFjY291bnQuZ2V0U3RyZWFtaW5nQ29ubmVjdGlvbigpO1xuICAgICAgYXdhaXQgY29ubmVjdGlvbi5jb25uZWN0KCk7XG4gICAgICBjbG9jay50aWNrQXN5bmMoNTAwMCk7IFxuICAgICAgYXdhaXQgY29ubmVjdGlvbi53YWl0U3luY2hyb25pemVkKHt0aW1lb3V0SW5TZWNvbmRzOiAxMH0pO1xuICAgICAgY29uc3QgcHJpY2VzID0ge1xuICAgICAgICBwcmljZXM6IFt7XG4gICAgICAgICAgdGltZTogbmV3IERhdGUoRGF0ZS5ub3coKSAtIDEwMDAwKSwgc3ltYm9sOiAnRVVSVVNEJywgYmlkOiAxLCBhc2s6IDEuMVxuICAgICAgICB9XSxcbiAgICAgICAgYWNjb3VudElkOiAnYWNjb3VudElkJywgaW5zdGFuY2VJbmRleDogMCwgaG9zdDogJ3BzLW1wYS0wJywgdHlwZTogJ3ByaWNlcydcbiAgICAgIH07XG4gICAgICBhd2FpdCBzZXJ2ZXIuZW1pdCgnc3luY2hyb25pemF0aW9uJywgcHJpY2VzKTtcbiAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlcyA9PiBzZXRUaW1lb3V0KHJlcywgMTAwKSk7IFxuICAgICAgc2lub24uYXNzZXJ0Lm1hdGNoKGNvbm5lY3Rpb24udGVybWluYWxTdGF0ZS5wcmljZSgnRVVSVVNEJykuYmlkLCAxKTtcblxuICAgICAgcHJpY2VzLnByaWNlc1swXS50aW1lID0gbmV3IERhdGUoRGF0ZS5ub3coKSAtIDIwMDAwKTtcbiAgICAgIHByaWNlcy5wcmljZXNbMF0uYmlkID0gMS4xO1xuICAgICAgYXdhaXQgc2VydmVyLmVtaXQoJ3N5bmNocm9uaXphdGlvbicsIHByaWNlcyk7XG4gICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXMgPT4gc2V0VGltZW91dChyZXMsIDEwMCkpOyBcbiAgICAgIHNpbm9uLmFzc2VydC5tYXRjaChjb25uZWN0aW9uLnRlcm1pbmFsU3RhdGUucHJpY2UoJ0VVUlVTRCcpLmJpZCwgMSk7XG5cbiAgICAgIHByaWNlcy5wcmljZXNbMF0udGltZSA9IG5ldyBEYXRlKCk7XG4gICAgICBwcmljZXMucHJpY2VzWzBdLmJpZCA9IDEuMjtcbiAgICAgIGF3YWl0IHNlcnZlci5lbWl0KCdzeW5jaHJvbml6YXRpb24nLCBwcmljZXMpO1xuICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzID0+IHNldFRpbWVvdXQocmVzLCAxMDApKTsgXG4gICAgICBzaW5vbi5hc3NlcnQubWF0Y2goY29ubmVjdGlvbi50ZXJtaW5hbFN0YXRlLnByaWNlKCdFVVJVU0QnKS5iaWQsIDEuMik7XG5cbiAgICB9KS50aW1lb3V0KDEwMDAwKTtcblxuICAgIGRlc2NyaWJlKCdSZWdpb24gcmVwbGljYSBzdXBwb3J0JywgKCkgPT4ge1xuXG4gICAgICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICAgICAgYXBpLm1ldGF0cmFkZXJBY2NvdW50QXBpLl9tZXRhdHJhZGVyQWNjb3VudENsaWVudC5nZXRBY2NvdW50ID0gKGFjY291bnRJZCkgPT4gKHtcbiAgICAgICAgICBfaWQ6ICBhY2NvdW50SWQsXG4gICAgICAgICAgbG9naW46ICc1MDE5NDk4OCcsXG4gICAgICAgICAgbmFtZTogJ210NWEnLFxuICAgICAgICAgIHJlZ2lvbjogJ3ZpbnQtaGlsbCcsXG4gICAgICAgICAgcmVsaWFiaWxpdHk6ICdyZWd1bGFyJyxcbiAgICAgICAgICBzZXJ2ZXI6ICdJQ01hcmtldHNTQy1EZW1vJyxcbiAgICAgICAgICBwcm92aXNpb25pbmdQcm9maWxlSWQ6ICdmOWNlMWYxMi1lNzIwLTRiOWEtOTQ3Ny1jMmQ0Y2IyNWYwNzYnLFxuICAgICAgICAgIG1hZ2ljOiAxMjM0NTYsXG4gICAgICAgICAgYXBwbGljYXRpb246ICdNZXRhQXBpJyxcbiAgICAgICAgICBjb25uZWN0aW9uU3RhdHVzOiAnQ09OTkVDVEVEJyxcbiAgICAgICAgICBzdGF0ZTogJ0RFUExPWUVEJyxcbiAgICAgICAgICB0eXBlOiAnY2xvdWQnLFxuICAgICAgICAgIGFjY2Vzc1Rva2VuOiAnMlJVbm9IMWxkR2JuRW5lQ29xUlRnSTRRTzFYT21WemJINUVWb1FzQScsXG4gICAgICAgICAgYWNjb3VudFJlcGxpY2FzOiBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICdfaWQnOiAnYWNjb3VudElkUmVwbGljYScsXG4gICAgICAgICAgICAgICdxdW90ZVN0cmVhbWluZ0ludGVydmFsSW5TZWNvbmRzJzogMi41LFxuICAgICAgICAgICAgICAncmVnaW9uJzogJ25ldy15b3JrJyxcbiAgICAgICAgICAgICAgJ21hZ2ljJzogMCxcbiAgICAgICAgICAgICAgJ3N5bWJvbCc6ICdFVVJVU0QnLFxuICAgICAgICAgICAgICAnY29weUZhY3RvcnlSZXNvdXJjZVNsb3RzJzogMSxcbiAgICAgICAgICAgICAgJ3Jlc291cmNlU2xvdHMnOiAxLFxuICAgICAgICAgICAgICAnZXh0ZW5zaW9ucyc6IFtdLFxuICAgICAgICAgICAgICAndGFncyc6IFtdLFxuICAgICAgICAgICAgICAnc3RhdGUnOiAnREVQTE9ZRUQnLFxuICAgICAgICAgICAgICAnY29ubmVjdGlvblN0YXR1cyc6ICdDT05ORUNURUQnLFxuICAgICAgICAgICAgICAncmVsaWFiaWxpdHknOiAncmVndWxhcidcbiAgICAgICAgICAgIH1cbiAgICAgICAgICBdLFxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIHN5bmNocm9uaXplIGFjY291bnQnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGFjY291bnQgPSBhd2FpdCBhcGkubWV0YXRyYWRlckFjY291bnRBcGkuZ2V0QWNjb3VudCgnYWNjb3VudElkJyk7XG4gICAgICAgIGNvbm5lY3Rpb24gPSBhY2NvdW50LmdldFN0cmVhbWluZ0Nvbm5lY3Rpb24oKTtcbiAgICAgICAgYXdhaXQgY29ubmVjdGlvbi5jb25uZWN0KCk7XG4gICAgICAgIGNsb2NrLnRpY2tBc3luYyg1MDAwKTsgXG4gICAgICAgIGF3YWl0IGNvbm5lY3Rpb24ud2FpdFN5bmNocm9uaXplZCh7dGltZW91dEluU2Vjb25kczogMTB9KTtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBjb25uZWN0aW9uLnRlcm1pbmFsU3RhdGUuYWNjb3VudEluZm9ybWF0aW9uO1xuICAgICAgICBzaW5vbi5hc3NlcnQubWF0Y2gocmVzcG9uc2UsIGFjY291bnRJbmZvcm1hdGlvbik7XG4gICAgICAgIChjb25uZWN0aW9uLnN5bmNocm9uaXplZCAmJiBjb25uZWN0aW9uLnRlcm1pbmFsU3RhdGUuY29ubmVjdGVkIFxuICAgICAgICAmJiBjb25uZWN0aW9uLnRlcm1pbmFsU3RhdGUuY29ubmVjdGVkVG9Ccm9rZXIpLnNob3VsZC5lcXVhbCh0cnVlKTtcbiAgICAgIH0pLnRpbWVvdXQoMTAwMDApO1xuXG4gICAgICBpdCgnc2hvdWxkIHN5bmNocm9uaXplIHVzaW5nIGEgcmVwbGljYScsIGFzeW5jICgpID0+IHtcbiAgICAgICAgbGV0IGNhbGxlZEFjY291bnRJZDtcblxuICAgICAgICBjb25zdCBhY2NvdW50ID0gYXdhaXQgYXBpLm1ldGF0cmFkZXJBY2NvdW50QXBpLmdldEFjY291bnQoJ2FjY291bnRJZCcpO1xuICAgICAgICBmYWtlU2VydmVyLmlvLnJlbW92ZUFsbExpc3RlbmVycygnY29ubmVjdCcpO1xuICAgICAgICBmYWtlU2VydmVyLmlvLm9uKCdjb25uZWN0Jywgc29ja2V0ID0+IHtcbiAgICAgICAgICBzZXJ2ZXIgPSBzb2NrZXQ7XG4gICAgICAgICAgc29ja2V0LmVtaXQoJ3Jlc3BvbnNlJywge3R5cGU6ICdyZXNwb25zZSd9KTtcbiAgICAgICAgICBzb2NrZXQucmVtb3ZlQWxsTGlzdGVuZXJzKCdyZXF1ZXN0Jyk7XG4gICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGNvbXBsZXhpdHlcbiAgICAgICAgICBzb2NrZXQub24oJ3JlcXVlc3QnLCBhc3luYyBkYXRhID0+IHtcbiAgICAgICAgICAgIGlmKGRhdGEuaW5zdGFuY2VJbmRleCA9PT0gMSkge1xuICAgICAgICAgICAgICBhd2FpdCBmYWtlU2VydmVyLnJlc3BvbmQoc29ja2V0LCBkYXRhKTtcbiAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYoZGF0YS50eXBlID09PSAnc3Vic2NyaWJlJykge1xuICAgICAgICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXMgPT4gc2V0VGltZW91dChyZXMsIDIwMCkpOyBcbiAgICAgICAgICAgICAgYXdhaXQgZmFrZVNlcnZlci5yZXNwb25kKHNvY2tldCwgZGF0YSk7XG4gICAgICAgICAgICAgIGZha2VTZXJ2ZXIuc3RhdHVzVGFza3NbZGF0YS5hY2NvdW50SWRdID0gXG4gICAgICAgICAgICAgICAgc2V0SW50ZXJ2YWwoKCkgPT4gZmFrZVNlcnZlci5lbWl0U3RhdHVzKHNvY2tldCwgZGF0YS5hY2NvdW50SWQpLCAxMDApO1xuICAgICAgICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXMgPT4gc2V0VGltZW91dChyZXMsIDUwKSk7IFxuICAgICAgICAgICAgICBhd2FpdCBmYWtlU2VydmVyLmF1dGhlbnRpY2F0ZShzb2NrZXQsIGRhdGEpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChkYXRhLnR5cGUgPT09ICdzeW5jaHJvbml6ZScpIHtcbiAgICAgICAgICAgICAgYXdhaXQgZmFrZVNlcnZlci5yZXNwb25kKHNvY2tldCwgZGF0YSk7XG4gICAgICAgICAgICAgIGF3YWl0IGZha2VTZXJ2ZXIuc3luY0FjY291bnQoc29ja2V0LCBkYXRhKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZGF0YS50eXBlID09PSAnd2FpdFN5bmNocm9uaXplZCcgfHwgZGF0YS50eXBlID09PSAncmVmcmVzaE1hcmtldERhdGFTdWJzY3JpcHRpb25zJykge1xuICAgICAgICAgICAgICBjYWxsZWRBY2NvdW50SWQgPSBkYXRhLmFjY291bnRJZDtcbiAgICAgICAgICAgICAgYXdhaXQgZmFrZVNlcnZlci5yZXNwb25kKHNvY2tldCwgZGF0YSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGRhdGEudHlwZSA9PT0gJ2dldEFjY291bnRJbmZvcm1hdGlvbicpIHtcbiAgICAgICAgICAgICAgYXdhaXQgZmFrZVNlcnZlci5yZXNwb25kQWNjb3VudEluZm9ybWF0aW9uKHNvY2tldCwgZGF0YSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGRhdGEudHlwZSA9PT0gJ3Vuc3Vic2NyaWJlJykge1xuICAgICAgICAgICAgICBmYWtlU2VydmVyLmRlbGV0ZVN0YXR1c1Rhc2soZGF0YS5hY2NvdW50SWQpO1xuICAgICAgICAgICAgICBhd2FpdCBmYWtlU2VydmVyLnJlc3BvbmQoc29ja2V0LCBkYXRhKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICBjb25uZWN0aW9uID0gYWNjb3VudC5nZXRTdHJlYW1pbmdDb25uZWN0aW9uKCk7XG4gICAgICAgIGNvbm5lY3Rpb24uX3dlYnNvY2tldENsaWVudC5fbGF0ZW5jeVNlcnZpY2UuX2xhdGVuY3lDYWNoZSA9IHsndmludC1oaWxsJzogNTAwLCAnbmV3LXlvcmsnOiAxMDB9O1xuICAgICAgICBhd2FpdCBjb25uZWN0aW9uLmNvbm5lY3QoKTtcbiAgICAgICAgY2xvY2sudGlja0FzeW5jKDUwMDApOyBcbiAgICAgICAgYXdhaXQgY29ubmVjdGlvbi53YWl0U3luY2hyb25pemVkKHt0aW1lb3V0SW5TZWNvbmRzOiAxMH0pO1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IGNvbm5lY3Rpb24udGVybWluYWxTdGF0ZS5hY2NvdW50SW5mb3JtYXRpb247XG4gICAgICAgIHNpbm9uLmFzc2VydC5tYXRjaChyZXNwb25zZSwgYWNjb3VudEluZm9ybWF0aW9uKTtcbiAgICAgICAgc2lub24uYXNzZXJ0Lm1hdGNoKGNhbGxlZEFjY291bnRJZCwgJ2FjY291bnRJZFJlcGxpY2EnKTtcbiAgICAgICAgKGNvbm5lY3Rpb24uc3luY2hyb25pemVkICYmIGNvbm5lY3Rpb24udGVybWluYWxTdGF0ZS5jb25uZWN0ZWQgXG4gICAgICAgICYmIGNvbm5lY3Rpb24udGVybWluYWxTdGF0ZS5jb25uZWN0ZWRUb0Jyb2tlcikuc2hvdWxkLmVxdWFsKHRydWUpO1xuICAgICAgfSkudGltZW91dCgxMDAwMCk7XG5cbiAgICAgIGl0KCdzaG91bGQgcmVzeW5jaHJvbml6ZSBpZiB1c2VkIGFjY291bnQgd2FzIHVuZGVwbG95ZWQsIHRoZW4gcmV0dXJuIHdoZW4gcmVkZXBsb3llZCcsIGFzeW5jICgpID0+IHtcbiAgICAgICAgbGV0IGNhbGxlZEFjY291bnRJZDtcbiAgICAgICAgbGV0IHVuc3Vic2NyaWJlZEFjY291bnRJZDtcbiAgICAgICAgY29uc3QgYWxsb3dlZEFjY291bnRzID0gWydhY2NvdW50SWQnLCAnYWNjb3VudElkUmVwbGljYSddO1xuXG4gICAgICAgIGNvbnN0IGFjY291bnQgPSBhd2FpdCBhcGkubWV0YXRyYWRlckFjY291bnRBcGkuZ2V0QWNjb3VudCgnYWNjb3VudElkJyk7XG4gICAgICAgIGZha2VTZXJ2ZXIuaW8ucmVtb3ZlQWxsTGlzdGVuZXJzKCdjb25uZWN0Jyk7XG4gICAgICAgIGZha2VTZXJ2ZXIuaW8ub24oJ2Nvbm5lY3QnLCBzb2NrZXQgPT4ge1xuICAgICAgICAgIHNlcnZlciA9IHNvY2tldDtcbiAgICAgICAgICBzb2NrZXQuZW1pdCgncmVzcG9uc2UnLCB7dHlwZTogJ3Jlc3BvbnNlJ30pO1xuICAgICAgICAgIHNvY2tldC5yZW1vdmVBbGxMaXN0ZW5lcnMoJ3JlcXVlc3QnKTtcbiAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgY29tcGxleGl0eVxuICAgICAgICAgIHNvY2tldC5vbigncmVxdWVzdCcsIGFzeW5jIGRhdGEgPT4ge1xuICAgICAgICAgICAgaWYoZGF0YS5pbnN0YW5jZUluZGV4ID09PSAxKSB7XG4gICAgICAgICAgICAgIGF3YWl0IGZha2VTZXJ2ZXIucmVzcG9uZChzb2NrZXQsIGRhdGEpO1xuICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZighYWxsb3dlZEFjY291bnRzLmluY2x1ZGVzKGRhdGEuYWNjb3VudElkKSkge1xuICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZihkYXRhLnR5cGUgPT09ICdzdWJzY3JpYmUnKSB7XG4gICAgICAgICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlcyA9PiBzZXRUaW1lb3V0KHJlcywgMjAwKSk7IFxuICAgICAgICAgICAgICBhd2FpdCBmYWtlU2VydmVyLnJlc3BvbmQoc29ja2V0LCBkYXRhKTtcbiAgICAgICAgICAgICAgZmFrZVNlcnZlci5zdGF0dXNUYXNrc1tkYXRhLmFjY291bnRJZF0gPSBcbiAgICAgICAgICAgICAgICBzZXRJbnRlcnZhbCgoKSA9PiBmYWtlU2VydmVyLmVtaXRTdGF0dXMoc29ja2V0LCBkYXRhLmFjY291bnRJZCksIDEwMCk7XG4gICAgICAgICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlcyA9PiBzZXRUaW1lb3V0KHJlcywgNTApKTsgXG4gICAgICAgICAgICAgIGF3YWl0IGZha2VTZXJ2ZXIuYXV0aGVudGljYXRlKHNvY2tldCwgZGF0YSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGRhdGEudHlwZSA9PT0gJ3N5bmNocm9uaXplJykge1xuICAgICAgICAgICAgICBjYWxsZWRBY2NvdW50SWQgPSBkYXRhLmFjY291bnRJZDtcbiAgICAgICAgICAgICAgYXdhaXQgZmFrZVNlcnZlci5yZXNwb25kKHNvY2tldCwgZGF0YSk7XG4gICAgICAgICAgICAgIGF3YWl0IGZha2VTZXJ2ZXIuc3luY0FjY291bnQoc29ja2V0LCBkYXRhKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZGF0YS50eXBlID09PSAnd2FpdFN5bmNocm9uaXplZCcgfHwgZGF0YS50eXBlID09PSAncmVmcmVzaE1hcmtldERhdGFTdWJzY3JpcHRpb25zJykge1xuICAgICAgICAgICAgICBjYWxsZWRBY2NvdW50SWQgPSBkYXRhLmFjY291bnRJZDtcbiAgICAgICAgICAgICAgYXdhaXQgZmFrZVNlcnZlci5yZXNwb25kKHNvY2tldCwgZGF0YSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGRhdGEudHlwZSA9PT0gJ2dldEFjY291bnRJbmZvcm1hdGlvbicpIHtcbiAgICAgICAgICAgICAgYXdhaXQgZmFrZVNlcnZlci5yZXNwb25kQWNjb3VudEluZm9ybWF0aW9uKHNvY2tldCwgZGF0YSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGRhdGEudHlwZSA9PT0gJ3Vuc3Vic2NyaWJlJykge1xuICAgICAgICAgICAgICB1bnN1YnNjcmliZWRBY2NvdW50SWQgPSBkYXRhLmFjY291bnRJZDtcbiAgICAgICAgICAgICAgZmFrZVNlcnZlci5kZWxldGVTdGF0dXNUYXNrKGRhdGEuYWNjb3VudElkKTtcbiAgICAgICAgICAgICAgYXdhaXQgZmFrZVNlcnZlci5yZXNwb25kKHNvY2tldCwgZGF0YSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgY29ubmVjdGlvbiA9IGFjY291bnQuZ2V0U3RyZWFtaW5nQ29ubmVjdGlvbigpO1xuICAgICAgICBjb25uZWN0aW9uLl93ZWJzb2NrZXRDbGllbnQuX2xhdGVuY3lTZXJ2aWNlLl9sYXRlbmN5Q2FjaGUgPSB7J3ZpbnQtaGlsbCc6IDUwMCwgJ25ldy15b3JrJzogMTAwfTtcbiAgICAgICAgYXdhaXQgY29ubmVjdGlvbi5jb25uZWN0KCk7XG4gICAgICAgIGNsb2NrLnRpY2tBc3luYyg1MDAwKTsgXG4gICAgICAgIGF3YWl0IGNvbm5lY3Rpb24ud2FpdFN5bmNocm9uaXplZCh7dGltZW91dEluU2Vjb25kczogMTB9KTtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBjb25uZWN0aW9uLnRlcm1pbmFsU3RhdGUuYWNjb3VudEluZm9ybWF0aW9uO1xuICAgICAgICBzaW5vbi5hc3NlcnQubWF0Y2gocmVzcG9uc2UsIGFjY291bnRJbmZvcm1hdGlvbik7XG4gICAgICAgIHNpbm9uLmFzc2VydC5tYXRjaChjYWxsZWRBY2NvdW50SWQsICdhY2NvdW50SWRSZXBsaWNhJyk7XG4gICAgICAgIHNpbm9uLmFzc2VydC5tYXRjaCh1bnN1YnNjcmliZWRBY2NvdW50SWQsICdhY2NvdW50SWQnKTtcbiAgICAgICAgKGNvbm5lY3Rpb24uc3luY2hyb25pemVkICYmIGNvbm5lY3Rpb24udGVybWluYWxTdGF0ZS5jb25uZWN0ZWQgXG4gICAgICAgICAgJiYgY29ubmVjdGlvbi50ZXJtaW5hbFN0YXRlLmNvbm5lY3RlZFRvQnJva2VyKS5zaG91bGQuZXF1YWwodHJ1ZSk7XG4gICAgICAgIGFsbG93ZWRBY2NvdW50cy5zcGxpY2UoMSwgMSk7XG4gICAgICAgIGZha2VTZXJ2ZXIuZGVsZXRlU3RhdHVzVGFzaygnYWNjb3VudElkUmVwbGljYScpO1xuICAgICAgICBhd2FpdCBjbG9jay50aWNrQXN5bmMoNjEwMDApO1xuICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXMgPT4gc2V0VGltZW91dChyZXMsIDUwKSk7XG4gICAgICAgIHNpbm9uLmFzc2VydC5tYXRjaChjYWxsZWRBY2NvdW50SWQsICdhY2NvdW50SWQnKTtcbiAgICAgICAgc2lub24uYXNzZXJ0Lm1hdGNoKHVuc3Vic2NyaWJlZEFjY291bnRJZCwgJ2FjY291bnRJZCcpO1xuICAgICAgICAoY29ubmVjdGlvbi5zeW5jaHJvbml6ZWQgJiYgY29ubmVjdGlvbi50ZXJtaW5hbFN0YXRlLmNvbm5lY3RlZCBcbiAgICAgICAgICAmJiBjb25uZWN0aW9uLnRlcm1pbmFsU3RhdGUuY29ubmVjdGVkVG9Ccm9rZXIpLnNob3VsZC5lcXVhbCh0cnVlKTtcbiAgICAgICAgYWxsb3dlZEFjY291bnRzLnNwbGljZSgxLCAxLCAnYWNjb3VudElkUmVwbGljYScpO1xuICAgICAgICBhd2FpdCBmYWtlU2VydmVyLmVtaXRTdGF0dXMoc2VydmVyLCAnYWNjb3VudElkUmVwbGljYScpO1xuICAgICAgICBhd2FpdCBjbG9jay50aWNrQXN5bmMoNTAwMCk7XG4gICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlcyA9PiBzZXRUaW1lb3V0KHJlcywgNTApKTtcbiAgICAgICAgc2lub24uYXNzZXJ0Lm1hdGNoKGNhbGxlZEFjY291bnRJZCwgJ2FjY291bnRJZFJlcGxpY2EnKTtcbiAgICAgICAgc2lub24uYXNzZXJ0Lm1hdGNoKHVuc3Vic2NyaWJlZEFjY291bnRJZCwgJ2FjY291bnRJZCcpO1xuICAgICAgICAoY29ubmVjdGlvbi5zeW5jaHJvbml6ZWQgJiYgY29ubmVjdGlvbi50ZXJtaW5hbFN0YXRlLmNvbm5lY3RlZCBcbiAgICAgICAgJiYgY29ubmVjdGlvbi50ZXJtaW5hbFN0YXRlLmNvbm5lY3RlZFRvQnJva2VyKS5zaG91bGQuZXF1YWwodHJ1ZSk7XG4gICAgICB9KS50aW1lb3V0KDEwMDAwKTtcblxuICAgICAgaXQoJ3Nob3VsZCBjaGFuZ2UgcmVwbGljYSBpZiByZWdpb24gcHJpb3JpdHkgY2hhbmdlZCcsIGFzeW5jICgpID0+IHtcbiAgICAgICAgbGV0IGNhbGxlZEFjY291bnRJZDtcbiAgICAgICAgbGV0IHVuc3Vic2NyaWJlZEFjY291bnRJZDtcblxuICAgICAgICBjb25zdCBhY2NvdW50ID0gYXdhaXQgYXBpLm1ldGF0cmFkZXJBY2NvdW50QXBpLmdldEFjY291bnQoJ2FjY291bnRJZCcpO1xuICAgICAgICBmYWtlU2VydmVyLmlvLnJlbW92ZUFsbExpc3RlbmVycygnY29ubmVjdCcpO1xuICAgICAgICBmYWtlU2VydmVyLmlvLm9uKCdjb25uZWN0Jywgc29ja2V0ID0+IHtcbiAgICAgICAgICBzZXJ2ZXIgPSBzb2NrZXQ7XG4gICAgICAgICAgc29ja2V0LmVtaXQoJ3Jlc3BvbnNlJywge3R5cGU6ICdyZXNwb25zZSd9KTtcbiAgICAgICAgICBzb2NrZXQucmVtb3ZlQWxsTGlzdGVuZXJzKCdyZXF1ZXN0Jyk7XG4gICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGNvbXBsZXhpdHlcbiAgICAgICAgICBzb2NrZXQub24oJ3JlcXVlc3QnLCBhc3luYyBkYXRhID0+IHtcbiAgICAgICAgICAgIGlmKGRhdGEuaW5zdGFuY2VJbmRleCA9PT0gMSkge1xuICAgICAgICAgICAgICBhd2FpdCBmYWtlU2VydmVyLnJlc3BvbmQoc29ja2V0LCBkYXRhKTtcbiAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYoZGF0YS50eXBlID09PSAnc3Vic2NyaWJlJykge1xuICAgICAgICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXMgPT4gc2V0VGltZW91dChyZXMsIDIwMCkpOyBcbiAgICAgICAgICAgICAgYXdhaXQgZmFrZVNlcnZlci5yZXNwb25kKHNvY2tldCwgZGF0YSk7XG4gICAgICAgICAgICAgIGZha2VTZXJ2ZXIuc3RhdHVzVGFza3NbZGF0YS5hY2NvdW50SWRdID0gXG4gICAgICAgICAgICAgICAgc2V0SW50ZXJ2YWwoKCkgPT4gZmFrZVNlcnZlci5lbWl0U3RhdHVzKHNvY2tldCwgZGF0YS5hY2NvdW50SWQpLCAxMDApO1xuICAgICAgICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXMgPT4gc2V0VGltZW91dChyZXMsIDUwKSk7IFxuICAgICAgICAgICAgICBhd2FpdCBmYWtlU2VydmVyLmF1dGhlbnRpY2F0ZShzb2NrZXQsIGRhdGEpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChkYXRhLnR5cGUgPT09ICdzeW5jaHJvbml6ZScpIHtcbiAgICAgICAgICAgICAgY2FsbGVkQWNjb3VudElkID0gZGF0YS5hY2NvdW50SWQ7XG4gICAgICAgICAgICAgIGF3YWl0IGZha2VTZXJ2ZXIucmVzcG9uZChzb2NrZXQsIGRhdGEpO1xuICAgICAgICAgICAgICBhd2FpdCBmYWtlU2VydmVyLnN5bmNBY2NvdW50KHNvY2tldCwgZGF0YSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGRhdGEudHlwZSA9PT0gJ3dhaXRTeW5jaHJvbml6ZWQnIHx8IGRhdGEudHlwZSA9PT0gJ3JlZnJlc2hNYXJrZXREYXRhU3Vic2NyaXB0aW9ucycpIHtcbiAgICAgICAgICAgICAgY2FsbGVkQWNjb3VudElkID0gZGF0YS5hY2NvdW50SWQ7XG4gICAgICAgICAgICAgIGF3YWl0IGZha2VTZXJ2ZXIucmVzcG9uZChzb2NrZXQsIGRhdGEpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChkYXRhLnR5cGUgPT09ICdnZXRBY2NvdW50SW5mb3JtYXRpb24nKSB7XG4gICAgICAgICAgICAgIGF3YWl0IGZha2VTZXJ2ZXIucmVzcG9uZEFjY291bnRJbmZvcm1hdGlvbihzb2NrZXQsIGRhdGEpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChkYXRhLnR5cGUgPT09ICd1bnN1YnNjcmliZScpIHtcbiAgICAgICAgICAgICAgdW5zdWJzY3JpYmVkQWNjb3VudElkID0gZGF0YS5hY2NvdW50SWQ7XG4gICAgICAgICAgICAgIGZha2VTZXJ2ZXIuZGVsZXRlU3RhdHVzVGFzayhkYXRhLmFjY291bnRJZCk7XG4gICAgICAgICAgICAgIGF3YWl0IGZha2VTZXJ2ZXIucmVzcG9uZChzb2NrZXQsIGRhdGEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIGNvbm5lY3Rpb24gPSBhY2NvdW50LmdldFN0cmVhbWluZ0Nvbm5lY3Rpb24oKTtcbiAgICAgICAgc2FuZGJveC5zdHViKGNvbm5lY3Rpb24uX3dlYnNvY2tldENsaWVudC5fbGF0ZW5jeVNlcnZpY2UsICdfcmVmcmVzaExhdGVuY3knKS5yZXNvbHZlcygpO1xuICAgICAgICBjb25uZWN0aW9uLl93ZWJzb2NrZXRDbGllbnQuX2xhdGVuY3lTZXJ2aWNlLl9sYXRlbmN5Q2FjaGUgPSB7J3ZpbnQtaGlsbCc6IDUwMCwgJ25ldy15b3JrJzogMTAwfTtcbiAgICAgICAgYXdhaXQgY29ubmVjdGlvbi5jb25uZWN0KCk7XG4gICAgICAgIGNsb2NrLnRpY2tBc3luYyg1MDAwKTsgXG4gICAgICAgIGF3YWl0IGNvbm5lY3Rpb24ud2FpdFN5bmNocm9uaXplZCh7dGltZW91dEluU2Vjb25kczogMTB9KTtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBjb25uZWN0aW9uLnRlcm1pbmFsU3RhdGUuYWNjb3VudEluZm9ybWF0aW9uO1xuICAgICAgICBzaW5vbi5hc3NlcnQubWF0Y2gocmVzcG9uc2UsIGFjY291bnRJbmZvcm1hdGlvbik7XG4gICAgICAgIHNpbm9uLmFzc2VydC5tYXRjaChjYWxsZWRBY2NvdW50SWQsICdhY2NvdW50SWRSZXBsaWNhJyk7XG4gICAgICAgIHNpbm9uLmFzc2VydC5tYXRjaCh1bnN1YnNjcmliZWRBY2NvdW50SWQsICdhY2NvdW50SWQnKTtcbiAgICAgICAgKGNvbm5lY3Rpb24uc3luY2hyb25pemVkICYmIGNvbm5lY3Rpb24udGVybWluYWxTdGF0ZS5jb25uZWN0ZWQgXG4gICAgICAgICAgJiYgY29ubmVjdGlvbi50ZXJtaW5hbFN0YXRlLmNvbm5lY3RlZFRvQnJva2VyKS5zaG91bGQuZXF1YWwodHJ1ZSk7XG4gICAgICAgIGNvbm5lY3Rpb24uX3dlYnNvY2tldENsaWVudC5fbGF0ZW5jeVNlcnZpY2UuX2xhdGVuY3lDYWNoZSA9IHsndmludC1oaWxsJzogMTAwLCAnbmV3LXlvcmsnOiA1MDB9O1xuICAgICAgICBhd2FpdCBjbG9jay50aWNrQXN5bmMoMTUgKiA2MCAqIDEwMDAgKyA1MDAwKTsgXG4gICAgICAgIHNpbm9uLmFzc2VydC5tYXRjaChjYWxsZWRBY2NvdW50SWQsICdhY2NvdW50SWQnKTtcbiAgICAgICAgc2lub24uYXNzZXJ0Lm1hdGNoKHVuc3Vic2NyaWJlZEFjY291bnRJZCwgJ2FjY291bnRJZFJlcGxpY2EnKTtcbiAgICAgICAgKGNvbm5lY3Rpb24uc3luY2hyb25pemVkICYmIGNvbm5lY3Rpb24udGVybWluYWxTdGF0ZS5jb25uZWN0ZWQgXG4gICAgICAgICYmIGNvbm5lY3Rpb24udGVybWluYWxTdGF0ZS5jb25uZWN0ZWRUb0Jyb2tlcikuc2hvdWxkLmVxdWFsKHRydWUpO1xuICAgICAgfSkudGltZW91dCgyMDAwMCk7XG5cbiAgICB9KTtcblxuICB9KTtcbn0pO1xuIl19